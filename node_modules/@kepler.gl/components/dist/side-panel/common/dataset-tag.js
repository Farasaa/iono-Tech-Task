"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = DatasetTagFactory;

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireDefault(require("react"));

var _localization = require("@kepler.gl/localization");

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _2 = require("../..");

var _templateObject, _templateObject2;

function nop(_) {}

var DatasetTagWrapper = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  color: ", ";\n  font-size: 11px;\n  letter-spacing: 0.2px;\n  overflow: auto;\n\n  .dataset-color {\n    flex-shrink: 0;\n    margin-top: 3px;\n  }\n\n  .dataset-name {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"])), function (props) {
  return props.theme.textColor;
});

var DatasetColorPicker = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n"])));

var UpdateTableColor = function UpdateTableColor(_ref) {
  var children = _ref.children,
      id = _ref.id;
  return /*#__PURE__*/_react["default"].createElement(DatasetColorPicker, {
    className: "dataset-action update-color",
    "data-tip": true,
    "data-for": "update-color-".concat(id)
  }, children);
};

function DatasetTagFactory() {
  var DatasetTag = function DatasetTag(_ref2) {
    var _ref2$onClick = _ref2.onClick,
        onClick = _ref2$onClick === void 0 ? nop : _ref2$onClick,
        _ref2$onClickSquare = _ref2.onClickSquare,
        onClickSquare = _ref2$onClickSquare === void 0 ? nop : _ref2$onClickSquare,
        dataset = _ref2.dataset,
        updateTableColor = _ref2.updateTableColor;
    return /*#__PURE__*/_react["default"].createElement(DatasetTagWrapper, {
      className: "source-data-tag"
    }, /*#__PURE__*/_react["default"].createElement(UpdateTableColor, {
      id: dataset.id
    }, /*#__PURE__*/_react["default"].createElement(_2.DatasetSquare, {
      className: "dataset-color",
      backgroundColor: dataset.color,
      onClick: onClickSquare,
      "data-tip": true,
      "data-for": "update-color-".concat(dataset.id)
    }), updateTableColor ? /*#__PURE__*/_react["default"].createElement(_2.Tooltip, {
      id: "update-color-".concat(dataset.id),
      effect: "solid"
    }, /*#__PURE__*/_react["default"].createElement("span", null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: 'Update color'
    }))) : null), /*#__PURE__*/_react["default"].createElement("div", {
      className: "dataset-name",
      title: dataset.label,
      onClick: onClick
    }, dataset.label));
  };

  return DatasetTag;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2NvbW1vbi9kYXRhc2V0LXRhZy50c3giXSwibmFtZXMiOlsibm9wIiwiXyIsIkRhdGFzZXRUYWdXcmFwcGVyIiwic3R5bGVkIiwiZGl2IiwicHJvcHMiLCJ0aGVtZSIsInRleHRDb2xvciIsIkRhdGFzZXRDb2xvclBpY2tlciIsIlVwZGF0ZVRhYmxlQ29sb3IiLCJjaGlsZHJlbiIsImlkIiwiRGF0YXNldFRhZ0ZhY3RvcnkiLCJEYXRhc2V0VGFnIiwib25DbGljayIsIm9uQ2xpY2tTcXVhcmUiLCJkYXRhc2V0IiwidXBkYXRlVGFibGVDb2xvciIsImNvbG9yIiwibGFiZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFLQSxTQUFTQSxHQUFULENBQWFDLENBQWIsRUFBZ0IsQ0FBRTs7QUFFbEIsSUFBTUMsaUJBQWlCLEdBQUdDLDZCQUFPQyxHQUFWLDJXQUVaLFVBQUFDLEtBQUs7QUFBQSxTQUFJQSxLQUFLLENBQUNDLEtBQU4sQ0FBWUMsU0FBaEI7QUFBQSxDQUZPLENBQXZCOztBQW1CQSxJQUFNQyxrQkFBa0IsR0FBR0wsNkJBQU9DLEdBQVYsNEdBQXhCOztBQUlBLElBQU1LLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUI7QUFBQSxNQUFFQyxRQUFGLFFBQUVBLFFBQUY7QUFBQSxNQUFZQyxFQUFaLFFBQVlBLEVBQVo7QUFBQSxzQkFDdkIsZ0NBQUMsa0JBQUQ7QUFDRSxJQUFBLFNBQVMsRUFBQyw2QkFEWjtBQUVFLG9CQUZGO0FBR0UsdUNBQTBCQSxFQUExQjtBQUhGLEtBS0dELFFBTEgsQ0FEdUI7QUFBQSxDQUF6Qjs7QUF3QmUsU0FBU0UsaUJBQVQsR0FBd0Q7QUFDckUsTUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWE7QUFBQSw4QkFDakJDLE9BRGlCO0FBQUEsUUFDakJBLE9BRGlCLDhCQUNQZCxHQURPO0FBQUEsb0NBRWpCZSxhQUZpQjtBQUFBLFFBRWpCQSxhQUZpQixvQ0FFRGYsR0FGQztBQUFBLFFBR2pCZ0IsT0FIaUIsU0FHakJBLE9BSGlCO0FBQUEsUUFJakJDLGdCQUppQixTQUlqQkEsZ0JBSmlCO0FBQUEsd0JBTWpCLGdDQUFDLGlCQUFEO0FBQW1CLE1BQUEsU0FBUyxFQUFDO0FBQTdCLG9CQUNFLGdDQUFDLGdCQUFEO0FBQWtCLE1BQUEsRUFBRSxFQUFFRCxPQUFPLENBQUNMO0FBQTlCLG9CQUNFLGdDQUFDLGdCQUFEO0FBQ0UsTUFBQSxTQUFTLEVBQUMsZUFEWjtBQUVFLE1BQUEsZUFBZSxFQUFFSyxPQUFPLENBQUNFLEtBRjNCO0FBR0UsTUFBQSxPQUFPLEVBQUVILGFBSFg7QUFJRSxzQkFKRjtBQUtFLHlDQUEwQkMsT0FBTyxDQUFDTCxFQUFsQztBQUxGLE1BREYsRUFRR00sZ0JBQWdCLGdCQUNmLGdDQUFDLFVBQUQ7QUFBUyxNQUFBLEVBQUUseUJBQWtCRCxPQUFPLENBQUNMLEVBQTFCLENBQVg7QUFBMkMsTUFBQSxNQUFNLEVBQUM7QUFBbEQsb0JBQ0UsMkRBQ0UsZ0NBQUMsOEJBQUQ7QUFBa0IsTUFBQSxFQUFFLEVBQUU7QUFBdEIsTUFERixDQURGLENBRGUsR0FNYixJQWROLENBREYsZUFpQkU7QUFBSyxNQUFBLFNBQVMsRUFBQyxjQUFmO0FBQThCLE1BQUEsS0FBSyxFQUFFSyxPQUFPLENBQUNHLEtBQTdDO0FBQW9ELE1BQUEsT0FBTyxFQUFFTDtBQUE3RCxPQUNHRSxPQUFPLENBQUNHLEtBRFgsQ0FqQkYsQ0FOaUI7QUFBQSxHQUFuQjs7QUE2QkEsU0FBT04sVUFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge0RhdGFzZXRTcXVhcmUsIFRvb2x0aXB9IGZyb20gJy4uLy4uJztcbmltcG9ydCB7VXBkYXRlVGFibGVDb2xvclR5cGVzfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7UkdCQ29sb3J9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtWaXNTdGF0ZUFjdGlvbnMsIEFjdGlvbkhhbmRsZXJ9IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5cbmZ1bmN0aW9uIG5vcChfKSB7fVxuXG5jb25zdCBEYXRhc2V0VGFnV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRleHRDb2xvcn07XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMnB4O1xuICBvdmVyZmxvdzogYXV0bztcblxuICAuZGF0YXNldC1jb2xvciB7XG4gICAgZmxleC1zaHJpbms6IDA7XG4gICAgbWFyZ2luLXRvcDogM3B4O1xuICB9XG5cbiAgLmRhdGFzZXQtbmFtZSB7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICB9XG5gO1xuXG5jb25zdCBEYXRhc2V0Q29sb3JQaWNrZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuYDtcblxuY29uc3QgVXBkYXRlVGFibGVDb2xvciA9ICh7Y2hpbGRyZW4sIGlkfTogVXBkYXRlVGFibGVDb2xvclR5cGVzKSA9PiAoXG4gIDxEYXRhc2V0Q29sb3JQaWNrZXJcbiAgICBjbGFzc05hbWU9XCJkYXRhc2V0LWFjdGlvbiB1cGRhdGUtY29sb3JcIlxuICAgIGRhdGEtdGlwXG4gICAgZGF0YS1mb3I9e2B1cGRhdGUtY29sb3ItJHtpZH1gfVxuICA+XG4gICAge2NoaWxkcmVufVxuICA8L0RhdGFzZXRDb2xvclBpY2tlcj5cbik7XG5cbnR5cGUgTWluaURhdGFzZXQgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIGNvbG9yOiBSR0JDb2xvcjtcbiAgbGFiZWw/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBEYXRhc2V0VGFnUHJvcHMgPSB7XG4gIGlkPzogc3RyaW5nO1xuICBkYXRhc2V0OiBNaW5pRGF0YXNldDtcbiAgdXBkYXRlVGFibGVDb2xvcj86IEFjdGlvbkhhbmRsZXI8dHlwZW9mIFZpc1N0YXRlQWN0aW9ucy51cGRhdGVUYWJsZUNvbG9yPjtcbiAgb25DbGljaz86IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50PjtcbiAgb25DbGlja1NxdWFyZT86IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50Pjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERhdGFzZXRUYWdGYWN0b3J5KCk6IFJlYWN0LkZDPERhdGFzZXRUYWdQcm9wcz4ge1xuICBjb25zdCBEYXRhc2V0VGFnID0gKHtcbiAgICBvbkNsaWNrID0gbm9wLFxuICAgIG9uQ2xpY2tTcXVhcmUgPSBub3AsXG4gICAgZGF0YXNldCxcbiAgICB1cGRhdGVUYWJsZUNvbG9yXG4gIH06IERhdGFzZXRUYWdQcm9wcykgPT4gKFxuICAgIDxEYXRhc2V0VGFnV3JhcHBlciBjbGFzc05hbWU9XCJzb3VyY2UtZGF0YS10YWdcIj5cbiAgICAgIDxVcGRhdGVUYWJsZUNvbG9yIGlkPXtkYXRhc2V0LmlkfT5cbiAgICAgICAgPERhdGFzZXRTcXVhcmVcbiAgICAgICAgICBjbGFzc05hbWU9XCJkYXRhc2V0LWNvbG9yXCJcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9e2RhdGFzZXQuY29sb3J9XG4gICAgICAgICAgb25DbGljaz17b25DbGlja1NxdWFyZX1cbiAgICAgICAgICBkYXRhLXRpcFxuICAgICAgICAgIGRhdGEtZm9yPXtgdXBkYXRlLWNvbG9yLSR7ZGF0YXNldC5pZH1gfVxuICAgICAgICAvPlxuICAgICAgICB7dXBkYXRlVGFibGVDb2xvciA/IChcbiAgICAgICAgICA8VG9vbHRpcCBpZD17YHVwZGF0ZS1jb2xvci0ke2RhdGFzZXQuaWR9YH0gZWZmZWN0PVwic29saWRcIj5cbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD17J1VwZGF0ZSBjb2xvcid9IC8+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvVXBkYXRlVGFibGVDb2xvcj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGF0YXNldC1uYW1lXCIgdGl0bGU9e2RhdGFzZXQubGFiZWx9IG9uQ2xpY2s9e29uQ2xpY2t9PlxuICAgICAgICB7ZGF0YXNldC5sYWJlbH1cbiAgICAgIDwvZGl2PlxuICAgIDwvRGF0YXNldFRhZ1dyYXBwZXI+XG4gICk7XG5cbiAgcmV0dXJuIERhdGFzZXRUYWc7XG59XG4iXX0=
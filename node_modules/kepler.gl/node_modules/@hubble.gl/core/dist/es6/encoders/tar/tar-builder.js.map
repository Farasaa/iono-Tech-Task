{"version":3,"sources":["../../../../src/encoders/tar/tar-builder.js"],"names":["Tar","TAR_BUILDER_OPTIONS","recordsPerBlock","TARBuilder","properties","id","name","extensions","mimeType","builder","options","constructor","tape","count","addFile","buffer","filename","append","Uint8Array","build","Response","save","arrayBuffer"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,OAAhB;AAEA,MAAMC,mBAAmB,GAAG;AAC1BC,EAAAA,eAAe,EAAE;AADS,CAA5B;AAIA,eAAe,MAAMC,UAAN,CAAiB;AAM9B,aAAWC,UAAX,GAAwB;AACtB,WAAO;AACLC,MAAAA,EAAE,EAAE,KADC;AAELC,MAAAA,IAAI,EAAE,KAFD;AAGLC,MAAAA,UAAU,EAAE,CAAC,KAAD,CAHP;AAILC,MAAAA,QAAQ,EAAE,mBAJL;AAKLC,MAAAA,OAAO,EAAEN,UALJ;AAMLO,MAAAA,OAAO,EAAET;AANJ,KAAP;AAQD;;AAKDU,EAAAA,WAAW,CAACD,OAAD,EAAU;AAAA;;AAAA;;AACnB,SAAKA,OAAL,GAAe,EAAC,GAAGT,mBAAJ;AAAyB,SAAGS;AAA5B,KAAf;AACA,SAAKE,IAAL,GAAY,IAAIZ,GAAJ,CAAQ,KAAKU,OAAL,CAAaR,eAArB,CAAZ;AACA,SAAKW,KAAL,GAAa,CAAb;AACD;;AAMDC,EAAAA,OAAO,CAACC,MAAD,EAASC,QAAT,EAAmB;AACxB,SAAKJ,IAAL,CAAUK,MAAV,CAAiBD,QAAjB,EAA2B,IAAIE,UAAJ,CAAeH,MAAf,CAA3B;AACA,SAAKF,KAAL;AACD;;AAKD,QAAMM,KAAN,GAAc;AACZ,WAAO,IAAIC,QAAJ,CAAa,KAAKR,IAAL,CAAUS,IAAV,EAAb,EAA+BC,WAA/B,EAAP;AACD;;AAxC6B","sourcesContent":["import Tar from './tar';\n\nconst TAR_BUILDER_OPTIONS = {\n  recordsPerBlock: 20\n};\n\nexport default class TARBuilder {\n  /** @type {Tar} */\n  tape;\n  /** @type {number} */\n  count;\n\n  static get properties() {\n    return {\n      id: 'tar',\n      name: 'TAR',\n      extensions: ['tar'],\n      mimeType: 'application/x-tar',\n      builder: TARBuilder,\n      options: TAR_BUILDER_OPTIONS\n    };\n  }\n\n  /**\n   * @param {Partial<typeof TAR_BUILDER_OPTIONS>} options\n   */\n  constructor(options) {\n    this.options = {...TAR_BUILDER_OPTIONS, ...options};\n    this.tape = new Tar(this.options.recordsPerBlock);\n    this.count = 0;\n  }\n\n  /**\n   * @param {ArrayBuffer} buffer\n   * @param {string} filename\n   */\n  addFile(buffer, filename) {\n    this.tape.append(filename, new Uint8Array(buffer));\n    this.count++;\n  }\n\n  /**\n   * @returns {Promise<ArrayBuffer>}\n   */\n  async build() {\n    return new Response(this.tape.save()).arrayBuffer();\n  }\n}\n"],"file":"tar-builder.js"}
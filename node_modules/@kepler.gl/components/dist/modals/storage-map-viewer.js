"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireDefault(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _moment = _interopRequireDefault(require("moment"));

var _icons = require("../common/icons");

var _localization = require("@kepler.gl/localization");

var _templateObject, _templateObject2, _templateObject3, _templateObject4;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var imageH = 108;

var StyledAssetGallery = _styledComponents["default"].div.attrs({
  className: 'storage-asset-gallery'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  justify-content: flex-start;\n  flex-wrap: wrap;\n"])));

var StyledAssetItem = _styledComponents["default"].div.attrs({
  className: 'asset__item'
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 23%;\n  margin-right: 2%;\n  max-width: 500px;\n  margin-bottom: 40px;\n  height: 245px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  :last {\n    margin-right: 0;\n  }\n\n  .asset__title {\n    font-size: 12px;\n    font-weight: 500;\n    color: ", ";\n    line-height: 18px;\n    height: 32px;\n  }\n\n  .asset__image {\n    border-radius: 4px;\n    overflow: hidden;\n    margin-bottom: 12px;\n    opacity: 0.9;\n    transition: opacity 0.4s ease;\n    position: relative;\n    line-height: 0;\n    height: ", "px;\n    flex-shrink: 0;\n\n    img {\n      max-width: 100%;\n    }\n    :hover {\n      cursor: pointer;\n      opacity: 1;\n    }\n  }\n\n  .asset__image__caption {\n    font-size: 11px;\n    font-weight: 400;\n    line-height: 16px;\n    margin-top: 10px;\n    height: 48px;\n    overflow: hidden;\n    display: -webkit-box;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n  }\n\n  .asset__last-updated {\n    font-size: 11px;\n    color: ", ";\n  }\n"])), function (props) {
  return props.theme.textColorLT;
}, imageH, function (props) {
  return props.theme.textColorLT;
});

var BackLink = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  font-size: 14px;\n  align-items: center;\n  color: ", ";\n  cursor: pointer;\n  margin-bottom: 40px;\n\n  :hover {\n    font-weight: 500;\n  }\n\n  span {\n    white-space: nowrap;\n  }\n  svg {\n    margin-right: 10px;\n  }\n"])), function (props) {
  return props.theme.titleColorLT;
});

var StyledError = _styledComponents["default"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  color: red;\n  font-size: 14px;\n  margin-bottom: 16px;\n"])));

var getDuration = function getDuration() {
  var last = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  return _moment["default"].duration(new Date().valueOf() - last).humanize();
};

var AssetItem = function AssetItem(_ref) {
  var asset = _ref.asset,
      onClick = _ref.onClick;
  return /*#__PURE__*/_react["default"].createElement(StyledAssetItem, null, /*#__PURE__*/_react["default"].createElement("div", {
    className: "asset__image",
    onClick: onClick
  }, asset.imageUrl && /*#__PURE__*/_react["default"].createElement("img", {
    src: asset.imageUrl
  })), /*#__PURE__*/_react["default"].createElement("div", {
    className: "asset__title"
  }, asset.label || asset.title), /*#__PURE__*/_react["default"].createElement("div", {
    className: "asset__image__caption"
  }, asset.description), asset.lastUpdated ? /*#__PURE__*/_react["default"].createElement("div", {
    className: "asset__last-updated"
  }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
    id: 'modal.storageMapViewer.lastModified',
    values: {
      lastUpdated: getDuration(asset.lastUpdated)
    }
  })) : null);
};

var StorageAssetsViewer = /*#__PURE__*/function (_React$Component) {
  (0, _inherits2["default"])(StorageAssetsViewer, _React$Component);

  var _super = _createSuper(StorageAssetsViewer);

  function StorageAssetsViewer() {
    (0, _classCallCheck2["default"])(this, StorageAssetsViewer);
    return _super.apply(this, arguments);
  }

  (0, _createClass2["default"])(StorageAssetsViewer, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          assets = _this$props.assets,
          onLoadAsset = _this$props.onLoadAsset,
          back = _this$props.back,
          error = _this$props.error;
      return /*#__PURE__*/_react["default"].createElement("div", {
        className: "storage-asset-viewer"
      }, /*#__PURE__*/_react["default"].createElement(BackLink, {
        onClick: back
      }, /*#__PURE__*/_react["default"].createElement(_icons.LeftArrow, {
        height: "12px"
      }), /*#__PURE__*/_react["default"].createElement("span", null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
        id: 'modal.storageMapViewer.back'
      }))), error && /*#__PURE__*/_react["default"].createElement(StyledError, null, error.message), /*#__PURE__*/_react["default"].createElement(StyledAssetGallery, null, assets.map(function (sp) {
        return /*#__PURE__*/_react["default"].createElement(AssetItem, {
          asset: sp,
          key: sp.id,
          onClick: function onClick() {
            return onLoadAsset(sp);
          }
        });
      })));
    }
  }]);
  return StorageAssetsViewer;
}(_react["default"].Component);

var _default = StorageAssetsViewer;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RhbHMvc3RvcmFnZS1tYXAtdmlld2VyLnRzeCJdLCJuYW1lcyI6WyJpbWFnZUgiLCJTdHlsZWRBc3NldEdhbGxlcnkiLCJzdHlsZWQiLCJkaXYiLCJhdHRycyIsImNsYXNzTmFtZSIsIlN0eWxlZEFzc2V0SXRlbSIsInByb3BzIiwidGhlbWUiLCJ0ZXh0Q29sb3JMVCIsIkJhY2tMaW5rIiwidGl0bGVDb2xvckxUIiwiU3R5bGVkRXJyb3IiLCJnZXREdXJhdGlvbiIsImxhc3QiLCJtb21lbnQiLCJkdXJhdGlvbiIsIkRhdGUiLCJ2YWx1ZU9mIiwiaHVtYW5pemUiLCJBc3NldEl0ZW0iLCJhc3NldCIsIm9uQ2xpY2siLCJpbWFnZVVybCIsImxhYmVsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImxhc3RVcGRhdGVkIiwiU3RvcmFnZUFzc2V0c1ZpZXdlciIsImFzc2V0cyIsIm9uTG9hZEFzc2V0IiwiYmFjayIsImVycm9yIiwibWVzc2FnZSIsIm1hcCIsInNwIiwiaWQiLCJSZWFjdCIsIkNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsSUFBTUEsTUFBTSxHQUFHLEdBQWY7O0FBRUEsSUFBTUMsa0JBQWtCLEdBQUdDLDZCQUFPQyxHQUFQLENBQVdDLEtBQVgsQ0FBaUI7QUFDMUNDLEVBQUFBLFNBQVMsRUFBRTtBQUQrQixDQUFqQixDQUFILDhKQUF4Qjs7QUFRQSxJQUFNQyxlQUFlLEdBQUdKLDZCQUFPQyxHQUFQLENBQVdDLEtBQVgsQ0FBaUI7QUFDdkNDLEVBQUFBLFNBQVMsRUFBRTtBQUQ0QixDQUFqQixDQUFILG1vQ0FtQlIsVUFBQUUsS0FBSztBQUFBLFNBQUlBLEtBQUssQ0FBQ0MsS0FBTixDQUFZQyxXQUFoQjtBQUFBLENBbkJHLEVBZ0NQVCxNQWhDTyxFQTJEUixVQUFBTyxLQUFLO0FBQUEsU0FBSUEsS0FBSyxDQUFDQyxLQUFOLENBQVlDLFdBQWhCO0FBQUEsQ0EzREcsQ0FBckI7O0FBK0RBLElBQU1DLFFBQVEsR0FBR1IsNkJBQU9DLEdBQVYsaVZBSUgsVUFBQUksS0FBSztBQUFBLFNBQUlBLEtBQUssQ0FBQ0MsS0FBTixDQUFZRyxZQUFoQjtBQUFBLENBSkYsQ0FBZDs7QUFvQkEsSUFBTUMsV0FBVyxHQUFHViw2QkFBT0MsR0FBVixxSkFBakI7O0FBTUEsSUFBTVUsV0FBVyxHQUFHLFNBQWRBLFdBQWM7QUFBQSxNQUFDQyxJQUFELHVFQUFnQixDQUFoQjtBQUFBLFNBQXNCQyxtQkFBT0MsUUFBUCxDQUFnQixJQUFJQyxJQUFKLEdBQVdDLE9BQVgsS0FBdUJKLElBQXZDLEVBQTZDSyxRQUE3QyxFQUF0QjtBQUFBLENBQXBCOztBQWdCQSxJQUFNQyxTQUFtQyxHQUFHLFNBQXRDQSxTQUFzQztBQUFBLE1BQUVDLEtBQUYsUUFBRUEsS0FBRjtBQUFBLE1BQVNDLE9BQVQsUUFBU0EsT0FBVDtBQUFBLHNCQUMxQyxnQ0FBQyxlQUFELHFCQUNFO0FBQUssSUFBQSxTQUFTLEVBQUMsY0FBZjtBQUE4QixJQUFBLE9BQU8sRUFBRUE7QUFBdkMsS0FDR0QsS0FBSyxDQUFDRSxRQUFOLGlCQUFrQjtBQUFLLElBQUEsR0FBRyxFQUFFRixLQUFLLENBQUNFO0FBQWhCLElBRHJCLENBREYsZUFJRTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsS0FBK0JGLEtBQUssQ0FBQ0csS0FBTixJQUFlSCxLQUFLLENBQUNJLEtBQXBELENBSkYsZUFLRTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsS0FBd0NKLEtBQUssQ0FBQ0ssV0FBOUMsQ0FMRixFQU1HTCxLQUFLLENBQUNNLFdBQU4sZ0JBQ0M7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLGtCQUNFLGdDQUFDLDhCQUFEO0FBQ0UsSUFBQSxFQUFFLEVBQUUscUNBRE47QUFFRSxJQUFBLE1BQU0sRUFBRTtBQUFDQSxNQUFBQSxXQUFXLEVBQUVkLFdBQVcsQ0FBQ1EsS0FBSyxDQUFDTSxXQUFQO0FBQXpCO0FBRlYsSUFERixDQURELEdBT0csSUFiTixDQUQwQztBQUFBLENBQTVDOztJQXlCTUMsbUI7Ozs7Ozs7Ozs7OztXQUNKLGtCQUFTO0FBQUEsd0JBQ29DLEtBQUtyQixLQUR6QztBQUFBLFVBQ0FzQixNQURBLGVBQ0FBLE1BREE7QUFBQSxVQUNRQyxXQURSLGVBQ1FBLFdBRFI7QUFBQSxVQUNxQkMsSUFEckIsZUFDcUJBLElBRHJCO0FBQUEsVUFDMkJDLEtBRDNCLGVBQzJCQSxLQUQzQjtBQUdQLDBCQUNFO0FBQUssUUFBQSxTQUFTLEVBQUM7QUFBZixzQkFDRSxnQ0FBQyxRQUFEO0FBQVUsUUFBQSxPQUFPLEVBQUVEO0FBQW5CLHNCQUNFLGdDQUFDLGdCQUFEO0FBQVcsUUFBQSxNQUFNLEVBQUM7QUFBbEIsUUFERixlQUVFLDJEQUNFLGdDQUFDLDhCQUFEO0FBQWtCLFFBQUEsRUFBRSxFQUFFO0FBQXRCLFFBREYsQ0FGRixDQURGLEVBT0dDLEtBQUssaUJBQUksZ0NBQUMsV0FBRCxRQUFjQSxLQUFLLENBQUNDLE9BQXBCLENBUFosZUFRRSxnQ0FBQyxrQkFBRCxRQUNHSixNQUFNLENBQUNLLEdBQVAsQ0FBVyxVQUFBQyxFQUFFO0FBQUEsNEJBQ1osZ0NBQUMsU0FBRDtBQUFXLFVBQUEsS0FBSyxFQUFFQSxFQUFsQjtBQUFzQixVQUFBLEdBQUcsRUFBRUEsRUFBRSxDQUFDQyxFQUE5QjtBQUFrQyxVQUFBLE9BQU8sRUFBRTtBQUFBLG1CQUFNTixXQUFXLENBQUNLLEVBQUQsQ0FBakI7QUFBQTtBQUEzQyxVQURZO0FBQUEsT0FBYixDQURILENBUkYsQ0FERjtBQWdCRDs7O0VBcEIrQkUsa0JBQU1DLFM7O2VBdUJ6QlYsbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQge0xlZnRBcnJvd30gZnJvbSAnLi4vY29tbW9uL2ljb25zJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuXG5jb25zdCBpbWFnZUggPSAxMDg7XG5cbmNvbnN0IFN0eWxlZEFzc2V0R2FsbGVyeSA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdzdG9yYWdlLWFzc2V0LWdhbGxlcnknXG59KWBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICBmbGV4LXdyYXA6IHdyYXA7XG5gO1xuXG5jb25zdCBTdHlsZWRBc3NldEl0ZW0gPSBzdHlsZWQuZGl2LmF0dHJzKHtcbiAgY2xhc3NOYW1lOiAnYXNzZXRfX2l0ZW0nXG59KWBcbiAgd2lkdGg6IDIzJTtcbiAgbWFyZ2luLXJpZ2h0OiAyJTtcbiAgbWF4LXdpZHRoOiA1MDBweDtcbiAgbWFyZ2luLWJvdHRvbTogNDBweDtcbiAgaGVpZ2h0OiAyNDVweDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXG4gIDpsYXN0IHtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gIH1cblxuICAuYXNzZXRfX3RpdGxlIHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50ZXh0Q29sb3JMVH07XG4gICAgbGluZS1oZWlnaHQ6IDE4cHg7XG4gICAgaGVpZ2h0OiAzMnB4O1xuICB9XG5cbiAgLmFzc2V0X19pbWFnZSB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICBvcGFjaXR5OiAwLjk7XG4gICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjRzIGVhc2U7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGxpbmUtaGVpZ2h0OiAwO1xuICAgIGhlaWdodDogJHtpbWFnZUh9cHg7XG4gICAgZmxleC1zaHJpbms6IDA7XG5cbiAgICBpbWcge1xuICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgIH1cbiAgICA6aG92ZXIge1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgb3BhY2l0eTogMTtcbiAgICB9XG4gIH1cblxuICAuYXNzZXRfX2ltYWdlX19jYXB0aW9uIHtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICBsaW5lLWhlaWdodDogMTZweDtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIGhlaWdodDogNDhweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIC13ZWJraXQtbGluZS1jbGFtcDogMztcbiAgICAtd2Via2l0LWJveC1vcmllbnQ6IHZlcnRpY2FsO1xuICB9XG5cbiAgLmFzc2V0X19sYXN0LXVwZGF0ZWQge1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50ZXh0Q29sb3JMVH07XG4gIH1cbmA7XG5cbmNvbnN0IEJhY2tMaW5rID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50aXRsZUNvbG9yTFR9O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDQwcHg7XG5cbiAgOmhvdmVyIHtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9XG5cbiAgc3BhbiB7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgfVxuICBzdmcge1xuICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkRXJyb3IgPSBzdHlsZWQuZGl2YFxuICBjb2xvcjogcmVkO1xuICBmb250LXNpemU6IDE0cHg7XG4gIG1hcmdpbi1ib3R0b206IDE2cHg7XG5gO1xuXG5jb25zdCBnZXREdXJhdGlvbiA9IChsYXN0OiBudW1iZXIgPSAwKSA9PiBtb21lbnQuZHVyYXRpb24obmV3IERhdGUoKS52YWx1ZU9mKCkgLSBsYXN0KS5odW1hbml6ZSgpO1xuXG5pbnRlcmZhY2UgQXNzZXQge1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIHRpdGxlPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgbGFzdFVwZGF0ZWQ/OiBudW1iZXI7XG4gIGlkPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQXNzZXRJdGVtUHJvcHMge1xuICBhc3NldDogQXNzZXQ7XG4gIG9uQ2xpY2s6IFJlYWN0Lk1vdXNlRXZlbnRIYW5kbGVyPEhUTUxEaXZFbGVtZW50Pjtcbn1cblxuY29uc3QgQXNzZXRJdGVtOiBSZWFjdC5GQzxBc3NldEl0ZW1Qcm9wcz4gPSAoe2Fzc2V0LCBvbkNsaWNrfSkgPT4gKFxuICA8U3R5bGVkQXNzZXRJdGVtPlxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYXNzZXRfX2ltYWdlXCIgb25DbGljaz17b25DbGlja30+XG4gICAgICB7YXNzZXQuaW1hZ2VVcmwgJiYgPGltZyBzcmM9e2Fzc2V0LmltYWdlVXJsfSAvPn1cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0X190aXRsZVwiPnthc3NldC5sYWJlbCB8fCBhc3NldC50aXRsZX08L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0X19pbWFnZV9fY2FwdGlvblwiPnthc3NldC5kZXNjcmlwdGlvbn08L2Rpdj5cbiAgICB7YXNzZXQubGFzdFVwZGF0ZWQgPyAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzc2V0X19sYXN0LXVwZGF0ZWRcIj5cbiAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICBpZD17J21vZGFsLnN0b3JhZ2VNYXBWaWV3ZXIubGFzdE1vZGlmaWVkJ31cbiAgICAgICAgICB2YWx1ZXM9e3tsYXN0VXBkYXRlZDogZ2V0RHVyYXRpb24oYXNzZXQubGFzdFVwZGF0ZWQpfX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsfVxuICA8L1N0eWxlZEFzc2V0SXRlbT5cbik7XG5cbmludGVyZmFjZSBTdG9yYWdlQXNzZXRzVmlld2VyUHJvcHMge1xuICBhc3NldHM6IEFzc2V0W107XG4gIG9uTG9hZEFzc2V0OiAoYXNzZXQ6IEFzc2V0KSA9PiB2b2lkO1xuICBiYWNrPzogUmVhY3QuTW91c2VFdmVudEhhbmRsZXI8SFRNTERpdkVsZW1lbnQ+O1xuICBlcnJvcj86IHttZXNzYWdlPzogc3RyaW5nfTtcbn1cblxuY2xhc3MgU3RvcmFnZUFzc2V0c1ZpZXdlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxTdG9yYWdlQXNzZXRzVmlld2VyUHJvcHM+IHtcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHthc3NldHMsIG9uTG9hZEFzc2V0LCBiYWNrLCBlcnJvcn0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RvcmFnZS1hc3NldC12aWV3ZXJcIj5cbiAgICAgICAgPEJhY2tMaW5rIG9uQ2xpY2s9e2JhY2t9PlxuICAgICAgICAgIDxMZWZ0QXJyb3cgaGVpZ2h0PVwiMTJweFwiIC8+XG4gICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD17J21vZGFsLnN0b3JhZ2VNYXBWaWV3ZXIuYmFjayd9IC8+XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L0JhY2tMaW5rPlxuICAgICAgICB7ZXJyb3IgJiYgPFN0eWxlZEVycm9yPntlcnJvci5tZXNzYWdlfTwvU3R5bGVkRXJyb3I+fVxuICAgICAgICA8U3R5bGVkQXNzZXRHYWxsZXJ5PlxuICAgICAgICAgIHthc3NldHMubWFwKHNwID0+IChcbiAgICAgICAgICAgIDxBc3NldEl0ZW0gYXNzZXQ9e3NwfSBrZXk9e3NwLmlkfSBvbkNsaWNrPXsoKSA9PiBvbkxvYWRBc3NldChzcCl9IC8+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvU3R5bGVkQXNzZXRHYWxsZXJ5PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdG9yYWdlQXNzZXRzVmlld2VyO1xuIl19
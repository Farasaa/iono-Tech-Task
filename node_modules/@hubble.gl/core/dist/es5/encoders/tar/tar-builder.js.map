{"version":3,"file":"tar-builder.js","names":["TAR_BUILDER_OPTIONS","recordsPerBlock","TARBuilder","options","tape","Tar","count","buffer","filename","append","Uint8Array","Response","save","arrayBuffer","id","name","extensions","mimeType","builder"],"sources":["../../../../src/encoders/tar/tar-builder.js"],"sourcesContent":["import Tar from './tar';\n\nconst TAR_BUILDER_OPTIONS = {\n  recordsPerBlock: 20\n};\n\nexport default class TARBuilder {\n  /** @type {Tar} */\n  tape;\n  /** @type {number} */\n  count;\n\n  static get properties() {\n    return {\n      id: 'tar',\n      name: 'TAR',\n      extensions: ['tar'],\n      mimeType: 'application/x-tar',\n      builder: TARBuilder,\n      options: TAR_BUILDER_OPTIONS\n    };\n  }\n\n  /**\n   * @param {Partial<typeof TAR_BUILDER_OPTIONS>} options\n   */\n  constructor(options) {\n    this.options = {...TAR_BUILDER_OPTIONS, ...options};\n    this.tape = new Tar(this.options.recordsPerBlock);\n    this.count = 0;\n  }\n\n  /**\n   * @param {ArrayBuffer} buffer\n   * @param {string} filename\n   */\n  addFile(buffer, filename) {\n    this.tape.append(filename, new Uint8Array(buffer));\n    this.count++;\n  }\n\n  /**\n   * @returns {Promise<ArrayBuffer>}\n   */\n  async build() {\n    return new Response(this.tape.save()).arrayBuffer();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,mBAAmB,GAAG;EAC1BC,eAAe,EAAE;AADS,CAA5B;;IAIqBC,U;EAoBnB,oBAAYC,OAAZ,EAAqB;IAAA;IAAA;IAAA;IACnB,KAAKA,OAAL,mCAAmBH,mBAAnB,GAA2CG,OAA3C;IACA,KAAKC,IAAL,GAAY,IAAIC,YAAJ,CAAQ,KAAKF,OAAL,CAAaF,eAArB,CAAZ;IACA,KAAKK,KAAL,GAAa,CAAb;EACD;;;;WAMD,iBAAQC,MAAR,EAAgBC,QAAhB,EAA0B;MACxB,KAAKJ,IAAL,CAAUK,MAAV,CAAiBD,QAAjB,EAA2B,IAAIE,UAAJ,CAAeH,MAAf,CAA3B;MACA,KAAKD,KAAL;IACD;;;;6EAKD;QAAA;UAAA;YAAA;cAAA;gBAAA,iCACS,IAAIK,QAAJ,CAAa,KAAKP,IAAL,CAAUQ,IAAV,EAAb,EAA+BC,WAA/B,EADT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;SAhCA,eAAwB;MACtB,OAAO;QACLC,EAAE,EAAE,KADC;QAELC,IAAI,EAAE,KAFD;QAGLC,UAAU,EAAE,CAAC,KAAD,CAHP;QAILC,QAAQ,EAAE,mBAJL;QAKLC,OAAO,EAAEhB,UALJ;QAMLC,OAAO,EAAEH;MANJ,CAAP;IAQD"}
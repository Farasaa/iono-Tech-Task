"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LayerColorSelectorFactory = LayerColorSelectorFactory;
exports.LayerColorRangeSelectorFactory = LayerColorRangeSelectorFactory;
exports.ArcLayerColorSelectorFactory = ArcLayerColorSelectorFactory;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _colorSelector = _interopRequireDefault(require("./color-selector"));

var _styledComponents = require("../../common/styled-components");

// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
LayerColorSelectorFactory.deps = [_colorSelector["default"]];

function LayerColorSelectorFactory(ColorSelector) {
  var LayerColorSelector = function LayerColorSelector(_ref) {
    var layer = _ref.layer,
        onChange = _ref.onChange,
        selectedColor = _ref.selectedColor,
        _ref$property = _ref.property,
        property = _ref$property === void 0 ? 'color' : _ref$property,
        setColorUI = _ref.setColorUI;
    var onSetColorUI = (0, _react.useCallback)(function (newConfig) {
      return setColorUI(property, newConfig);
    }, [setColorUI, property]);
    return /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(ColorSelector, {
      colorSets: [{
        selectedColor: selectedColor || layer.config.color,
        setColor: function setColor(rgbValue) {
          return onChange((0, _defineProperty2["default"])({}, property, rgbValue));
        }
      }],
      colorUI: layer.config.colorUI[property],
      setColorUI: onSetColorUI
    }));
  };

  return LayerColorSelector;
}

LayerColorRangeSelectorFactory.deps = [_colorSelector["default"]];

function LayerColorRangeSelectorFactory(ColorSelector) {
  var LayerColorRangeSelector = function LayerColorRangeSelector(_ref2) {
    var layer = _ref2.layer,
        onChange = _ref2.onChange,
        _ref2$property = _ref2.property,
        property = _ref2$property === void 0 ? 'colorRange' : _ref2$property,
        setColorUI = _ref2.setColorUI;
    var onSetColorUI = (0, _react.useCallback)(function (newConfig) {
      return setColorUI(property, newConfig);
    }, [setColorUI, property]);
    return /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(ColorSelector, {
      colorSets: [{
        selectedColor: layer.config.visConfig[property],
        isRange: true,
        setColor: function setColor(colorRange) {
          return onChange((0, _defineProperty2["default"])({}, property, colorRange));
        }
      }],
      colorUI: layer.config.colorUI[property],
      setColorUI: onSetColorUI
    }));
  };

  return LayerColorRangeSelector;
}

ArcLayerColorSelectorFactory.deps = [_colorSelector["default"]];

function ArcLayerColorSelectorFactory(ColorSelector) {
  var ArcLayerColorSelector = function ArcLayerColorSelector(_ref3) {
    var layer = _ref3.layer,
        onChangeConfig = _ref3.onChangeConfig,
        onChangeVisConfig = _ref3.onChangeVisConfig,
        _ref3$property = _ref3.property,
        property = _ref3$property === void 0 ? 'color' : _ref3$property,
        setColorUI = _ref3.setColorUI;
    var onSetColorUI = (0, _react.useCallback)(function (newConfig) {
      return setColorUI(property, newConfig);
    }, [setColorUI, property]);
    return /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(ColorSelector, {
      colorSets: [{
        selectedColor: layer.config.color,
        setColor: function setColor(rgbValue) {
          return onChangeConfig({
            color: rgbValue
          });
        },
        label: 'Source'
      }, {
        selectedColor: layer.config.visConfig.targetColor || layer.config.color,
        setColor: function setColor(rgbValue) {
          return onChangeVisConfig({
            targetColor: rgbValue
          });
        },
        label: 'Target'
      }],
      colorUI: layer.config.colorUI[property],
      setColorUI: onSetColorUI
    }));
  };

  return ArcLayerColorSelector;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2xheWVyLXBhbmVsL2xheWVyLWNvbG9yLXNlbGVjdG9yLnRzeCJdLCJuYW1lcyI6WyJMYXllckNvbG9yU2VsZWN0b3JGYWN0b3J5IiwiZGVwcyIsIkNvbG9yU2VsZWN0b3JGYWN0b3J5IiwiQ29sb3JTZWxlY3RvciIsIkxheWVyQ29sb3JTZWxlY3RvciIsImxheWVyIiwib25DaGFuZ2UiLCJzZWxlY3RlZENvbG9yIiwicHJvcGVydHkiLCJzZXRDb2xvclVJIiwib25TZXRDb2xvclVJIiwibmV3Q29uZmlnIiwiY29uZmlnIiwiY29sb3IiLCJzZXRDb2xvciIsInJnYlZhbHVlIiwiY29sb3JVSSIsIkxheWVyQ29sb3JSYW5nZVNlbGVjdG9yRmFjdG9yeSIsIkxheWVyQ29sb3JSYW5nZVNlbGVjdG9yIiwidmlzQ29uZmlnIiwiaXNSYW5nZSIsImNvbG9yUmFuZ2UiLCJBcmNMYXllckNvbG9yU2VsZWN0b3JGYWN0b3J5IiwiQXJjTGF5ZXJDb2xvclNlbGVjdG9yIiwib25DaGFuZ2VDb25maWciLCJvbkNoYW5nZVZpc0NvbmZpZyIsImxhYmVsIiwidGFyZ2V0Q29sb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUdBOztBQU1BOztBQUNBOztBQVZBO0FBQ0E7QUFrQ0FBLHlCQUF5QixDQUFDQyxJQUExQixHQUFpQyxDQUFDQyx5QkFBRCxDQUFqQzs7QUFDTyxTQUFTRix5QkFBVCxDQUFtQ0csYUFBbkMsRUFBa0Q7QUFDdkQsTUFBTUMsa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFxQixPQU1JO0FBQUEsUUFMN0JDLEtBSzZCLFFBTDdCQSxLQUs2QjtBQUFBLFFBSjdCQyxRQUk2QixRQUo3QkEsUUFJNkI7QUFBQSxRQUg3QkMsYUFHNkIsUUFIN0JBLGFBRzZCO0FBQUEsNkJBRjdCQyxRQUU2QjtBQUFBLFFBRjdCQSxRQUU2Qiw4QkFGbEIsT0FFa0I7QUFBQSxRQUQ3QkMsVUFDNkIsUUFEN0JBLFVBQzZCO0FBQzdC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Q0UsTUFBQSxTQUFTLEVBQUUsQ0FDVDtBQUNFRCxRQUFBQSxhQUFhLEVBQUVGLEtBQUssQ0FBQ08sTUFBTixDQUFhQyxLQUQ5QjtBQUVFQyxRQUFBQSxRQUFRLEVBQUUsa0JBQUNDLFFBQUQ7QUFBQSxpQkFBd0JTLGNBQWMsQ0FBQztBQUFDWCxZQUFBQSxLQUFLLEVBQUVFO0FBQVIsV0FBRCxDQUF0QztBQUFBLFNBRlo7QUFHRVcsUUFBQUEsS0FBSyxFQUFFO0FBSFQsT0FEUyxFQU1UO0FBQ0VuQixRQUFBQSxhQUFhLEVBQUVGLEtBQUssQ0FBQ08sTUFBTixDQUFhTyxTQUFiLENBQXVCUSxXQUF2QixJQUFzQ3RCLEtBQUssQ0FBQ08sTUFBTixDQUFhQyxLQURwRTtBQUVFQyxRQUFBQSxRQUFRLEVBQUUsa0JBQUNDLFFBQUQ7QUFBQSxpQkFBd0JVLGlCQUFpQixDQUFDO0FBQUNFLFlBQUFBLFdBQVcsRUFBRVo7QUFBZCxXQUFELENBQXpDO0FBQUEsU0FGWjtBQUdFVyxRQUFBQSxLQUFLLEVBQUU7QUFIVCxPQU5TLENBRGI7QUFhRSxNQUFBLE9BQU8sRUFBRXJCLEtBQUssQ0FBQ08sTUFBTixDQUFhSSxPQUFiLENBQXFCUixRQUFyQixDQWJYO0FBY0UsTUFBQSxVQUFVLEVBQUVFO0FBZGQsTUFERixDQURGO0FBb0JELEdBaENEOztBQWlDQSxTQUFPYSxxQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2t9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtDb2xvclJhbmdlfSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5pbXBvcnQge0xheWVyfSBmcm9tICdAa2VwbGVyLmdsL2xheWVycyc7XG5pbXBvcnQge05lc3RlZFBhcnRpYWwsIFJHQkNvbG9yLCBDb2xvclVJfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcblxuaW1wb3J0IENvbG9yU2VsZWN0b3JGYWN0b3J5IGZyb20gJy4vY29sb3Itc2VsZWN0b3InO1xuaW1wb3J0IHtTaWRlUGFuZWxTZWN0aW9ufSBmcm9tICcuLi8uLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuXG50eXBlIExheWVyQ29sb3JTZWxlY3RvclByb3BzID0ge1xuICBsYXllcjogTGF5ZXI7XG4gIG9uQ2hhbmdlOiAodjogUmVjb3JkPHN0cmluZywgUkdCQ29sb3I+KSA9PiB2b2lkO1xuICBzZWxlY3RlZENvbG9yPzogUkdCQ29sb3I7XG4gIHByb3BlcnR5Pzogc3RyaW5nO1xuICBzZXRDb2xvclVJOiAocHJvcDogc3RyaW5nLCBuZXdDb25maWc6IE5lc3RlZFBhcnRpYWw8Q29sb3JVST4pID0+IHZvaWQ7XG59O1xuXG50eXBlIEFyY0xheWVyQ29sb3JTZWxlY3RvclByb3BzID0ge1xuICBsYXllcjogTGF5ZXI7XG4gIG9uQ2hhbmdlQ29uZmlnOiAodjoge2NvbG9yOiBSR0JDb2xvcn0pID0+IHZvaWQ7XG4gIG9uQ2hhbmdlVmlzQ29uZmlnOiAodjoge3RhcmdldENvbG9yOiBSR0JDb2xvcn0pID0+IHZvaWQ7XG4gIHByb3BlcnR5Pzogc3RyaW5nO1xuICBzZXRDb2xvclVJOiAocHJvcDogc3RyaW5nLCBuZXdDb25maWc6IE5lc3RlZFBhcnRpYWw8Q29sb3JVST4pID0+IHZvaWQ7XG59O1xuXG50eXBlIExheWVyQ29sb3JSYW5nZVNlbGVjdG9yUHJvcHMgPSB7XG4gIGxheWVyOiBMYXllcjtcbiAgb25DaGFuZ2U6ICh2OiBSZWNvcmQ8c3RyaW5nLCBDb2xvclJhbmdlPikgPT4gdm9pZDtcbiAgcHJvcGVydHk/OiBzdHJpbmc7XG4gIHNldENvbG9yVUk6IChwcm9wOiBzdHJpbmcsIG5ld0NvbmZpZzogTmVzdGVkUGFydGlhbDxDb2xvclVJPikgPT4gdm9pZDtcbn07XG5cbkxheWVyQ29sb3JTZWxlY3RvckZhY3RvcnkuZGVwcyA9IFtDb2xvclNlbGVjdG9yRmFjdG9yeV07XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJDb2xvclNlbGVjdG9yRmFjdG9yeShDb2xvclNlbGVjdG9yKSB7XG4gIGNvbnN0IExheWVyQ29sb3JTZWxlY3RvciA9ICh7XG4gICAgbGF5ZXIsXG4gICAgb25DaGFuZ2UsXG4gICAgc2VsZWN0ZWRDb2xvcixcbiAgICBwcm9wZXJ0eSA9ICdjb2xvcicsXG4gICAgc2V0Q29sb3JVSVxuICB9OiBMYXllckNvbG9yU2VsZWN0b3JQcm9wcykgPT4ge1xuICAgIGNvbnN0IG9uU2V0Q29sb3JVSSA9IHVzZUNhbGxiYWNrKG5ld0NvbmZpZyA9PiBzZXRDb2xvclVJKHByb3BlcnR5LCBuZXdDb25maWcpLCBbXG4gICAgICBzZXRDb2xvclVJLFxuICAgICAgcHJvcGVydHlcbiAgICBdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U2lkZVBhbmVsU2VjdGlvbj5cbiAgICAgICAgPENvbG9yU2VsZWN0b3JcbiAgICAgICAgICBjb2xvclNldHM9e1tcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRDb2xvcjogc2VsZWN0ZWRDb2xvciB8fCBsYXllci5jb25maWcuY29sb3IsXG4gICAgICAgICAgICAgIHNldENvbG9yOiAocmdiVmFsdWU6IFJHQkNvbG9yKSA9PiBvbkNoYW5nZSh7W3Byb3BlcnR5XTogcmdiVmFsdWV9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF19XG4gICAgICAgICAgY29sb3JVST17bGF5ZXIuY29uZmlnLmNvbG9yVUlbcHJvcGVydHldfVxuICAgICAgICAgIHNldENvbG9yVUk9e29uU2V0Q29sb3JVSX1cbiAgICAgICAgLz5cbiAgICAgIDwvU2lkZVBhbmVsU2VjdGlvbj5cbiAgICApO1xuICB9O1xuICByZXR1cm4gTGF5ZXJDb2xvclNlbGVjdG9yO1xufVxuXG5MYXllckNvbG9yUmFuZ2VTZWxlY3RvckZhY3RvcnkuZGVwcyA9IFtDb2xvclNlbGVjdG9yRmFjdG9yeV07XG5leHBvcnQgZnVuY3Rpb24gTGF5ZXJDb2xvclJhbmdlU2VsZWN0b3JGYWN0b3J5KENvbG9yU2VsZWN0b3IpIHtcbiAgY29uc3QgTGF5ZXJDb2xvclJhbmdlU2VsZWN0b3IgPSAoe1xuICAgIGxheWVyLFxuICAgIG9uQ2hhbmdlLFxuICAgIHByb3BlcnR5ID0gJ2NvbG9yUmFuZ2UnLFxuICAgIHNldENvbG9yVUlcbiAgfTogTGF5ZXJDb2xvclJhbmdlU2VsZWN0b3JQcm9wcykgPT4ge1xuICAgIGNvbnN0IG9uU2V0Q29sb3JVSSA9IHVzZUNhbGxiYWNrKG5ld0NvbmZpZyA9PiBzZXRDb2xvclVJKHByb3BlcnR5LCBuZXdDb25maWcpLCBbXG4gICAgICBzZXRDb2xvclVJLFxuICAgICAgcHJvcGVydHlcbiAgICBdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U2lkZVBhbmVsU2VjdGlvbj5cbiAgICAgICAgPENvbG9yU2VsZWN0b3JcbiAgICAgICAgICBjb2xvclNldHM9e1tcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRDb2xvcjogbGF5ZXIuY29uZmlnLnZpc0NvbmZpZ1twcm9wZXJ0eV0sXG4gICAgICAgICAgICAgIGlzUmFuZ2U6IHRydWUsXG4gICAgICAgICAgICAgIHNldENvbG9yOiAoY29sb3JSYW5nZTogQ29sb3JSYW5nZSkgPT4gb25DaGFuZ2Uoe1twcm9wZXJ0eV06IGNvbG9yUmFuZ2V9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF19XG4gICAgICAgICAgY29sb3JVST17bGF5ZXIuY29uZmlnLmNvbG9yVUlbcHJvcGVydHldfVxuICAgICAgICAgIHNldENvbG9yVUk9e29uU2V0Q29sb3JVSX1cbiAgICAgICAgLz5cbiAgICAgIDwvU2lkZVBhbmVsU2VjdGlvbj5cbiAgICApO1xuICB9O1xuICByZXR1cm4gTGF5ZXJDb2xvclJhbmdlU2VsZWN0b3I7XG59XG5cbkFyY0xheWVyQ29sb3JTZWxlY3RvckZhY3RvcnkuZGVwcyA9IFtDb2xvclNlbGVjdG9yRmFjdG9yeV07XG5leHBvcnQgZnVuY3Rpb24gQXJjTGF5ZXJDb2xvclNlbGVjdG9yRmFjdG9yeShDb2xvclNlbGVjdG9yKSB7XG4gIGNvbnN0IEFyY0xheWVyQ29sb3JTZWxlY3RvciA9ICh7XG4gICAgbGF5ZXIsXG4gICAgb25DaGFuZ2VDb25maWcsXG4gICAgb25DaGFuZ2VWaXNDb25maWcsXG4gICAgcHJvcGVydHkgPSAnY29sb3InLFxuICAgIHNldENvbG9yVUlcbiAgfTogQXJjTGF5ZXJDb2xvclNlbGVjdG9yUHJvcHMpID0+IHtcbiAgICBjb25zdCBvblNldENvbG9yVUkgPSB1c2VDYWxsYmFjayhuZXdDb25maWcgPT4gc2V0Q29sb3JVSShwcm9wZXJ0eSwgbmV3Q29uZmlnKSwgW1xuICAgICAgc2V0Q29sb3JVSSxcbiAgICAgIHByb3BlcnR5XG4gICAgXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgIDxDb2xvclNlbGVjdG9yXG4gICAgICAgICAgY29sb3JTZXRzPXtbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3I6IGxheWVyLmNvbmZpZy5jb2xvcixcbiAgICAgICAgICAgICAgc2V0Q29sb3I6IChyZ2JWYWx1ZTogUkdCQ29sb3IpID0+IG9uQ2hhbmdlQ29uZmlnKHtjb2xvcjogcmdiVmFsdWV9KSxcbiAgICAgICAgICAgICAgbGFiZWw6ICdTb3VyY2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzZWxlY3RlZENvbG9yOiBsYXllci5jb25maWcudmlzQ29uZmlnLnRhcmdldENvbG9yIHx8IGxheWVyLmNvbmZpZy5jb2xvcixcbiAgICAgICAgICAgICAgc2V0Q29sb3I6IChyZ2JWYWx1ZTogUkdCQ29sb3IpID0+IG9uQ2hhbmdlVmlzQ29uZmlnKHt0YXJnZXRDb2xvcjogcmdiVmFsdWV9KSxcbiAgICAgICAgICAgICAgbGFiZWw6ICdUYXJnZXQnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXX1cbiAgICAgICAgICBjb2xvclVJPXtsYXllci5jb25maWcuY29sb3JVSVtwcm9wZXJ0eV19XG4gICAgICAgICAgc2V0Q29sb3JVST17b25TZXRDb2xvclVJfVxuICAgICAgICAvPlxuICAgICAgPC9TaWRlUGFuZWxTZWN0aW9uPlxuICAgICk7XG4gIH07XG4gIHJldHVybiBBcmNMYXllckNvbG9yU2VsZWN0b3I7XG59XG4iXX0=
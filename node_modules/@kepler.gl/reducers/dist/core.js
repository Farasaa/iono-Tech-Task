"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.providerStateLens = exports.uiStateLens = exports.visStateLens = exports.mapStyleLens = exports.mapStateLens = exports["default"] = exports.coreReducerFactory = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _redux = require("redux");

var _visState = require("./vis-state");

var _mapState = require("./map-state");

var _mapStyle = require("./map-style");

var _uiState = require("./ui-state");

var _providerState = require("./provider-state");

var _composers = _interopRequireDefault(require("./composers"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var combined = function combined() {
  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var extraReducers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return (0, _redux.combineReducers)(_objectSpread({
    visState: (0, _visState.visStateReducerFactory)(initialState.visState),
    mapState: (0, _mapState.mapStateReducerFactory)(initialState.mapState),
    mapStyle: (0, _mapStyle.mapStyleReducerFactory)(initialState.mapStyle),
    uiState: (0, _uiState.uiStateReducerFactory)(initialState.uiState),
    providerState: (0, _providerState.providerStateReducerFactory)(initialState.providerState)
  }, extraReducers));
};

var coreReducerFactory = function coreReducerFactory() {
  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var extraReducers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return function (state, action) {
    if (_composers["default"][action.type]) {
      return _composers["default"][action.type](state, action);
    }

    return combined(initialState, extraReducers)(state, action);
  };
};

exports.coreReducerFactory = coreReducerFactory;

var _default = coreReducerFactory();
/**
 * Connect subreducer `mapState`, used with `injectComponents`. Learn more at
 * [Replace UI Component](../advanced-usages/replace-ui-component.md#pass-custom-component-props)
 *
 * @param {*} reduxState
 * @public
 */


exports["default"] = _default;

var mapStateLens = function mapStateLens(reduxState) {
  return {
    mapState: reduxState.mapState
  };
};
/**
 * Connect subreducer `mapStyle`, used with `injectComponents`. Learn more at
 * [Replace UI Component](../advanced-usages/replace-ui-component.md#pass-custom-component-props)
 *
 * @param {*} reduxState
 * @public
 */


exports.mapStateLens = mapStateLens;

var mapStyleLens = function mapStyleLens(reduxState) {
  return {
    mapStyle: reduxState.mapStyle
  };
};
/**
 * Connect subreducer `visState`, used with `injectComponents`. Learn more at
 * [Replace UI Component](../advanced-usages/replace-ui-component.md#pass-custom-component-props)
 *
 * @param {*} reduxState
 * @public
 */


exports.mapStyleLens = mapStyleLens;

var visStateLens = function visStateLens(reduxState) {
  return {
    visState: reduxState.visState
  };
};
/**
 * Connect subreducer `uiState`, used with `injectComponents`. Learn more at
 * [Replace UI Component](../advanced-usages/replace-ui-component.md#pass-custom-component-props)
 *
 * @param {*} reduxState
 * @public
 */


exports.visStateLens = visStateLens;

var uiStateLens = function uiStateLens(reduxState) {
  return {
    uiState: reduxState.uiState
  };
};
/**
 * Connect subreducer `providerState`, used with `injectComponents`. Learn more at
 * [Replace UI Component](../advanced-usages/replace-ui-component.md#pass-custom-component-props)
 *
 * @param {*} reduxState
 * @public
 */


exports.uiStateLens = uiStateLens;

var providerStateLens = function providerStateLens(reduxState) {
  return {
    providerState: reduxState.providerState
  };
};

exports.providerStateLens = providerStateLens;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb3JlLnRzIl0sIm5hbWVzIjpbImNvbWJpbmVkIiwiaW5pdGlhbFN0YXRlIiwiZXh0cmFSZWR1Y2VycyIsInZpc1N0YXRlIiwibWFwU3RhdGUiLCJtYXBTdHlsZSIsInVpU3RhdGUiLCJwcm92aWRlclN0YXRlIiwiY29yZVJlZHVjZXJGYWN0b3J5Iiwic3RhdGUiLCJhY3Rpb24iLCJjb21wb3NlcnMiLCJ0eXBlIiwibWFwU3RhdGVMZW5zIiwicmVkdXhTdGF0ZSIsIm1hcFN0eWxlTGVucyIsInZpc1N0YXRlTGVucyIsInVpU3RhdGVMZW5zIiwicHJvdmlkZXJTdGF0ZUxlbnMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7OztBQWVBLElBQU1BLFFBQVEsR0FBRyxTQUFYQSxRQUFXLEdBR1o7QUFBQSxNQUZIQyxZQUVHLHVFQUZvQyxFQUVwQztBQUFBLE1BREhDLGFBQ0csdUVBRHFDLEVBQ3JDO0FBQ0gsU0FBTztBQUNMQyxJQUFBQSxRQUFRLEVBQUUsc0NBQXVCRixZQUFZLENBQUNFLFFBQXBDLENBREw7QUFFTEMsSUFBQUEsUUFBUSxFQUFFLHNDQUF1QkgsWUFBWSxDQUFDRyxRQUFwQyxDQUZMO0FBR0xDLElBQUFBLFFBQVEsRUFBRSxzQ0FBdUJKLFlBQVksQ0FBQ0ksUUFBcEMsQ0FITDtBQUlMQyxJQUFBQSxPQUFPLEVBQUUsb0NBQXNCTCxZQUFZLENBQUNLLE9BQW5DLENBSko7QUFLTEMsSUFBQUEsYUFBYSxFQUFFLGdEQUE0Qk4sWUFBWSxDQUFDTSxhQUF6QztBQUxWLEtBTUZMLGFBTkUsRUFBUDtBQVFELENBWkQ7O0FBY08sSUFBTU0sa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFxQjtBQUFBLE1BQ2hDUCxZQURnQyx1RUFDTyxFQURQO0FBQUEsTUFFaENDLGFBRmdDLHVFQUVoQixFQUZnQjtBQUFBLFNBRzdCLFVBQUNPLEtBQUQsRUFBUUMsTUFBUixFQUFtQjtBQUN0QixRQUFJQyxzQkFBVUQsTUFBTSxDQUFDRSxJQUFqQixDQUFKLEVBQTRCO0FBQzFCLGFBQU9ELHNCQUFVRCxNQUFNLENBQUNFLElBQWpCLEVBQXVCSCxLQUF2QixFQUE4QkMsTUFBOUIsQ0FBUDtBQUNEOztBQUNELFdBQU9WLFFBQVEsQ0FBQ0MsWUFBRCxFQUFlQyxhQUFmLENBQVIsQ0FBc0NPLEtBQXRDLEVBQTZDQyxNQUE3QyxDQUFQO0FBQ0QsR0FSaUM7QUFBQSxDQUEzQjs7OztlQVVRRixrQkFBa0IsRTtBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDTyxJQUFNSyxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFDQyxVQUFEO0FBQUEsU0FBZ0M7QUFBQ1YsSUFBQUEsUUFBUSxFQUFFVSxVQUFVLENBQUNWO0FBQXRCLEdBQWhDO0FBQUEsQ0FBckI7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDTyxJQUFNVyxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFDRCxVQUFEO0FBQUEsU0FBZ0M7QUFBQ1QsSUFBQUEsUUFBUSxFQUFFUyxVQUFVLENBQUNUO0FBQXRCLEdBQWhDO0FBQUEsQ0FBckI7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDTyxJQUFNVyxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFDRixVQUFEO0FBQUEsU0FBZ0M7QUFBQ1gsSUFBQUEsUUFBUSxFQUFFVyxVQUFVLENBQUNYO0FBQXRCLEdBQWhDO0FBQUEsQ0FBckI7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDTyxJQUFNYyxXQUFXLEdBQUcsU0FBZEEsV0FBYyxDQUFDSCxVQUFEO0FBQUEsU0FBZ0M7QUFBQ1IsSUFBQUEsT0FBTyxFQUFFUSxVQUFVLENBQUNSO0FBQXJCLEdBQWhDO0FBQUEsQ0FBcEI7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDTyxJQUFNWSxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQW9CLENBQUNKLFVBQUQ7QUFBQSxTQUFnQztBQUMvRFAsSUFBQUEsYUFBYSxFQUFFTyxVQUFVLENBQUNQO0FBRHFDLEdBQWhDO0FBQUEsQ0FBMUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQge2NvbWJpbmVSZWR1Y2Vyc30gZnJvbSAncmVkdXgnO1xuXG5pbXBvcnQge3Zpc1N0YXRlUmVkdWNlckZhY3Rvcnl9IGZyb20gJy4vdmlzLXN0YXRlJztcbmltcG9ydCB7bWFwU3RhdGVSZWR1Y2VyRmFjdG9yeX0gZnJvbSAnLi9tYXAtc3RhdGUnO1xuaW1wb3J0IHttYXBTdHlsZVJlZHVjZXJGYWN0b3J5fSBmcm9tICcuL21hcC1zdHlsZSc7XG5pbXBvcnQge3VpU3RhdGVSZWR1Y2VyRmFjdG9yeX0gZnJvbSAnLi91aS1zdGF0ZSc7XG5pbXBvcnQge3Byb3ZpZGVyU3RhdGVSZWR1Y2VyRmFjdG9yeX0gZnJvbSAnLi9wcm92aWRlci1zdGF0ZSc7XG5cbmltcG9ydCBjb21wb3NlcnMgZnJvbSAnLi9jb21wb3NlcnMnO1xuXG5pbXBvcnQge1Zpc1N0YXRlfSBmcm9tICdAa2VwbGVyLmdsL3NjaGVtYXMnO1xuaW1wb3J0IHtNYXBTdGF0ZSwgVWlTdGF0ZX0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge01hcFN0eWxlfSBmcm9tICcuL21hcC1zdHlsZS11cGRhdGVycyc7XG5pbXBvcnQge1Byb3ZpZGVyU3RhdGV9IGZyb20gJy4vcHJvdmlkZXItc3RhdGUtdXBkYXRlcnMnO1xuXG5leHBvcnQgdHlwZSBLZXBsZXJHbFN0YXRlID0ge1xuICB2aXNTdGF0ZTogVmlzU3RhdGU7XG4gIG1hcFN0YXRlOiBNYXBTdGF0ZTtcbiAgbWFwU3R5bGU6IE1hcFN0eWxlO1xuICB1aVN0YXRlOiBVaVN0YXRlO1xuICBwcm92aWRlclN0YXRlOiBQcm92aWRlclN0YXRlO1xufTtcblxuY29uc3QgY29tYmluZWQgPSAoXG4gIGluaXRpYWxTdGF0ZTogUGFydGlhbDxLZXBsZXJHbFN0YXRlPiA9IHt9LFxuICBleHRyYVJlZHVjZXJzOiB7W3g6IHN0cmluZ106IHVua25vd259ID0ge31cbikgPT4ge1xuICByZXR1cm4gY29tYmluZVJlZHVjZXJzKHtcbiAgICB2aXNTdGF0ZTogdmlzU3RhdGVSZWR1Y2VyRmFjdG9yeShpbml0aWFsU3RhdGUudmlzU3RhdGUpLFxuICAgIG1hcFN0YXRlOiBtYXBTdGF0ZVJlZHVjZXJGYWN0b3J5KGluaXRpYWxTdGF0ZS5tYXBTdGF0ZSksXG4gICAgbWFwU3R5bGU6IG1hcFN0eWxlUmVkdWNlckZhY3RvcnkoaW5pdGlhbFN0YXRlLm1hcFN0eWxlKSxcbiAgICB1aVN0YXRlOiB1aVN0YXRlUmVkdWNlckZhY3RvcnkoaW5pdGlhbFN0YXRlLnVpU3RhdGUpLFxuICAgIHByb3ZpZGVyU3RhdGU6IHByb3ZpZGVyU3RhdGVSZWR1Y2VyRmFjdG9yeShpbml0aWFsU3RhdGUucHJvdmlkZXJTdGF0ZSksXG4gICAgLi4uZXh0cmFSZWR1Y2Vyc1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb3JlUmVkdWNlckZhY3RvcnkgPSAoXG4gIGluaXRpYWxTdGF0ZTogUGFydGlhbDxLZXBsZXJHbFN0YXRlPiA9IHt9LFxuICBleHRyYVJlZHVjZXJzID0ge31cbikgPT4gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgaWYgKGNvbXBvc2Vyc1thY3Rpb24udHlwZV0pIHtcbiAgICByZXR1cm4gY29tcG9zZXJzW2FjdGlvbi50eXBlXShzdGF0ZSwgYWN0aW9uKTtcbiAgfVxuICByZXR1cm4gY29tYmluZWQoaW5pdGlhbFN0YXRlLCBleHRyYVJlZHVjZXJzKShzdGF0ZSwgYWN0aW9uKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvcmVSZWR1Y2VyRmFjdG9yeSgpO1xuXG4vKipcbiAqIENvbm5lY3Qgc3VicmVkdWNlciBgbWFwU3RhdGVgLCB1c2VkIHdpdGggYGluamVjdENvbXBvbmVudHNgLiBMZWFybiBtb3JlIGF0XG4gKiBbUmVwbGFjZSBVSSBDb21wb25lbnRdKC4uL2FkdmFuY2VkLXVzYWdlcy9yZXBsYWNlLXVpLWNvbXBvbmVudC5tZCNwYXNzLWN1c3RvbS1jb21wb25lbnQtcHJvcHMpXG4gKlxuICogQHBhcmFtIHsqfSByZWR1eFN0YXRlXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBtYXBTdGF0ZUxlbnMgPSAocmVkdXhTdGF0ZTogS2VwbGVyR2xTdGF0ZSkgPT4gKHttYXBTdGF0ZTogcmVkdXhTdGF0ZS5tYXBTdGF0ZX0pO1xuXG4vKipcbiAqIENvbm5lY3Qgc3VicmVkdWNlciBgbWFwU3R5bGVgLCB1c2VkIHdpdGggYGluamVjdENvbXBvbmVudHNgLiBMZWFybiBtb3JlIGF0XG4gKiBbUmVwbGFjZSBVSSBDb21wb25lbnRdKC4uL2FkdmFuY2VkLXVzYWdlcy9yZXBsYWNlLXVpLWNvbXBvbmVudC5tZCNwYXNzLWN1c3RvbS1jb21wb25lbnQtcHJvcHMpXG4gKlxuICogQHBhcmFtIHsqfSByZWR1eFN0YXRlXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBtYXBTdHlsZUxlbnMgPSAocmVkdXhTdGF0ZTogS2VwbGVyR2xTdGF0ZSkgPT4gKHttYXBTdHlsZTogcmVkdXhTdGF0ZS5tYXBTdHlsZX0pO1xuXG4vKipcbiAqIENvbm5lY3Qgc3VicmVkdWNlciBgdmlzU3RhdGVgLCB1c2VkIHdpdGggYGluamVjdENvbXBvbmVudHNgLiBMZWFybiBtb3JlIGF0XG4gKiBbUmVwbGFjZSBVSSBDb21wb25lbnRdKC4uL2FkdmFuY2VkLXVzYWdlcy9yZXBsYWNlLXVpLWNvbXBvbmVudC5tZCNwYXNzLWN1c3RvbS1jb21wb25lbnQtcHJvcHMpXG4gKlxuICogQHBhcmFtIHsqfSByZWR1eFN0YXRlXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCB2aXNTdGF0ZUxlbnMgPSAocmVkdXhTdGF0ZTogS2VwbGVyR2xTdGF0ZSkgPT4gKHt2aXNTdGF0ZTogcmVkdXhTdGF0ZS52aXNTdGF0ZX0pO1xuXG4vKipcbiAqIENvbm5lY3Qgc3VicmVkdWNlciBgdWlTdGF0ZWAsIHVzZWQgd2l0aCBgaW5qZWN0Q29tcG9uZW50c2AuIExlYXJuIG1vcmUgYXRcbiAqIFtSZXBsYWNlIFVJIENvbXBvbmVudF0oLi4vYWR2YW5jZWQtdXNhZ2VzL3JlcGxhY2UtdWktY29tcG9uZW50Lm1kI3Bhc3MtY3VzdG9tLWNvbXBvbmVudC1wcm9wcylcbiAqXG4gKiBAcGFyYW0geyp9IHJlZHV4U3RhdGVcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHVpU3RhdGVMZW5zID0gKHJlZHV4U3RhdGU6IEtlcGxlckdsU3RhdGUpID0+ICh7dWlTdGF0ZTogcmVkdXhTdGF0ZS51aVN0YXRlfSk7XG5cbi8qKlxuICogQ29ubmVjdCBzdWJyZWR1Y2VyIGBwcm92aWRlclN0YXRlYCwgdXNlZCB3aXRoIGBpbmplY3RDb21wb25lbnRzYC4gTGVhcm4gbW9yZSBhdFxuICogW1JlcGxhY2UgVUkgQ29tcG9uZW50XSguLi9hZHZhbmNlZC11c2FnZXMvcmVwbGFjZS11aS1jb21wb25lbnQubWQjcGFzcy1jdXN0b20tY29tcG9uZW50LXByb3BzKVxuICpcbiAqIEBwYXJhbSB7Kn0gcmVkdXhTdGF0ZVxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcHJvdmlkZXJTdGF0ZUxlbnMgPSAocmVkdXhTdGF0ZTogS2VwbGVyR2xTdGF0ZSkgPT4gKHtcbiAgcHJvdmlkZXJTdGF0ZTogcmVkdXhTdGF0ZS5wcm92aWRlclN0YXRlXG59KTtcbiJdfQ==
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";
import FrameEncoder from '../frame-encoder';
export default class PreviewEncoder extends FrameEncoder {
  constructor() {
    super(...arguments);

    _defineProperty(this, "af", void 0);
  }

  start() {
    if (this.af) {
      cancelAnimationFrame(this.af);
    }
  }

  async add(canvas) {
    const animationFrame = new Promise(resolve => {
      if (this.af) {
        cancelAnimationFrame(this.af);
      }

      this.af = requestAnimationFrame(resolve);
    });
    return animationFrame;
  }

  async save() {
    if (this.af) {
      cancelAnimationFrame(this.af);
    }

    await Promise.resolve();
  }

}
//# sourceMappingURL=preview-encoder.js.map
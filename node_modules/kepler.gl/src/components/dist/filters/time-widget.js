"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _styledComponents2 = require("../common/styled-components");

var _timeRangeSlider = _interopRequireDefault(require("../common/time-range-slider"));

var _floatingTimeDisplay = _interopRequireDefault(require("../common/animation-control/floating-time-display"));

var _timeRangeFilter = require("./time-range-filter");

var _timeWidgetTop = _interopRequireDefault(require("./time-widget-top"));

var _templateObject;

var TimeBottomWidgetInner = (0, _styledComponents["default"])(_styledComponents2.BottomWidgetInner)(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 6px 32px 24px 32px;\n"])));
TimeWidgetFactory.deps = [_timeRangeSlider["default"], _floatingTimeDisplay["default"], _timeWidgetTop["default"]];

function TimeWidgetFactory(TimeRangeSlider, FloatingTimeDisplay, TimeWidgetTop) {
  var TimeWidget = function TimeWidget(_ref) {
    var datasets = _ref.datasets,
        filter = _ref.filter,
        index = _ref.index,
        readOnly = _ref.readOnly,
        showTimeDisplay = _ref.showTimeDisplay,
        setFilterAnimationTime = _ref.setFilterAnimationTime,
        onClose = _ref.onClose,
        resetAnimation = _ref.resetAnimation,
        isAnimatable = _ref.isAnimatable,
        updateAnimationSpeed = _ref.updateAnimationSpeed,
        toggleAnimation = _ref.toggleAnimation,
        setFilterPlot = _ref.setFilterPlot,
        setFilterAnimationWindow = _ref.setFilterAnimationWindow,
        timeline = _ref.timeline;

    var _useState = (0, _react.useState)(false),
        _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
        isMinified = _useState2[0],
        setMinified = _useState2[1];

    var _updateAnimationSpeed = (0, _react.useCallback)(function (speed) {
      return updateAnimationSpeed(index, speed);
    }, [updateAnimationSpeed, index]);

    var _toggleAnimation = (0, _react.useCallback)(function () {
      return toggleAnimation(index);
    }, [toggleAnimation, index]);

    var _onToggleMinify = (0, _react.useCallback)(function () {
      return setMinified(!isMinified);
    }, [setMinified, isMinified]);

    var _setFilterAnimationWindow = (0, _react.useCallback)(function (animationWindow) {
      return setFilterAnimationWindow({
        id: filter.id,
        animationWindow: animationWindow
      });
    }, [setFilterAnimationWindow, filter.id]);

    var timeSliderOnChange = (0, _react.useCallback)(function (value) {
      return setFilterAnimationTime(index, 'value', value);
    }, [setFilterAnimationTime, index]);
    return /*#__PURE__*/_react["default"].createElement(TimeBottomWidgetInner, {
      className: "bottom-widget--inner"
    }, /*#__PURE__*/_react["default"].createElement(TimeWidgetTop, {
      filter: filter,
      readOnly: readOnly,
      datasets: datasets,
      setFilterPlot: setFilterPlot,
      index: index,
      onClose: onClose,
      onToggleMinify: _onToggleMinify,
      isMinified: isMinified
    }), /*#__PURE__*/_react["default"].createElement(TimeRangeSlider, (0, _extends2["default"])({}, (0, _timeRangeFilter.timeRangeSliderFieldsSelector)(filter), {
      onChange: timeSliderOnChange,
      toggleAnimation: _toggleAnimation,
      updateAnimationSpeed: _updateAnimationSpeed,
      setFilterAnimationWindow: _setFilterAnimationWindow,
      hideTimeTitle: showTimeDisplay,
      resetAnimation: resetAnimation,
      isAnimatable: isAnimatable,
      isMinified: isMinified,
      timeline: timeline
    })), showTimeDisplay ? /*#__PURE__*/_react["default"].createElement(FloatingTimeDisplay, {
      currentTime: filter.value,
      defaultTimeFormat: filter.defaultTimeFormat,
      timeFormat: filter.timeFormat,
      timezone: filter.timezone
    }) : null);
  };

  return /*#__PURE__*/_react["default"].memo(TimeWidget);
}

var _default = TimeWidgetFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9maWx0ZXJzL3RpbWUtd2lkZ2V0LnRzeCJdLCJuYW1lcyI6WyJUaW1lQm90dG9tV2lkZ2V0SW5uZXIiLCJCb3R0b21XaWRnZXRJbm5lciIsIlRpbWVXaWRnZXRGYWN0b3J5IiwiZGVwcyIsIlRpbWVSYW5nZVNsaWRlckZhY3RvcnkiLCJGbG9hdGluZ1RpbWVEaXNwbGF5RmFjdG9yeSIsIlRpbWVXaWRnZXRUb3BGYWN0b3J5IiwiVGltZVJhbmdlU2xpZGVyIiwiRmxvYXRpbmdUaW1lRGlzcGxheSIsIlRpbWVXaWRnZXRUb3AiLCJUaW1lV2lkZ2V0IiwiZGF0YXNldHMiLCJmaWx0ZXIiLCJpbmRleCIsInJlYWRPbmx5Iiwic2hvd1RpbWVEaXNwbGF5Iiwic2V0RmlsdGVyQW5pbWF0aW9uVGltZSIsIm9uQ2xvc2UiLCJyZXNldEFuaW1hdGlvbiIsImlzQW5pbWF0YWJsZSIsInVwZGF0ZUFuaW1hdGlvblNwZWVkIiwidG9nZ2xlQW5pbWF0aW9uIiwic2V0RmlsdGVyUGxvdCIsInNldEZpbHRlckFuaW1hdGlvbldpbmRvdyIsInRpbWVsaW5lIiwiaXNNaW5pZmllZCIsInNldE1pbmlmaWVkIiwiX3VwZGF0ZUFuaW1hdGlvblNwZWVkIiwic3BlZWQiLCJfdG9nZ2xlQW5pbWF0aW9uIiwiX29uVG9nZ2xlTWluaWZ5IiwiX3NldEZpbHRlckFuaW1hdGlvbldpbmRvdyIsImFuaW1hdGlvbldpbmRvdyIsImlkIiwidGltZVNsaWRlck9uQ2hhbmdlIiwidmFsdWUiLCJkZWZhdWx0VGltZUZvcm1hdCIsInRpbWVGb3JtYXQiLCJ0aW1lem9uZSIsIlJlYWN0IiwibWVtbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7OztBQUVBLElBQU1BLHFCQUFxQixHQUFHLGtDQUFPQyxvQ0FBUCxDQUFILHdIQUEzQjtBQUlBQyxpQkFBaUIsQ0FBQ0MsSUFBbEIsR0FBeUIsQ0FBQ0Ms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QUFLRSxNQUFBLHdCQUF3QixFQUFFSSx5QkFMNUI7QUFNRSxNQUFBLGFBQWEsRUFBRWhCLGVBTmpCO0FBT0UsTUFBQSxjQUFjLEVBQUVHLGNBUGxCO0FBUUUsTUFBQSxZQUFZLEVBQUVDLFlBUmhCO0FBU0UsTUFBQSxVQUFVLEVBQUVNLFVBVGQ7QUFVRSxNQUFBLFFBQVEsRUFBRUQ7QUFWWixPQWJGLEVBeUJHVCxlQUFlLGdCQUNkLGdDQUFDLG1CQUFEO0FBQ0UsTUFBQSxXQUFXLEVBQUVILE1BQU0sQ0FBQ3VCLEtBRHRCO0FBRUUsTUFBQSxpQkFBaUIsRUFBRXZCLE1BQU0sQ0FBQ3dCLGlCQUY1QjtBQUdFLE1BQUEsVUFBVSxFQUFFeEIsTUFBTSxDQUFDeUIsVUFIckI7QUFJRSxNQUFBLFFBQVEsRUFBRXpCLE1BQU0sQ0FBQzBCO0FBSm5CLE1BRGMsR0FPWixJQWhDTixDQURGO0FBb0NELEdBekVEOztBQTJFQSxzQkFBT0Msa0JBQU1DLElBQU4sQ0FBVzlCLFVBQVgsQ0FBUDtBQUNEOztlQUVjUixpQiIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge0JvdHRvbVdpZGdldElubmVyfSBmcm9tICcuLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IFRpbWVSYW5nZVNsaWRlckZhY3RvcnkgZnJvbSAnLi4vY29tbW9uL3RpbWUtcmFuZ2Utc2xpZGVyJztcbmltcG9ydCBGbG9hdGluZ1RpbWVEaXNwbGF5RmFjdG9yeSBmcm9tICcuLi9jb21tb24vYW5pbWF0aW9uLWNvbnRyb2wvZmxvYXRpbmctdGltZS1kaXNwbGF5JztcbmltcG9ydCB7dGltZVJhbmdlU2xpZGVyRmllbGRzU2VsZWN0b3J9IGZyb20gJy4vdGltZS1yYW5nZS1maWx0ZXInO1xuaW1wb3J0IHtUaW1lV2lkZ2V0UHJvcHN9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IFRpbWVXaWRnZXRUb3BGYWN0b3J5IGZyb20gJy4vdGltZS13aWRnZXQtdG9wJztcblxuY29uc3QgVGltZUJvdHRvbVdpZGdldElubmVyID0gc3R5bGVkKEJvdHRvbVdpZGdldElubmVyKWBcbiAgcGFkZGluZzogNnB4IDMycHggMjRweCAzMnB4O1xuYDtcblxuVGltZVdpZGdldEZhY3RvcnkuZGVwcyA9IFtUaW1lUmFuZ2VTbGlkZXJGYWN0b3J5LCBGbG9hdGluZ1RpbWVEaXNwbGF5RmFjdG9yeSwgVGltZVdpZGdldFRvcEZhY3RvcnldO1xuXG5mdW5jdGlvbiBUaW1lV2lkZ2V0RmFjdG9yeShcbiAgVGltZVJhbmdlU2xpZGVyOiBSZXR1cm5UeXBlPHR5cGVvZiBUaW1lUmFuZ2VTbGlkZXJGYWN0b3J5PixcbiAgRmxvYXRpbmdUaW1lRGlzcGxheTogUmV0dXJuVHlwZTx0eXBlb2YgRmxvYXRpbmdUaW1lRGlzcGxheUZhY3Rvcnk+LFxuICBUaW1lV2lkZ2V0VG9wOiBSZXR1cm5UeXBlPHR5cGVvZiBUaW1lV2lkZ2V0VG9wRmFjdG9yeT5cbikge1xuICBjb25zdCBUaW1lV2lkZ2V0OiBSZWFjdC5GQzxUaW1lV2lkZ2V0UHJvcHM+ID0gKHtcbiAgICBkYXRhc2V0cyxcbiAgICBmaWx0ZXIsXG4gICAgaW5kZXgsXG4gICAgcmVhZE9ubHksXG4gICAgc2hvd1RpbWVEaXNwbGF5LFxuICAgIHNldEZpbHRlckFuaW1hdGlvblRpbWUsXG4gICAgb25DbG9zZSxcbiAgICByZXNldEFuaW1hdGlvbixcbiAgICBpc0FuaW1hdGFibGUsXG4gICAgdXBkYXRlQW5pbWF0aW9uU3BlZWQsXG4gICAgdG9nZ2xlQW5pbWF0aW9uLFxuICAgIHNldEZpbHRlclBsb3QsXG4gICAgc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93LFxuICAgIHRpbWVsaW5lXG4gIH06IFRpbWVXaWRnZXRQcm9wcykgPT4ge1xuICAgIGNvbnN0IFtpc01pbmlmaWVkLCBzZXRNaW5pZmllZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBjb25zdCBfdXBkYXRlQW5pbWF0aW9uU3BlZWQgPSB1c2VDYWxsYmFjayhzcGVlZCA9PiB1cGRhdGVBbmltYXRpb25TcGVlZChpbmRleCwgc3BlZWQpLCBbXG4gICAgICB1cGRhdGVBbmltYXRpb25TcGVlZCxcbiAgICAgIGluZGV4XG4gICAgXSk7XG5cbiAgICBjb25zdCBfdG9nZ2xlQW5pbWF0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4gdG9nZ2xlQW5pbWF0aW9uKGluZGV4KSwgW3RvZ2dsZUFuaW1hdGlvbiwgaW5kZXhdKTtcblxuICAgIGNvbnN0IF9vblRvZ2dsZU1pbmlmeSA9IHVzZUNhbGxiYWNrKCgpID0+IHNldE1pbmlmaWVkKCFpc01pbmlmaWVkKSwgW3NldE1pbmlmaWVkLCBpc01pbmlmaWVkXSk7XG5cbiAgICBjb25zdCBfc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93ID0gdXNlQ2FsbGJhY2soXG4gICAgICBhbmltYXRpb25XaW5kb3cgPT4gc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93KHtpZDogZmlsdGVyLmlkLCBhbmltYXRpb25XaW5kb3d9KSxcbiAgICAgIFtzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3csIGZpbHRlci5pZF1cbiAgICApO1xuXG4gICAgY29uc3QgdGltZVNsaWRlck9uQ2hhbmdlID0gdXNlQ2FsbGJhY2sodmFsdWUgPT4gc2V0RmlsdGVyQW5pbWF0aW9uVGltZShpbmRleCwgJ3ZhbHVlJywgdmFsdWUpLCBbXG4gICAgICBzZXRGaWx0ZXJBbmltYXRpb25UaW1lLFxuICAgICAgaW5kZXhcbiAgICBdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VGltZUJvdHRvbVdpZGdldElubmVyIGNsYXNzTmFtZT1cImJvdHRvbS13aWRnZXQtLWlubmVyXCI+XG4gICAgICAgIDxUaW1lV2lkZ2V0VG9wXG4gICAgICAgICAgZmlsdGVyPXtmaWx0ZXJ9XG4gICAgICAgICAgcmVhZE9ubHk9e3JlYWRPbmx5fVxuICAgICAgICAgIGRhdGFzZXRzPXtkYXRhc2V0c31cbiAgICAgICAgICBzZXRGaWx0ZXJQbG90PXtzZXRGaWx0ZXJQbG90fVxuICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICBvbkNsb3NlPXtvbkNsb3NlfVxuICAgICAgICAgIG9uVG9nZ2xlTWluaWZ5PXtfb25Ub2dnbGVNaW5pZnl9XG4gICAgICAgICAgaXNNaW5pZmllZD17aXNNaW5pZmllZH1cbiAgICAgICAgLz5cbiAgICAgICAgey8qIE9uY2UgQW5pbWF0aW9uQ29udHJvbCBpcyBhYmxlIHRvIGRpc3BsYXkgbGFyZ2UgdGltZWxpbmUqL31cbiAgICAgICAgey8qIHdlIGNhbiByZXBsYWNlIFRpbWVSYW5nZVNsaWRlciB3aXRoIEFuaW1hdGlvbkNvbnRyb2wqL31cbiAgICAgICAgPFRpbWVSYW5nZVNsaWRlclxuICAgICAgICAgIHsuLi50aW1lUmFuZ2VTbGlkZXJGaWVsZHNTZWxlY3RvcihmaWx0ZXIpfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aW1lU2xpZGVyT25DaGFuZ2V9XG4gICAgICAgICAgdG9nZ2xlQW5pbWF0aW9uPXtfdG9nZ2xlQW5pbWF0aW9ufVxuICAgICAgICAgIHVwZGF0ZUFuaW1hdGlvblNwZWVkPXtfdXBkYXRlQW5pbWF0aW9uU3BlZWR9XG4gICAgICAgICAgc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93PXtfc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93fVxuICAgICAgICAgIGhpZGVUaW1lVGl0bGU9e3Nob3dUaW1lRGlzcGxheX1cbiAgICAgICAgICByZXNldEFuaW1hdGlvbj17cmVzZXRBbmltYXRpb259XG4gICAgICAgICAgaXNBbmltYXRhYmxlPXtpc0FuaW1hdGFibGV9XG4gICAgICAgICAgaXNNaW5pZmllZD17aXNNaW5pZmllZH1cbiAgICAgICAgICB0aW1lbGluZT17dGltZWxpbmV9XG4gICAgICAgIC8+XG4gICAgICAgIHtzaG93VGltZURpc3BsYXkgPyAoXG4gICAgICAgICAgPEZsb2F0aW5nVGltZURpc3BsYXlcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lPXtmaWx0ZXIudmFsdWV9XG4gICAgICAgICAgICBkZWZhdWx0VGltZUZvcm1hdD17ZmlsdGVyLmRlZmF1bHRUaW1lRm9ybWF0fVxuICAgICAgICAgICAgdGltZUZvcm1hdD17ZmlsdGVyLnRpbWVGb3JtYXR9XG4gICAgICAgICAgICB0aW1lem9uZT17ZmlsdGVyLnRpbWV6b25lfVxuICAgICAgICAgIC8+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9UaW1lQm90dG9tV2lkZ2V0SW5uZXI+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gUmVhY3QubWVtbyhUaW1lV2lkZ2V0KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGltZVdpZGdldEZhY3Rvcnk7XG4iXX0=
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireDefault(require("react"));

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _classnames = _interopRequireDefault(require("classnames"));

var _progressBar = _interopRequireDefault(require("../progress-bar"));

var _styledComponents2 = require("../styled-components");

var _utils = require("@kepler.gl/utils");

var _templateObject, _templateObject2, _templateObject3;

var StyledFileProgress = _styledComponents["default"].div.attrs(function (props) {
  return {
    className: (0, _classnames["default"])('file-upload__progress', props.className)
  };
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  color: ", ";\n  font-size: 12px;\n  margin-top: 12px;\n  border-image: initial;\n  padding: 8px 12px;\n\n  .top-row {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  .file-name {\n    font-weight: 500;\n  }\n  .middle-row {\n    margin-top: 6px;\n  }\n  .bottom-row {\n    margin-top: 6px;\n    text-align: start;\n  }\n"])), function (props) {
  return props.theme.textColorLT;
});

var StyledProgressWrapper = _styledComponents["default"].div.attrs({
  className: 'file-upload__progress__wrapper'
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 400px;\n"])));

var StyledContainer = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"])));

var formatPercent = function formatPercent(percent) {
  return "".concat(Math.floor(percent * 100), "%");
};

/**
 * @param {object} params
 * @param {string} params.message
 * @param {string} params.fileName
 * @param {number} params.percent
 * @param {any} params.error
 * @param {object} params.theme
 */
var UploadProgress = function UploadProgress(_ref) {
  var message = _ref.message,
      fileName = _ref.fileName,
      percent = _ref.percent,
      error = _ref.error,
      theme = _ref.theme;
  var percentStr = formatPercent(percent);
  var barColor = error ? theme.errorColor : theme.activeColorLT;
  return /*#__PURE__*/_react["default"].createElement(StyledFileProgress, {
    className: "file-upload-progress__message"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "top-row"
  }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.TruncatedTitleText, {
    className: "file-name",
    title: fileName
  }, fileName), /*#__PURE__*/_react["default"].createElement("div", {
    className: "percent"
  }, percentStr)), /*#__PURE__*/_react["default"].createElement("div", {
    className: "middle-row"
  }, /*#__PURE__*/_react["default"].createElement(_progressBar["default"], {
    percent: percentStr,
    barColor: barColor,
    isLoading: true,
    theme: theme
  })), /*#__PURE__*/_react["default"].createElement("div", {
    className: "bottom-row",
    style: {
      color: error ? theme.errorColor : theme.textColorLT
    }
  }, error ? (0, _utils.getError)(error) : message));
};

/** @type {React.FunctionComponent<FileUploadProgressProps>} */
var FileUploadProgress = function FileUploadProgress(_ref2) {
  var fileLoadingProgress = _ref2.fileLoadingProgress,
      theme = _ref2.theme;
  return /*#__PURE__*/_react["default"].createElement(StyledContainer, null, /*#__PURE__*/_react["default"].createElement(StyledProgressWrapper, null, Object.values(fileLoadingProgress).map(function (item) {
    return /*#__PURE__*/_react["default"].createElement(UploadProgress, (0, _extends2["default"])({}, item, {
      key: item.fileName,
      theme: theme
    }));
  })));
};

var _default = (0, _styledComponents.withTheme)(FileUploadProgress);

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vZmlsZS11cGxvYWRlci9maWxlLXVwbG9hZC1wcm9ncmVzcy50c3giXSwibmFtZXMiOlsiU3R5bGVkRmlsZVByb2dyZXNzIiwic3R5bGVkIiwiZGl2IiwiYXR0cnMiLCJwcm9wcyIsImNsYXNzTmFtZSIsInRoZW1lIiwidGV4dENvbG9yTFQiLCJTdHlsZWRQcm9ncmVzc1dyYXBwZXIiLCJTdHlsZWRDb250YWluZXIiLCJmb3JtYXRQZXJjZW50IiwicGVyY2VudCIsIk1hdGgiLCJmbG9vciIsIlVwbG9hZFByb2dyZXNzIiwibWVzc2FnZSIsImZpbGVOYW1lIiwiZXJyb3IiLCJwZXJjZW50U3RyIiwiYmFyQ29sb3IiLCJlcnJvckNvbG9yIiwiYWN0aXZlQ29sb3JMVCIsImNvbG9yIiwiRmlsZVVwbG9hZFByb2dyZXNzIiwiZmlsZUxvYWRpbmdQcm9ncmVzcyIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsIml0ZW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBR0EsSUFBTUEsa0JBQWtCLEdBQUdDLDZCQUFPQyxHQUFQLENBQVdDLEtBQVgsQ0FBaUIsVUFBQUMsS0FBSztBQUFBLFNBQUs7QUFDcERDLElBQUFBLFNBQVMsRUFBRSw0QkFBVyx1QkFBWCxFQUFvQ0QsS0FBSyxDQUFDQyxTQUExQztBQUR5QyxHQUFMO0FBQUEsQ0FBdEIsQ0FBSCw4YUFHYixVQUFBRCxLQUFLO0FBQUEsU0FBSUEsS0FBSyxDQUFDRSxLQUFOLENBQVlDLFdBQWhCO0FBQUEsQ0FIUSxDQUF4Qjs7QUEwQkEsSUFBTUMscUJBQXFCLEdBQUdQLDZCQUFPQyxHQUFQLENBQVdDLEtBQVgsQ0FBaUI7QUFDN0NFLEVBQUFBLFNBQVMsRUFBRTtBQURrQyxDQUFqQixDQUFILDJHQUEzQjs7QUFNQSxJQUFNSSxlQUFlLEdBQUdSLDZCQUFPQyxHQUFWLHdKQUFyQjs7QUFNQSxJQUFNUSxhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLENBQUFDLE9BQU87QUFBQSxtQkFBT0MsSUFBSSxDQUFDQyxLQUFMLENBQVdGLE9BQU8sR0FBRyxHQUFyQixDQUFQO0FBQUEsQ0FBN0I7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU1HLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsT0FBcUU7QUFBQSxNQUFuRUMsT0FBbUUsUUFBbkVBLE9BQW1FO0FBQUEsTUFBMURDLFFBQTBELFFBQTFEQSxRQUEwRDtBQUFBLE1BQWhETCxPQUFnRCxRQUFoREEsT0FBZ0Q7QUFBQSxNQUF2Q00sS0FBdUMsUUFBdkNBLEtBQXVDO0FBQUEsTUFBaENYLEtBQWdDLFFBQWhDQSxLQUFnQztBQUMxRixNQUFNWSxVQUFVLEdBQUdSLGFBQWEsQ0FBQ0MsT0FBRCxDQUFoQztBQUNBLE1BQU1RLFFBQVEsR0FBR0YsS0FBSyxHQUFHWCxLQUFLLENBQUNjLFVBQVQsR0FBc0JkLEtBQUssQ0FBQ2UsYUFBbEQ7QUFFQSxzQkFDRSxnQ0FBQyxrQkFBRDtBQUFvQixJQUFBLFNBQVMsRUFBQztBQUE5QixrQkFDRTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsa0JBQ0UsZ0NBQUMscUNBQUQ7QUFBb0IsSUFBQSxTQUFTLEVBQUMsV0FBOUI7QUFBMEMsSUFBQSxLQUFLLEVBQUVMO0FBQWpELEtBQ0dBLFFBREgsQ0FERixlQUlFO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUEwQkUsVUFBMUIsQ0FKRixDQURGLGVBT0U7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLGtCQUNFLGdDQUFDLHVCQUFEO0FBQWEsSUFBQSxPQUFPLEVBQUVBLFVBQXRCO0FBQWtDLElBQUEsUUFBUSxFQUFFQyxRQUE1QztBQUFzRCxJQUFBLFNBQVMsTUFBL0Q7QUFBZ0UsSUFBQSxLQUFLLEVBQUViO0FBQXZFLElBREYsQ0FQRixlQVVFO0FBQUssSUFBQSxTQUFTLEVBQUMsWUFBZjtBQUE0QixJQUFBLEtBQUssRUFBRTtBQUFDZ0IsTUFBQUEsS0FBSyxFQUFFTCxLQUFLLEdBQUdYLEtBQUssQ0FBQ2MsVUFBVCxHQUFzQmQsS0FBSyxDQUFDQztBQUF6QztBQUFuQyxLQUNHVSxLQUFLLEdBQUcscUJBQVNBLEtBQVQsQ0FBSCxHQUFxQkYsT0FEN0IsQ0FWRixDQURGO0FBZ0JELENBcEJEOztBQTJCQTtBQUNBLElBQU1RLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBcUI7QUFBQSxNQUFFQyxtQkFBRixTQUFFQSxtQkFBRjtBQUFBLE1BQXVCbEIsS0FBdkIsU0FBdUJBLEtBQXZCO0FBQUEsc0JBQ3pCLGdDQUFDLGVBQUQscUJBQ0UsZ0NBQUMscUJBQUQsUUFDR21CLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjRixtQkFBZCxFQUFtQ0csR0FBbkMsQ0FBdUMsVUFBQUMsSUFBSTtBQUFBLHdCQUMxQyxnQ0FBQyxjQUFELGdDQUFvQkEsSUFBcEI7QUFBMEIsTUFBQSxHQUFHLEVBQUVBLElBQUksQ0FBQ1osUUFBcEM7QUFBOEMsTUFBQSxLQUFLLEVBQUVWO0FBQXJELE9BRDBDO0FBQUEsR0FBM0MsQ0FESCxDQURGLENBRHlCO0FBQUEsQ0FBM0I7O2VBVWUsaUNBQVVpQixrQkFBVixDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHt3aXRoVGhlbWV9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFByb2dyZXNzQmFyIGZyb20gJy4uL3Byb2dyZXNzLWJhcic7XG5pbXBvcnQge1RydW5jYXRlZFRpdGxlVGV4dH0gZnJvbSAnLi4vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtnZXRFcnJvcn0gZnJvbSAnQGtlcGxlci5nbC91dGlscyc7XG5pbXBvcnQge0ZpbGVMb2FkaW5nUHJvZ3Jlc3N9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuXG5jb25zdCBTdHlsZWRGaWxlUHJvZ3Jlc3MgPSBzdHlsZWQuZGl2LmF0dHJzKHByb3BzID0+ICh7XG4gIGNsYXNzTmFtZTogY2xhc3NuYW1lcygnZmlsZS11cGxvYWRfX3Byb2dyZXNzJywgcHJvcHMuY2xhc3NOYW1lKVxufSkpYFxuICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS50ZXh0Q29sb3JMVH07XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgbWFyZ2luLXRvcDogMTJweDtcbiAgYm9yZGVyLWltYWdlOiBpbml0aWFsO1xuICBwYWRkaW5nOiA4cHggMTJweDtcblxuICAudG9wLXJvdyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cblxuICAuZmlsZS1uYW1lIHtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9XG4gIC5taWRkbGUtcm93IHtcbiAgICBtYXJnaW4tdG9wOiA2cHg7XG4gIH1cbiAgLmJvdHRvbS1yb3cge1xuICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICB0ZXh0LWFsaWduOiBzdGFydDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkUHJvZ3Jlc3NXcmFwcGVyID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ2ZpbGUtdXBsb2FkX19wcm9ncmVzc19fd3JhcHBlcidcbn0pYFxuICB3aWR0aDogNDAwcHg7XG5gO1xuXG5jb25zdCBTdHlsZWRDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5gO1xuXG5jb25zdCBmb3JtYXRQZXJjZW50ID0gcGVyY2VudCA9PiBgJHtNYXRoLmZsb29yKHBlcmNlbnQgKiAxMDApfSVgO1xuXG5pbnRlcmZhY2UgVXBsb2FkUHJvZ3Jlc3NQcm9wcyB7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIGZpbGVOYW1lPzogc3RyaW5nO1xuICBwZXJjZW50OiBudW1iZXI7XG4gIGVycm9yPzogYW55O1xuICB0aGVtZTogYW55O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMubWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5maWxlTmFtZVxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5wZXJjZW50XG4gKiBAcGFyYW0ge2FueX0gcGFyYW1zLmVycm9yXG4gKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zLnRoZW1lXG4gKi9cbmNvbnN0IFVwbG9hZFByb2dyZXNzID0gKHttZXNzYWdlLCBmaWxlTmFtZSwgcGVyY2VudCwgZXJyb3IsIHRoZW1lfTogVXBsb2FkUHJvZ3Jlc3NQcm9wcykgPT4ge1xuICBjb25zdCBwZXJjZW50U3RyID0gZm9ybWF0UGVyY2VudChwZXJjZW50KTtcbiAgY29uc3QgYmFyQ29sb3IgPSBlcnJvciA/IHRoZW1lLmVycm9yQ29sb3IgOiB0aGVtZS5hY3RpdmVDb2xvckxUO1xuXG4gIHJldHVybiAoXG4gICAgPFN0eWxlZEZpbGVQcm9ncmVzcyBjbGFzc05hbWU9XCJmaWxlLXVwbG9hZC1wcm9ncmVzc19fbWVzc2FnZVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3Atcm93XCI+XG4gICAgICAgIDxUcnVuY2F0ZWRUaXRsZVRleHQgY2xhc3NOYW1lPVwiZmlsZS1uYW1lXCIgdGl0bGU9e2ZpbGVOYW1lfT5cbiAgICAgICAgICB7ZmlsZU5hbWV9XG4gICAgICAgIDwvVHJ1bmNhdGVkVGl0bGVUZXh0PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBlcmNlbnRcIj57cGVyY2VudFN0cn08L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtaWRkbGUtcm93XCI+XG4gICAgICAgIDxQcm9ncmVzc0JhciBwZXJjZW50PXtwZXJjZW50U3RyfSBiYXJDb2xvcj17YmFyQ29sb3J9IGlzTG9hZGluZyB0aGVtZT17dGhlbWV9IC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm90dG9tLXJvd1wiIHN0eWxlPXt7Y29sb3I6IGVycm9yID8gdGhlbWUuZXJyb3JDb2xvciA6IHRoZW1lLnRleHRDb2xvckxUfX0+XG4gICAgICAgIHtlcnJvciA/IGdldEVycm9yKGVycm9yKSA6IG1lc3NhZ2V9XG4gICAgICA8L2Rpdj5cbiAgICA8L1N0eWxlZEZpbGVQcm9ncmVzcz5cbiAgKTtcbn07XG5cbmludGVyZmFjZSBGaWxlVXBsb2FkUHJvZ3Jlc3NQcm9wcyB7XG4gIGZpbGVMb2FkaW5nUHJvZ3Jlc3M6IEZpbGVMb2FkaW5nUHJvZ3Jlc3M7XG4gIHRoZW1lOiBhbnk7XG59XG5cbi8qKiBAdHlwZSB7UmVhY3QuRnVuY3Rpb25Db21wb25lbnQ8RmlsZVVwbG9hZFByb2dyZXNzUHJvcHM+fSAqL1xuY29uc3QgRmlsZVVwbG9hZFByb2dyZXNzID0gKHtmaWxlTG9hZGluZ1Byb2dyZXNzLCB0aGVtZX06IEZpbGVVcGxvYWRQcm9ncmVzc1Byb3BzKSA9PiAoXG4gIDxTdHlsZWRDb250YWluZXI+XG4gICAgPFN0eWxlZFByb2dyZXNzV3JhcHBlcj5cbiAgICAgIHtPYmplY3QudmFsdWVzKGZpbGVMb2FkaW5nUHJvZ3Jlc3MpLm1hcChpdGVtID0+IChcbiAgICAgICAgPFVwbG9hZFByb2dyZXNzIHsuLi5pdGVtfSBrZXk9e2l0ZW0uZmlsZU5hbWV9IHRoZW1lPXt0aGVtZX0gLz5cbiAgICAgICkpfVxuICAgIDwvU3R5bGVkUHJvZ3Jlc3NXcmFwcGVyPlxuICA8L1N0eWxlZENvbnRhaW5lcj5cbik7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShGaWxlVXBsb2FkUHJvZ3Jlc3MpO1xuIl19
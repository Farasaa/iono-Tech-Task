"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.TableSection = exports.Container = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _reactVirtualized = require("react-virtualized");

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _classnames2 = _interopRequireDefault(require("classnames"));

var _reselect = require("reselect");

var _lodash = _interopRequireDefault(require("lodash.get"));

var _lodash2 = _interopRequireDefault(require("lodash.debounce"));

var _icons = require("../icons");

var _grid = _interopRequireDefault(require("./grid"));

var _headerCell = _interopRequireDefault(require("./header-cell"));

var _utils = require("@kepler.gl/utils");

var _cellSize = require("./cell-size");

var _constants = require("@kepler.gl/constants");

var _fieldToAlignRight, _templateObject, _templateObject2;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var defaultHeaderRowHeight = 55;
var defaultHeaderStatsControlHeight = 40;
var defaultRowHeight = 32;
var overscanColumnCount = 10;
var overscanRowCount = 10; // The default scrollbar width can range anywhere from 12px to 17px

var browserScrollBarWidth = 17;
var fieldToAlignRight = (_fieldToAlignRight = {}, (0, _defineProperty2["default"])(_fieldToAlignRight, _constants.ALL_FIELD_TYPES.integer, true), (0, _defineProperty2["default"])(_fieldToAlignRight, _constants.ALL_FIELD_TYPES.real, true), _fieldToAlignRight);
var pinnedClassList = {
  header: 'pinned-columns--header pinned-grid-container',
  rows: 'pinned-columns--rows pinned-grid-container'
};
var unpinnedClassList = {
  header: 'unpinned-columns--header unpinned-grid-container',
  rows: 'unpinned-columns--rows unpinned-grid-container'
};

var Container = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  font-size: 11px;\n  flex-grow: 1;\n  color: ", ";\n  width: 100%;\n  position: relative;\n  .ReactVirtualized__Grid:focus,\n  .ReactVirtualized__Grid:active {\n    outline: 0;\n  }\n  .body-grid {\n    ", "\n  }\n\n  .cell {\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n\n  *:focus {\n    outline: 0;\n  }\n\n  .results-table-wrapper {\n    position: relative;\n    min-height: 100%;\n    max-height: 100%;\n    display: flex;\n    flex-direction: row;\n    flex-grow: 1;\n    overflow: hidden;\n\n    .scroll-in-ui-thread.pinned-columns--header {\n      overflow: hidden;\n      border-bottom: 1px solid ", ";\n      padding-bottom: ", "px;\n    }\n    .scroll-in-ui-thread.unpinned-columns--header {\n      width: 100vw;\n      overflow: hidden;\n      border-bottom: 1px solid ", ";\n      // leave room for scrollbar\n      padding-bottom: ", "px;\n    }\n\n    .scroll-in-ui-thread::after {\n      content: '';\n      height: 100%;\n      left: 0;\n      position: absolute;\n      pointer-events: none;\n      top: 0;\n      width: 100%;\n    }\n\n    .grid-row {\n      position: relative;\n      display: flex;\n      flex-direction: row;\n    }\n    .grid-column {\n      display: flex;\n      flex-direction: column;\n      flex: 1 1 auto;\n    }\n    .pinned-grid-container {\n      flex: 0 0 75px;\n      z-index: 10;\n      position: absolute;\n      left: 0;\n      top: 0;\n      border-right: 2px solid ", ";\n    }\n    .even-row {\n      background-color: ", ";\n    }\n    .odd-row {\n      background-color: ", ";\n    }\n    .cell,\n    .header-cell {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      text-align: center;\n      overflow: hidden;\n      // header border is rendered by header container\n      border-bottom: 0;\n      .n-sort-idx {\n        font-size: 9px;\n      }\n    }\n    .cell {\n      border-bottom: 1px solid ", ";\n      border-right: 1px solid ", ";\n      white-space: nowrap;\n      overflow: auto;\n      padding: 0 ", "px;\n      font-size: ", "px;\n\n      .result-link {\n        text-decoration: none;\n      }\n    }\n    .cell.end-cell,\n    .header-cell.end-cell {\n      border-right: none;\n      padding-right: ", "px;\n    }\n    .cell.first-cell,\n    .header-cell.first-cell {\n      padding-left: ", "px;\n    }\n    .cell.bottom-cell {\n      border-bottom: none;\n    }\n    .cell.align-right {\n      align-items: flex-end;\n    }\n  }\n\n  :focus {\n    outline: none;\n  }\n"])), function (props) {
  return props.theme.dataTableTextColor;
}, function (props) {
  return props.hasCustomScrollBarStyle && props.theme.modalScrollBar;
}, function (props) {
  return props.theme.cellBorderColor;
}, browserScrollBarWidth, function (props) {
  return props.theme.cellBorderColor;
}, browserScrollBarWidth, function (props) {
  return props.theme.pinnedGridBorderColor;
}, function (props) {
  return props.theme.evenRowBackground;
}, function (props) {
  return props.theme.oddRowBackground;
}, function (props) {
  return props.theme.cellBorderColor;
}, function (props) {
  return props.theme.cellBorderColor;
}, function (props) {
  return props.theme.cellPaddingSide;
}, function (props) {
  return props.theme.cellFontSize;
}, function (props) {
  return props.theme.cellPaddingSide + props.theme.edgeCellPaddingSide;
}, function (props) {
  return props.theme.cellPaddingSide + props.theme.edgeCellPaddingSide;
});

exports.Container = Container;
var defaultColumnWidth = 200;

var columnWidthFunction = function columnWidthFunction(columns, cellSizeCache, ghost) {
  return function (_ref) {
    var index = _ref.index;
    return (columns[index] || {}).ghost ? ghost : cellSizeCache[columns[index]] || defaultColumnWidth;
  };
};

/*
 * This is an accessor method used to generalize getting a cell from a data row
 */
var defaultGetRowCell = function defaultGetRowCell(_ref2, formatter) {
  var dataContainer = _ref2.dataContainer,
      columns = _ref2.columns,
      column = _ref2.column,
      colMeta = _ref2.colMeta,
      rowIndex = _ref2.rowIndex,
      sortOrder = _ref2.sortOrder;
  var rowIdx = sortOrder && sortOrder.length ? (0, _lodash["default"])(sortOrder, rowIndex) : rowIndex;
  var type = colMeta[column].type;
  var value = dataContainer.valueAt(rowIdx, columns.indexOf(column));
  return value === null || value === undefined || value === '' ? '' : formatter ? formatter(value) : (0, _utils.parseFieldValue)(value, type);
};

var StyledStatsControl = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  height: ", "px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  position: absolute;\n  top: ", "px;\n  font-family: ", "px;\n  font-size: 12px;\n  color: ", ";\n  background-color: ", ";\n  :hover {\n    cursor: pointer;\n  }\n\n  > div {\n    padding: 0px 24px;\n    display: flex;\n    align-items: center;\n\n    svg {\n      margin-left: 12px;\n      transition: transform 0.5s ease;\n      transform: rotate(", "deg);\n    }\n  }\n"])), function (props) {
  return props.theme.headerStatsControlHeight;
}, function (props) {
  return props.top;
}, function (props) {
  return props.theme.fontFamilyMedium;
}, function (props) {
  return props.theme.activeColor;
}, function (props) {
  return props.theme.headerCellStatsControlBackground;
}, function (props) {
  return props.showStats ? 180 : 0;
});

var StatsControl = function StatsControl(_ref3) {
  var top = _ref3.top,
      showStats = _ref3.showStats,
      toggleShowStats = _ref3.toggleShowStats;
  return /*#__PURE__*/_react["default"].createElement(StyledStatsControl, {
    top: top,
    showStats: showStats
  }, /*#__PURE__*/_react["default"].createElement("div", {
    onClick: toggleShowStats
  }, showStats ? 'Hide Column Stats' : 'Show Column Stats', /*#__PURE__*/_react["default"].createElement(_icons.ArrowDown, {
    height: "18px"
  })));
};

var TableSection = function TableSection(_ref4) {
  var classList = _ref4.classList,
      isPinned = _ref4.isPinned,
      columns = _ref4.columns,
      headerGridProps = _ref4.headerGridProps,
      fixedWidth = _ref4.fixedWidth,
      _ref4$fixedHeight = _ref4.fixedHeight,
      fixedHeight = _ref4$fixedHeight === void 0 ? undefined : _ref4$fixedHeight,
      onScroll = _ref4.onScroll,
      scrollTop = _ref4.scrollTop,
      dataGridProps = _ref4.dataGridProps,
      columnWidth = _ref4.columnWidth,
      _ref4$setGridRef = _ref4.setGridRef,
      setGridRef = _ref4$setGridRef === void 0 ? undefined : _ref4$setGridRef,
      headerCellRender = _ref4.headerCellRender,
      dataCellRender = _ref4.dataCellRender,
      _ref4$scrollLeft = _ref4.scrollLeft,
      scrollLeft = _ref4$scrollLeft === void 0 ? 0 : _ref4$scrollLeft;
  var headerHeight = headerGridProps.height;
  var headerStyle = (0, _react.useMemo)(function () {
    return {
      height: "".concat(headerHeight, "px")
    };
  }, [headerHeight]);
  var contentStyle = (0, _react.useMemo)(function () {
    return {
      top: "".concat(headerHeight, "px")
    };
  }, [headerHeight]);
  return /*#__PURE__*/_react["default"].createElement(_reactVirtualized.AutoSizer, null, function (_ref5) {
    var width = _ref5.width,
        height = _ref5.height;
    var gridDimension = {
      columnCount: columns.length,
      columnWidth: columnWidth,
      width: fixedWidth || width
    };
    var headerGridWidth = fixedWidth || width - browserScrollBarWidth;
    var dataGridHeight = fixedHeight || height;
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("div", {
      className: (0, _classnames2["default"])('scroll-in-ui-thread', classList === null || classList === void 0 ? void 0 : classList.header),
      style: headerStyle
    }, /*#__PURE__*/_react["default"].createElement(_grid["default"], (0, _extends2["default"])({
      cellRenderer: headerCellRender
    }, headerGridProps, gridDimension, {
      height: headerGridProps.height + browserScrollBarWidth,
      width: headerGridWidth,
      scrollLeft: scrollLeft,
      onScroll: onScroll
    }))), /*#__PURE__*/_react["default"].createElement("div", {
      className: (0, _classnames2["default"])('scroll-in-ui-thread', classList === null || classList === void 0 ? void 0 : classList.rows),
      style: contentStyle
    }, /*#__PURE__*/_react["default"].createElement(_grid["default"], (0, _extends2["default"])({
      cellRenderer: dataCellRender
    }, dataGridProps, gridDimension, {
      className: isPinned ? 'pinned-grid' : 'body-grid',
      height: dataGridHeight - headerGridProps.height,
      onScroll: onScroll,
      scrollLeft: scrollLeft,
      scrollTop: scrollTop,
      setGridRef: setGridRef
    }))));
  });
};

exports.TableSection = TableSection;
DataTableFactory.deps = [_headerCell["default"]];

function DataTableFactory(HeaderCell) {
  var DataTable = /*#__PURE__*/function (_Component) {
    (0, _inherits2["default"])(DataTable, _Component);

    var _super = _createSuper(DataTable);

    function DataTable() {
      var _this;

      (0, _classCallCheck2["default"])(this, DataTable);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _super.call.apply(_super, [this].concat(args));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "pinnedGrid", false);
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "unpinnedGrid", false);
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {
        cellSizeCache: {},
        moreOptionsColumn: null,
        showStats: true
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "root", /*#__PURE__*/(0, _react.createRef)());
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "columns", function (props) {
        return props.columns;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "pinnedColumns", function (props) {
        return props.pinnedColumns;
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "unpinnedColumns", (0, _reselect.createSelector)(_this.columns, _this.pinnedColumns, function (columns, pinnedColumns) {
        return !Array.isArray(pinnedColumns) ? columns : columns.filter(function (c) {
          return !pinnedColumns.includes(c);
        });
      }));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "toggleMoreOptions", function (moreOptionsColumn) {
        return _this.setState({
          moreOptionsColumn: _this.state.moreOptionsColumn === moreOptionsColumn ? null : moreOptionsColumn
        });
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "toggleShowStats", function () {
        return _this.setState({
          showStats: !_this.state.showStats
        });
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getCellSizeCache", function () {
        var _this$props = _this.props,
            _this$props$cellSizeC = _this$props.cellSizeCache,
            propsCache = _this$props$cellSizeC === void 0 ? {} : _this$props$cellSizeC,
            fixedWidth = _this$props.fixedWidth,
            _this$props$pinnedCol = _this$props.pinnedColumns,
            pinnedColumns = _this$props$pinnedCol === void 0 ? [] : _this$props$pinnedCol;

        var unpinnedColumns = _this.unpinnedColumns(_this.props);

        var width = fixedWidth ? fixedWidth : _this.root.current ? _this.root.current.clientWidth : 0; // pin column border is 2 pixel vs 1 pixel

        var adjustWidth = pinnedColumns.length ? width - 1 : width;

        var _ref6 = (0, _cellSize.adjustCellsToContainer)(adjustWidth, propsCache, pinnedColumns, unpinnedColumns),
            cellSizeCache = _ref6.cellSizeCache,
            ghost = _ref6.ghost;

        return {
          cellSizeCache: cellSizeCache,
          ghost: ghost
        };
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "doScaleCellsToWidth", function () {
        _this.setState(_this.getCellSizeCache());
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "scaleCellsToWidth", (0, _lodash2["default"])(_this.doScaleCellsToWidth, 300));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "renderDataCell", function (columns, isPinned, props) {
        var _this$props$getRowCel;

        var getRowCell = (_this$props$getRowCel = _this.props.getRowCell) !== null && _this$props$getRowCel !== void 0 ? _this$props$getRowCel : defaultGetRowCell;
        return function (cellInfo) {
          var _classnames;

          var columnIndex = cellInfo.columnIndex,
              key = cellInfo.key,
              style = cellInfo.style,
              rowIndex = cellInfo.rowIndex;
          var dataContainer = props.dataContainer,
              colMeta = props.colMeta;
          var column = columns[columnIndex];
          var isGhost = column.ghost;
          var formatter = isGhost ? null : (0, _utils.getColumnFormatter)(colMeta[column]);
          var rowCell = isGhost ? '' : getRowCell(_objectSpread(_objectSpread({}, props), {}, {
            column: column,
            rowIndex: rowIndex
          }), formatter);
          var type = isGhost ? null : colMeta[column].type;
          var lastRowIndex = dataContainer ? dataContainer.numRows() - 1 : 0;
          var endCell = columnIndex === columns.length - 1;
          var firstCell = columnIndex === 0;
          var bottomCell = rowIndex === lastRowIndex;
          var alignRight = fieldToAlignRight[Number(type)];

          var cell = /*#__PURE__*/_react["default"].createElement("div", {
            className: (0, _classnames2["default"])('cell', (_classnames = {}, (0, _defineProperty2["default"])(_classnames, rowIndex % 2 === 0 ? 'even-row' : 'odd-row', true), (0, _defineProperty2["default"])(_classnames, "row-".concat(rowIndex), true), (0, _defineProperty2["default"])(_classnames, 'pinned-cell', isPinned), (0, _defineProperty2["default"])(_classnames, 'first-cell', firstCell), (0, _defineProperty2["default"])(_classnames, 'end-cell', endCell), (0, _defineProperty2["default"])(_classnames, 'bottom-cell', bottomCell), (0, _defineProperty2["default"])(_classnames, 'align-right', alignRight), _classnames)),
            key: key,
            style: style,
            title: isGhost ? undefined : rowCell
          }, "".concat(rowCell).concat(endCell ? '\n' : '\t'));

          return cell;
        };
      });
      return _this;
    }

    (0, _createClass2["default"])(DataTable, [{
      key: "componentDidMount",
      value: function componentDidMount() {
        window.addEventListener('resize', this.scaleCellsToWidth);
        this.scaleCellsToWidth();
      }
    }, {
      key: "componentDidUpdate",
      value: function componentDidUpdate(prevProps) {
        if (this.props.cellSizeCache !== prevProps.cellSizeCache || this.props.pinnedColumns !== prevProps.pinnedColumns) {
          this.scaleCellsToWidth();
        }
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        window.removeEventListener('resize', this.scaleCellsToWidth); // fix Warning: Can't perform a React state update on an unmounted component

        this.setState = function () {
          return;
        };
      }
    }, {
      key: "renderHeaderCell",
      value: function renderHeaderCell(columns, isPinned, props, toggleMoreOptions, moreOptionsColumn) {
        var _this2 = this;

        return function (cellInfo) {
          return /*#__PURE__*/_react["default"].createElement(HeaderCell, {
            cellInfo: cellInfo,
            key: cellInfo.columnIndex,
            columns: columns,
            isPinned: isPinned,
            showStats: _this2.state.showStats,
            props: props,
            toggleMoreOptions: toggleMoreOptions,
            moreOptionsColumn: moreOptionsColumn
          });
        };
      }
    }, {
      key: "render",
      value: function render() {
        var _this3 = this;

        var _this$props2 = this.props,
            dataContainer = _this$props2.dataContainer,
            _this$props2$pinnedCo = _this$props2.pinnedColumns,
            pinnedColumns = _this$props2$pinnedCo === void 0 ? [] : _this$props2$pinnedCo,
            _this$props2$theme = _this$props2.theme,
            theme = _this$props2$theme === void 0 ? {} : _this$props2$theme,
            fixedWidth = _this$props2.fixedWidth,
            _this$props2$fixedHei = _this$props2.fixedHeight,
            fixedHeight = _this$props2$fixedHei === void 0 ? 0 : _this$props2$fixedHei,
            hasStats = _this$props2.hasStats,
            hasCustomScrollBarStyle = _this$props2.hasCustomScrollBarStyle;
        var unpinnedColumns = this.unpinnedColumns(this.props);
        var _this$state = this.state,
            _this$state$cellSizeC = _this$state.cellSizeCache,
            cellSizeCache = _this$state$cellSizeC === void 0 ? {} : _this$state$cellSizeC,
            moreOptionsColumn = _this$state.moreOptionsColumn,
            ghost = _this$state.ghost,
            showStats = _this$state.showStats;
        var unpinnedColumnsGhost = ghost ? [].concat((0, _toConsumableArray2["default"])(unpinnedColumns), [{
          ghost: true
        }]) : unpinnedColumns;
        var pinnedColumnsWidth = pinnedColumns.reduce(function (acc, val) {
          return acc + (0, _lodash["default"])(cellSizeCache, val, 0);
        }, 0);
        var hasPinnedColumns = Boolean(pinnedColumns.length);
        var _theme$headerRowHeigh = theme.headerRowHeight,
            headerRowHeight = _theme$headerRowHeigh === void 0 ? defaultHeaderRowHeight : _theme$headerRowHeigh,
            _theme$headerStatsCon = theme.headerStatsControlHeight,
            headerStatsControlHeight = _theme$headerStatsCon === void 0 ? defaultHeaderStatsControlHeight : _theme$headerStatsCon,
            _theme$headerRowWStat = theme.headerRowWStatsHeight,
            headerRowWStatsHeight = _theme$headerRowWStat === void 0 ? defaultHeaderRowHeight : _theme$headerRowWStat,
            _theme$rowHeight = theme.rowHeight,
            rowHeight = _theme$rowHeight === void 0 ? defaultRowHeight : _theme$rowHeight;
        var headerGridProps = {
          cellSizeCache: cellSizeCache,
          className: 'header-grid',
          height: !hasStats ? headerRowHeight : showStats ? headerRowWStatsHeight : headerRowHeight + headerStatsControlHeight,
          rowCount: 1,
          rowHeight: !hasStats ? headerRowHeight : showStats ? headerRowWStatsHeight : headerRowHeight + headerStatsControlHeight
        };
        var dataGridProps = {
          cellSizeCache: cellSizeCache,
          overscanColumnCount: overscanColumnCount,
          overscanRowCount: overscanRowCount,
          rowCount: dataContainer ? dataContainer.numRows() : 0,
          rowHeight: rowHeight
        };
        return /*#__PURE__*/_react["default"].createElement(Container, {
          className: "data-table-container",
          ref: this.root,
          hasCustomScrollBarStyle: hasCustomScrollBarStyle
        }, Object.keys(cellSizeCache).length ? /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(_reactVirtualized.ScrollSync, null, function (_ref7) {
          var _onScroll = _ref7.onScroll,
              scrollLeft = _ref7.scrollLeft,
              scrollTop = _ref7.scrollTop;
          return /*#__PURE__*/_react["default"].createElement("div", {
            className: "results-table-wrapper"
          }, hasPinnedColumns && /*#__PURE__*/_react["default"].createElement("div", {
            key: "pinned-columns",
            className: "pinned-columns grid-row"
          }, /*#__PURE__*/_react["default"].createElement(TableSection, {
            classList: pinnedClassList,
            isPinned: true,
            columns: pinnedColumns,
            headerGridProps: headerGridProps,
            fixedWidth: pinnedColumnsWidth,
            onScroll: function onScroll(args) {
              return _onScroll(_objectSpread(_objectSpread({}, args), {}, {
                scrollLeft: scrollLeft
              }));
            },
            scrollTop: scrollTop,
            scrollLeft: scrollLeft,
            dataGridProps: dataGridProps,
            setGridRef: function setGridRef(pinnedGrid) {
              return _this3.pinnedGrid = pinnedGrid;
            },
            columnWidth: columnWidthFunction(pinnedColumns, cellSizeCache),
            headerCellRender: _this3.renderHeaderCell(pinnedColumns, true, _this3.props, _this3.toggleMoreOptions, moreOptionsColumn),
            dataCellRender: _this3.renderDataCell(pinnedColumns, true, _this3.props)
          })), /*#__PURE__*/_react["default"].createElement("div", {
            key: "unpinned-columns",
            style: {
              marginLeft: "".concat(hasPinnedColumns ? "".concat(pinnedColumnsWidth, "px") : '0')
            },
            className: "unpinned-columns grid-column"
          }, /*#__PURE__*/_react["default"].createElement(TableSection, {
            classList: unpinnedClassList,
            isPinned: false,
            columns: unpinnedColumnsGhost,
            headerGridProps: headerGridProps,
            fixedWidth: fixedWidth,
            fixedHeight: fixedHeight,
            onScroll: _onScroll,
            scrollTop: scrollTop,
            scrollLeft: scrollLeft,
            dataGridProps: dataGridProps,
            setGridRef: function setGridRef(unpinnedGrid) {
              return _this3.unpinnedGrid = unpinnedGrid;
            },
            columnWidth: columnWidthFunction(unpinnedColumnsGhost, cellSizeCache, ghost),
            headerCellRender: _this3.renderHeaderCell(unpinnedColumnsGhost, false, _this3.props, _this3.toggleMoreOptions, moreOptionsColumn),
            dataCellRender: _this3.renderDataCell(unpinnedColumnsGhost, false, _this3.props)
          })));
        }), hasStats ? /*#__PURE__*/_react["default"].createElement(StatsControl, {
          top: headerRowHeight,
          showStats: showStats,
          toggleShowStats: this.toggleShowStats
        }) : null) : null);
      }
    }]);
    return DataTable;
  }(_react.Component);

  (0, _defineProperty2["default"])(DataTable, "defaultProps", {
    dataContainer: null,
    pinnedColumns: [],
    colMeta: {},
    cellSizeCache: {},
    sortColumn: {},
    fixedWidth: null,
    fixedHeight: null,
    theme: {},
    hasStats: false,
    hasCustomScrollBarStyle: true
  });
  return (0, _styledComponents.withTheme)(DataTable);
}

var _default = DataTableFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vZGF0YS10YWJsZS9pbmRleC50c3giXSwibmFtZXMiOlsiZGVmYXVsdEhlYWRlclJvd0hlaWdodCIsImRlZmF1bHRIZWFkZXJTdGF0c0NvbnRyb2xIZWlnaHQiLCJkZWZhdWx0Um93SGVpZ2h0Iiwib3ZlcnNjYW5Db2x1bW5Db3VudCIsIm92ZXJzY2FuUm93Q291bnQiLCJicm93c2VyU2Nyb2xsQmFyV2lkdGgiLCJmaWVsZFRvQWxpZ25SaWdodCIsIkFMTF9GSUVMRF9UWVBFUyIsImludGVnZXIiLCJyZWFsIiwicGlubmVkQ2xhc3NMaXN0IiwiaGVhZGVyIiwicm93cyIsInVucGlubmVkQ2xhc3NMaXN0IiwiQ29udGFpbmVyIiwic3R5bGVkIiwiZGl2IiwicHJvcHMiLCJ0aGVtZSIsImRhdGFUYWJsZVRleHRDb2xvciIsImhhc0N1c3RvbVNjcm9sbEJhclN0eWxlIiwibW9kYWxTY3JvbGxCYXIiLCJjZWxsQm9yZGVyQ29sb3IiLCJwaW5uZWRHcmlkQm9yZGVyQ29sb3IiLCJldmVuUm93QmFja2dyb3VuZCIsIm9kZFJvd0JhY2tncm91bmQiLCJjZWxsUGFkZGluZ1NpZGUiLCJjZWxsRm9udFNpemUiLCJlZGdlQ2VsbFBhZGRpbmdTaWRlIiwiZGVmYXVsdENvbHVtbldpZHRoIiwiY29sdW1uV2lkdGhGdW5jdGlvbiIsImNvbHVtbnMiLCJjZWxsU2l6ZUNhY2hlIiwiZ2hvc3QiLCJpbmRleCIsImRlZmF1bHRHZXRSb3dDZWxsIiwiZm9ybWF0dGVyIiwiZGF0YUNvbnRhaW5lciIsImNvbHVtbiIsImNvbE1ldGEiLCJyb3dJbmRleCIsInNvcnRPcmRlciIsInJvd0lkeCIsImxlbmd0aCIsInR5cGUiLCJ2YWx1ZSIsInZhbHVlQXQiLCJpbmRleE9mIiwidW5kZWZpbmVkIiwiU3R5bGVkU3RhdHNDb250cm9sIiwiaGVhZGVyU3RhdHNDb250cm9sSGVpZ2h0IiwidG9wIiwiZm9udEZhbWlseU1lZGl1bSIsImFjdGl2ZUNvbG9yIiwiaGVhZGVyQ2VsbFN0YXRzQ29udHJvbEJhY2tncm91bmQiLCJzaG93U3RhdHMiLCJTdGF0c0NvbnRyb2wiLCJ0b2dnbGVTaG93U3RhdHMiLCJUYWJsZVNlY3Rpb24iLCJjbGFzc0xpc3QiLCJpc1Bpbm5lZCIsImhlYWRlckdyaWRQcm9wcyIsImZpeGVkV2lkdGgiLCJmaXhlZEhlaWdodCIsIm9uU2Nyb2xsIiwic2Nyb2xsVG9wIiwiZGF0YUdyaWRQcm9wcyIsImNvbHVtbldpZHRoIiwic2V0R3JpZFJlZiIsImhlYWRlckNlbGxSZW5kZXIiLCJkYXRhQ2VsbFJlbmRlciIsInNjcm9sbExlZnQiLCJoZWFkZXJIZWlnaHQiLCJoZWlnaHQiLCJoZWFkZXJTdHlsZSIsImNvbnRlbnRTdHlsZSIsIndpZHRoIiwiZ3JpZERpbWVuc2lvbiIsImNvbHVtbkNvdW50IiwiaGVhZGVyR3JpZFdpZHRoIiwiZGF0YUdyaWRIZWlnaHQiLCJEYXRhVGFibGVGYWN0b3J5IiwiZGVwcyIsIkhlYWRlckNlbGxGYWN0b3J5IiwiSGVhZGVyQ2VsbCIsIkRhdGFUYWJsZSIsIm1vcmVPcHRpb25zQ29sdW1uIiwicGlubmVkQ29sdW1ucyIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImMiLCJpbmNsdWRlcyIsInNldFN0YXRlIiwic3RhdGUiLCJwcm9wc0NhY2hlIiwidW5waW5uZWRDb2x1bW5zIiwicm9vdCIsImN1cnJlbnQiLCJjbGllbnRXaWR0aCIsImFkanVzdFdpZHRoIiwiZ2V0Q2VsbFNpemVDYWNoZSIsImRvU2NhbGVDZWxsc1RvV2lkdGgiLCJnZXRSb3dDZWxsIiwiY2VsbEluZm8iLCJjb2x1bW5JbmRleCIsImtleSIsInN0eWxlIiwiaXNHaG9zdCIsInJvd0NlbGwiLCJsYXN0Um93SW5kZXgiLCJudW1Sb3dzIiwiZW5kQ2VsbCIsImZpcnN0Q2VsbCIsImJvdHRvbUNlbGwiLCJhbGlnblJpZ2h0IiwiTnVtYmVyIiwiY2VsbCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzY2FsZUNlbGxzVG9XaWR0aCIsInByZXZQcm9wcyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b2dnbGVNb3JlT3B0aW9ucyIsImhhc1N0YXRzIiwidW5waW5uZWRDb2x1bW5zR2hvc3QiLCJwaW5uZWRDb2x1bW5zV2lkdGgiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJoYXNQaW5uZWRDb2x1bW5zIiwiQm9vbGVhbiIsImhlYWRlclJvd0hlaWdodCIsImhlYWRlclJvd1dTdGF0c0hlaWdodCIsInJvd0hlaWdodCIsImNsYXNzTmFtZSIsInJvd0NvdW50IiwiT2JqZWN0Iiwia2V5cyIsImFyZ3MiLCJwaW5uZWRHcmlkIiwicmVuZGVySGVhZGVyQ2VsbCIsInJlbmRlckRhdGFDZWxsIiwibWFyZ2luTGVmdCIsInVucGlubmVkR3JpZCIsIkNvbXBvbmVudCIsInNvcnRDb2x1bW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFFQTs7Ozs7Ozs7Ozs7O0FBRUEsSUFBTUEsc0JBQXNCLEdBQUcsRUFBL0I7QUFDQSxJQUFNQywrQkFBK0IsR0FBRyxFQUF4QztBQUNBLElBQU1DLGdCQUFnQixHQUFHLEVBQXpCO0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUcsRUFBNUI7QUFDQSxJQUFNQyxnQkFBZ0IsR0FBRyxFQUF6QixDLENBQ0E7O0FBQ0EsSUFBTUMscUJBQXFCLEdBQUcsRUFBOUI7QUFDQSxJQUFNQyxpQkFBaUIsa0ZBQ3BCQywyQkFBZ0JDLE9BREksRUFDTSxJQUROLHdEQUVwQkQsMkJBQWdCRSxJQUZJLEVBRUcsSUFGSCxzQkFBdkI7QUFLQSxJQUFNQyxlQUFlLEdBQUc7QUFDdEJDLEVBQUFBLE1BQU0sRUFBRSw4Q0FEYztBQUV0QkMsRUFBQUEsSUFBSSxFQUFFO0FBRmdCLENBQXhCO0FBS0EsSUFBTUMsaUJBQWlCLEdBQUc7QUFDeEJGLEVBQUFBLE1BQU0sRUFBRSxrREFEZ0I7QUFF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QUFtRUQsU0FyRUgsQ0FERixFQXdFRzJHLFFBQVEsZ0JBQ1AsZ0NBQUMsWUFBRDtBQUNFLFVBQUEsR0FBRyxFQUFFUSxlQURQO0FBRUUsVUFBQSxTQUFTLEVBQUU3RSxTQUZiO0FBR0UsVUFBQSxlQUFlLEVBQUUsS0FBS0U7QUFIeEIsVUFETyxHQU1MLElBOUVOLENBREQsR0FpRkcsSUF0Rk4sQ0FERjtBQTBGRDtBQTdSdUU7QUFBQTtBQUFBLElBQ2xEd0YsZ0JBRGtEOztBQUFBLG1DQUNwRTVELFNBRG9FLGtCQUVsRDtBQUNwQmhELElBQUFBLGFBQWEsRUFBRSxJQURLO0FBRXBCa0QsSUFBQUEsYUFBYSxFQUFFLEVBRks7QUFHcEJoRCxJQUFBQSxPQUFPLEVBQUUsRUFIVztBQUlwQlAsSUFBQUEsYUFBYSxFQUFFLEVBSks7QUFLcEJrSCxJQUFBQSxVQUFVLEVBQUUsRUFMUTtBQU1wQnBGLElBQUFBLFVBQVUsRUFBRSxJQU5RO0FBT3BCQyxJQUFBQSxXQUFXLEVBQUUsSUFQTztBQVFwQjdDLElBQUFBLEtBQUssRUFBRSxFQVJhO0FBU3BCMEcsSUFBQUEsUUFBUSxFQUFFLEtBVFU7QUFVcEJ4RyxJQUFBQSx1QkFBdUIsRUFBRTtBQVZMLEdBRmtEO0FBZ1MxRSxTQUFPLGlDQUFVaUUsU0FBVixDQUFQO0FBQ0Q7O2VBRWNKLGdCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBjcmVhdGVSZWYsIHVzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7U2Nyb2xsU3luYywgQXV0b1NpemVyLCBPblNjcm9sbFBhcmFtcywgR3JpZFByb3BzLCBJbmRleH0gZnJvbSAncmVhY3QtdmlydHVhbGl6ZWQnO1xuaW1wb3J0IHN0eWxlZCwge3dpdGhUaGVtZX0gZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQge2NyZWF0ZVNlbGVjdG9yfSBmcm9tICdyZXNlbGVjdCc7XG5pbXBvcnQgZ2V0IGZyb20gJ2xvZGFzaC5nZXQnO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC5kZWJvdW5jZSc7XG5pbXBvcnQge0Fycm93RG93bn0gZnJvbSAnLi4vaWNvbnMnO1xuXG5pbXBvcnQge0NlbGxTaXplQ2FjaGV9IGZyb20gJy4vY2VsbC1zaXplJztcblxuaW1wb3J0IEdyaWQgZnJvbSAnLi9ncmlkJztcbmltcG9ydCBIZWFkZXJDZWxsRmFjdG9yeSBmcm9tICcuL2hlYWRlci1jZWxsJztcblxuaW1wb3J0IHtDb2xNZXRhfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7cGFyc2VGaWVsZFZhbHVlLCBnZXRDb2x1bW5Gb3JtYXR0ZXIsIERhdGFDb250YWluZXJJbnRlcmZhY2V9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IHthZGp1c3RDZWxsc1RvQ29udGFpbmVyfSBmcm9tICcuL2NlbGwtc2l6ZSc7XG5cbmltcG9ydCB7QUxMX0ZJRUxEX1RZUEVTfSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5cbmNvbnN0IGRlZmF1bHRIZWFkZXJSb3dIZWlnaHQgPSA1NTtcbmNvbnN0IGRlZmF1bHRIZWFkZXJTdGF0c0NvbnRyb2xIZWlnaHQgPSA0MDtcbmNvbnN0IGRlZmF1bHRSb3dIZWlnaHQgPSAzMjtcbmNvbnN0IG92ZXJzY2FuQ29sdW1uQ291bnQgPSAxMDtcbmNvbnN0IG92ZXJzY2FuUm93Q291bnQgPSAxMDtcbi8vIFRoZSBkZWZhdWx0IHNjcm9sbGJhciB3aWR0aCBjYW4gcmFuZ2UgYW55d2hlcmUgZnJvbSAxMnB4IHRvIDE3cHhcbmNvbnN0IGJyb3dzZXJTY3JvbGxCYXJXaWR0aCA9IDE3O1xuY29uc3QgZmllbGRUb0FsaWduUmlnaHQgPSB7XG4gIFtBTExfRklFTERfVFlQRVMuaW50ZWdlcl06IHRydWUsXG4gIFtBTExfRklFTERfVFlQRVMucmVhbF06IHRydWVcbn07XG5cbmNvbnN0IHBpbm5lZENsYXNzTGlzdCA9IHtcbiAgaGVhZGVyOiAncGlubmVkLWNvbHVtbnMtLWhlYWRlciBwaW5uZWQtZ3JpZC1jb250YWluZXInLFxuICByb3dzOiAncGlubmVkLWNvbHVtbnMtLXJvd3MgcGlubmVkLWdyaWQtY29udGFpbmVyJ1xufTtcblxuY29uc3QgdW5waW5uZWRDbGFzc0xpc3QgPSB7XG4gIGhlYWRlcjogJ3VucGlubmVkLWNvbHVtbnMtLWhlYWRlciB1bnBpbm5lZC1ncmlkLWNvbnRhaW5lcicsXG4gIHJvd3M6ICd1bnBpbm5lZC1jb2x1bW5zLS1yb3dzIHVucGlubmVkLWdyaWQtY29udGFpbmVyJ1xufTtcblxudHlwZSBDb250YWluZXJQcm9wcyA9IHtcbiAgaGFzQ3VzdG9tU2Nyb2xsQmFyU3R5bGU/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNvbnN0IENvbnRhaW5lciA9IHN0eWxlZC5kaXY8Q29udGFpbmVyUHJvcHM+YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmb250LXNpemU6IDExcHg7XG4gIGZsZXgtZ3JvdzogMTtcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZGF0YVRhYmxlVGV4dENvbG9yfTtcbiAgd2lkdGg6IDEwMCU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgLlJlYWN0VmlydHVhbGl6ZWRfX0dyaWQ6Zm9jdXMsXG4gIC5SZWFjdFZpcnR1YWxpemVkX19HcmlkOmFjdGl2ZSB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxuICAuYm9keS1ncmlkIHtcbiAgICAke3Byb3BzID0+IHByb3BzLmhhc0N1c3RvbVNjcm9sbEJhclN0eWxlICYmIHByb3BzLnRoZW1lLm1vZGFsU2Nyb2xsQmFyfVxuICB9XG5cbiAgLmNlbGwge1xuICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgKjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxuXG4gIC5yZXN1bHRzLXRhYmxlLXdyYXBwZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBtaW4taGVpZ2h0OiAxMDAlO1xuICAgIG1heC1oZWlnaHQ6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIGZsZXgtZ3JvdzogMTtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgLnNjcm9sbC1pbi11aS10aHJlYWQucGlubmVkLWNvbHVtbnMtLWhlYWRlciB7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuY2VsbEJvcmRlckNvbG9yfTtcbiAgICAgIHBhZGRpbmctYm90dG9tOiAke2Jyb3dzZXJTY3JvbGxCYXJXaWR0aH1weDtcbiAgICB9XG4gICAgLnNjcm9sbC1pbi11aS10aHJlYWQudW5waW5uZWQtY29sdW1ucy0taGVhZGVyIHtcbiAgICAgIHdpZHRoOiAxMDB2dztcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5jZWxsQm9yZGVyQ29sb3J9O1xuICAgICAgLy8gbGVhdmUgcm9vbSBmb3Igc2Nyb2xsYmFyXG4gICAgICBwYWRkaW5nLWJvdHRvbTogJHticm93c2VyU2Nyb2xsQmFyV2lkdGh9cHg7XG4gICAgfVxuXG4gICAgLnNjcm9sbC1pbi11aS10aHJlYWQ6OmFmdGVyIHtcbiAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgdG9wOiAwO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgfVxuXG4gICAgLmdyaWQtcm93IHtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgIH1cbiAgICAuZ3JpZC1jb2x1bW4ge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG4gICAgLnBpbm5lZC1ncmlkLWNvbnRhaW5lciB7XG4gICAgICBmbGV4OiAwIDAgNzVweDtcbiAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgbGVmdDogMDtcbiAgICAgIHRvcDogMDtcbiAgICAgIGJvcmRlci1yaWdodDogMnB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUucGlubmVkR3JpZEJvcmRlckNvbG9yfTtcbiAgICB9XG4gICAgLmV2ZW4tcm93IHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZXZlblJvd0JhY2tncm91bmR9O1xuICAgIH1cbiAgICAub2RkLXJvdyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLm9kZFJvd0JhY2tncm91bmR9O1xuICAgIH1cbiAgICAuY2VsbCxcbiAgICAuaGVhZGVyLWNlbGwge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgLy8gaGVhZGVyIGJvcmRlciBpcyByZW5kZXJlZCBieSBoZWFkZXIgY29udGFpbmVyXG4gICAgICBib3JkZXItYm90dG9tOiAwO1xuICAgICAgLm4tc29ydC1pZHgge1xuICAgICAgICBmb250LXNpemU6IDlweDtcbiAgICAgIH1cbiAgICB9XG4gICAgLmNlbGwge1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuY2VsbEJvcmRlckNvbG9yfTtcbiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuY2VsbEJvcmRlckNvbG9yfTtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgIHBhZGRpbmc6IDAgJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5jZWxsUGFkZGluZ1NpZGV9cHg7XG4gICAgICBmb250LXNpemU6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuY2VsbEZvbnRTaXplfXB4O1xuXG4gICAgICAucmVzdWx0LWxpbmsge1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICB9XG4gICAgfVxuICAgIC5jZWxsLmVuZC1jZWxsLFxuICAgIC5oZWFkZXItY2VsbC5lbmQtY2VsbCB7XG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmNlbGxQYWRkaW5nU2lkZSArIHByb3BzLnRoZW1lLmVkZ2VDZWxsUGFkZGluZ1NpZGV9cHg7XG4gICAgfVxuICAgIC5jZWxsLmZpcnN0LWNlbGwsXG4gICAgLmhlYWRlci1jZWxsLmZpcnN0LWNlbGwge1xuICAgICAgcGFkZGluZy1sZWZ0OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmNlbGxQYWRkaW5nU2lkZSArIHByb3BzLnRoZW1lLmVkZ2VDZWxsUGFkZGluZ1NpZGV9cHg7XG4gICAgfVxuICAgIC5jZWxsLmJvdHRvbS1jZWxsIHtcbiAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgfVxuICAgIC5jZWxsLmFsaWduLXJpZ2h0IHtcbiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICB9XG4gIH1cblxuICA6Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH1cbmA7XG5cbmNvbnN0IGRlZmF1bHRDb2x1bW5XaWR0aCA9IDIwMDtcblxuZXhwb3J0IHR5cGUgU29ydENvbHVtbiA9IHtcbiAgY29sdW1uPzogc3RyaW5nO1xuICBtb2RlPzogc3RyaW5nO1xufTtcblxuY29uc3QgY29sdW1uV2lkdGhGdW5jdGlvbiA9IChjb2x1bW5zLCBjZWxsU2l6ZUNhY2hlLCBnaG9zdD8pID0+ICh7aW5kZXh9KSA9PiB7XG4gIHJldHVybiAoY29sdW1uc1tpbmRleF0gfHwge30pLmdob3N0ID8gZ2hvc3QgOiBjZWxsU2l6ZUNhY2hlW2NvbHVtbnNbaW5kZXhdXSB8fCBkZWZhdWx0Q29sdW1uV2lkdGg7XG59O1xuXG5pbnRlcmZhY2UgR2V0Um93Q2VsbFByb3BzIHtcbiAgZGF0YUNvbnRhaW5lcjogRGF0YUNvbnRhaW5lckludGVyZmFjZTtcbiAgY29sdW1uczogKHN0cmluZyAmIHtnaG9zdD86IGJvb2xlYW59KVtdO1xuICBjb2x1bW46IHN0cmluZztcbiAgY29sTWV0YTtcbiAgcm93SW5kZXg6IG51bWJlcjtcbiAgc29ydE9yZGVyPzogbnVtYmVyW10gfCBudWxsO1xufVxuXG4vKlxuICogVGhpcyBpcyBhbiBhY2Nlc3NvciBtZXRob2QgdXNlZCB0byBnZW5lcmFsaXplIGdldHRpbmcgYSBjZWxsIGZyb20gYSBkYXRhIHJvd1xuICovXG5jb25zdCBkZWZhdWx0R2V0Um93Q2VsbCA9IChcbiAge2RhdGFDb250YWluZXIsIGNvbHVtbnMsIGNvbHVtbiwgY29sTWV0YSwgcm93SW5kZXgsIHNvcnRPcmRlcn06IEdldFJvd0NlbGxQcm9wcyxcbiAgZm9ybWF0dGVyXG4pID0+IHtcbiAgY29uc3Qgcm93SWR4ID0gc29ydE9yZGVyICYmIHNvcnRPcmRlci5sZW5ndGggPyBnZXQoc29ydE9yZGVyLCByb3dJbmRleCkgOiByb3dJbmRleDtcbiAgY29uc3Qge3R5cGV9ID0gY29sTWV0YVtjb2x1bW5dO1xuXG4gIGNvbnN0IHZhbHVlID0gZGF0YUNvbnRhaW5lci52YWx1ZUF0KHJvd0lkeCwgY29sdW1ucy5pbmRleE9mKGNvbHVtbikpO1xuICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gJydcbiAgICA/ICcnXG4gICAgOiBmb3JtYXR0ZXJcbiAgICA/IGZvcm1hdHRlcih2YWx1ZSlcbiAgICA6IHBhcnNlRmllbGRWYWx1ZSh2YWx1ZSwgdHlwZSk7XG59O1xuXG50eXBlIFN0YXRzQ29udHJvbFByb3BzID0ge1xuICB0b3A6IG51bWJlcjtcbiAgc2hvd1N0YXRzPzogYm9vbGVhbjtcbn07XG5cbmNvbnN0IFN0eWxlZFN0YXRzQ29udHJvbCA9IHN0eWxlZC5kaXY8U3RhdHNDb250cm9sUHJvcHM+YFxuICBoZWlnaHQ6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuaGVhZGVyU3RhdHNDb250cm9sSGVpZ2h0fXB4O1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogJHtwcm9wcyA9PiBwcm9wcy50b3B9cHg7XG4gIGZvbnQtZmFtaWx5OiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmZvbnRGYW1pbHlNZWRpdW19cHg7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuYWN0aXZlQ29sb3J9O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmhlYWRlckNlbGxTdGF0c0NvbnRyb2xCYWNrZ3JvdW5kfTtcbiAgOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuICA+IGRpdiB7XG4gICAgcGFkZGluZzogMHB4IDI0cHg7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuXG4gICAgc3ZnIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuNXMgZWFzZTtcbiAgICAgIHRyYW5zZm9ybTogcm90YXRlKCR7cHJvcHMgPT4gKHByb3BzLnNob3dTdGF0cyA/IDE4MCA6IDApfWRlZyk7XG4gICAgfVxuICB9XG5gO1xuXG5jb25zdCBTdGF0c0NvbnRyb2wgPSAoe1xuICB0b3AsXG4gIHNob3dTdGF0cyxcbiAgdG9nZ2xlU2hvd1N0YXRzXG59OiB7XG4gIHRvcDogbnVtYmVyO1xuICBzaG93U3RhdHM/OiBib29sZWFuO1xuICB0b2dnbGVTaG93U3RhdHM6ICgpID0+IHZvaWQ7XG59KSA9PiAoXG4gIDxTdHlsZWRTdGF0c0NvbnRyb2wgdG9wPXt0b3B9IHNob3dTdGF0cz17c2hvd1N0YXRzfT5cbiAgICA8ZGl2IG9uQ2xpY2s9e3RvZ2dsZVNob3dTdGF0c30+XG4gICAgICB7c2hvd1N0YXRzID8gJ0hpZGUgQ29sdW1uIFN0YXRzJyA6ICdTaG93IENvbHVtbiBTdGF0cyd9XG4gICAgICA8QXJyb3dEb3duIGhlaWdodD1cIjE4cHhcIiAvPlxuICAgIDwvZGl2PlxuICA8L1N0eWxlZFN0YXRzQ29udHJvbD5cbik7XG5cbmludGVyZmFjZSBUYWJsZVNlY3Rpb25Qcm9wcyB7XG4gIGNsYXNzTGlzdD86IHtcbiAgICBoZWFkZXI6IHN0cmluZztcbiAgICByb3dzOiBzdHJpbmc7XG4gIH07XG4gIGlzUGlubmVkPzogYm9vbGVhbjtcbiAgY29sdW1uczogKHN0cmluZyAmIHtnaG9zdD86IGJvb2xlYW59KVtdO1xuICBoZWFkZXJHcmlkUHJvcHM/O1xuICBmaXhlZFdpZHRoPzogbnVtYmVyO1xuICBmaXhlZEhlaWdodD86IG51bWJlcjtcbiAgb25TY3JvbGw/OiAocGFyYW1zOiBPblNjcm9sbFBhcmFtcykgPT4gdm9pZDtcbiAgc2Nyb2xsVG9wPzogbnVtYmVyO1xuICBkYXRhR3JpZFByb3BzOiB7XG4gICAgcm93SGVpZ2h0OiBudW1iZXIgfCAoKHBhcmFtczogSW5kZXgpID0+IG51bWJlcik7XG4gICAgcm93Q291bnQ6IG51bWJlcjtcbiAgfSAmIFBhcnRpYWw8R3JpZFByb3BzPjtcbiAgY29sdW1uV2lkdGg/O1xuICBzZXRHcmlkUmVmPzogRnVuY3Rpb247XG4gIGhlYWRlckNlbGxSZW5kZXI/O1xuICBkYXRhQ2VsbFJlbmRlcj87XG4gIHNjcm9sbExlZnQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBUYWJsZVNlY3Rpb24gPSAoe1xuICBjbGFzc0xpc3QsXG4gIGlzUGlubmVkLFxuICBjb2x1bW5zLFxuICBoZWFkZXJHcmlkUHJvcHMsXG4gIGZpeGVkV2lkdGgsXG4gIGZpeGVkSGVpZ2h0ID0gdW5kZWZpbmVkLFxuICBvblNjcm9sbCxcbiAgc2Nyb2xsVG9wLFxuICBkYXRhR3JpZFByb3BzLFxuICBjb2x1bW5XaWR0aCxcbiAgc2V0R3JpZFJlZiA9IHVuZGVmaW5lZCxcbiAgaGVhZGVyQ2VsbFJlbmRlcixcbiAgZGF0YUNlbGxSZW5kZXIsXG4gIHNjcm9sbExlZnQgPSAwXG59OiBUYWJsZVNlY3Rpb25Qcm9wcykgPT4ge1xuICBjb25zdCBoZWFkZXJIZWlnaHQgPSBoZWFkZXJHcmlkUHJvcHMuaGVpZ2h0O1xuXG4gIGNvbnN0IGhlYWRlclN0eWxlID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgaGVpZ2h0OiBgJHtoZWFkZXJIZWlnaHR9cHhgXG4gICAgfSksXG4gICAgW2hlYWRlckhlaWdodF1cbiAgKTtcbiAgY29uc3QgY29udGVudFN0eWxlID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgdG9wOiBgJHtoZWFkZXJIZWlnaHR9cHhgXG4gICAgfSksXG4gICAgW2hlYWRlckhlaWdodF1cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxBdXRvU2l6ZXI+XG4gICAgICB7KHt3aWR0aCwgaGVpZ2h0fSkgPT4ge1xuICAgICAgICBjb25zdCBncmlkRGltZW5zaW9uID0ge1xuICAgICAgICAgIGNvbHVtbkNvdW50OiBjb2x1bW5zLmxlbmd0aCxcbiAgICAgICAgICBjb2x1bW5XaWR0aCxcbiAgICAgICAgICB3aWR0aDogZml4ZWRXaWR0aCB8fCB3aWR0aFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoZWFkZXJHcmlkV2lkdGggPSBmaXhlZFdpZHRoIHx8IHdpZHRoIC0gYnJvd3NlclNjcm9sbEJhcldpZHRoO1xuICAgICAgICBjb25zdCBkYXRhR3JpZEhlaWdodCA9IGZpeGVkSGVpZ2h0IHx8IGhlaWdodDtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnc2Nyb2xsLWluLXVpLXRocmVhZCcsIGNsYXNzTGlzdD8uaGVhZGVyKX1cbiAgICAgICAgICAgICAgc3R5bGU9e2hlYWRlclN0eWxlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8R3JpZFxuICAgICAgICAgICAgICAgIGNlbGxSZW5kZXJlcj17aGVhZGVyQ2VsbFJlbmRlcn1cbiAgICAgICAgICAgICAgICB7Li4uaGVhZGVyR3JpZFByb3BzfVxuICAgICAgICAgICAgICAgIHsuLi5ncmlkRGltZW5zaW9ufVxuICAgICAgICAgICAgICAgIGhlaWdodD17aGVhZGVyR3JpZFByb3BzLmhlaWdodCArIGJyb3dzZXJTY3JvbGxCYXJXaWR0aH1cbiAgICAgICAgICAgICAgICB3aWR0aD17aGVhZGVyR3JpZFdpZHRofVxuICAgICAgICAgICAgICAgIHNjcm9sbExlZnQ9e3Njcm9sbExlZnR9XG4gICAgICAgICAgICAgICAgb25TY3JvbGw9e29uU2Nyb2xsfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnc2Nyb2xsLWluLXVpLXRocmVhZCcsIGNsYXNzTGlzdD8ucm93cyl9XG4gICAgICAgICAgICAgIHN0eWxlPXtjb250ZW50U3R5bGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxHcmlkXG4gICAgICAgICAgICAgICAgY2VsbFJlbmRlcmVyPXtkYXRhQ2VsbFJlbmRlcn1cbiAgICAgICAgICAgICAgICB7Li4uZGF0YUdyaWRQcm9wc31cbiAgICAgICAgICAgICAgICB7Li4uZ3JpZERpbWVuc2lvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2lzUGlubmVkID8gJ3Bpbm5lZC1ncmlkJyA6ICdib2R5LWdyaWQnfVxuICAgICAgICAgICAgICAgIGhlaWdodD17ZGF0YUdyaWRIZWlnaHQgLSBoZWFkZXJHcmlkUHJvcHMuaGVpZ2h0fVxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsPXtvblNjcm9sbH1cbiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0PXtzY3JvbGxMZWZ0fVxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcD17c2Nyb2xsVG9wfVxuICAgICAgICAgICAgICAgIHNldEdyaWRSZWY9e3NldEdyaWRSZWZ9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKTtcbiAgICAgIH19XG4gICAgPC9BdXRvU2l6ZXI+XG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFUYWJsZVByb3BzIHtcbiAgZGF0YUlkPzogc3RyaW5nO1xuICBoYXNTdGF0cz86IGJvb2xlYW47XG4gIGNlbGxTaXplQ2FjaGU/OiBDZWxsU2l6ZUNhY2hlO1xuICBwaW5uZWRDb2x1bW5zPzogc3RyaW5nW107XG4gIGNvbHVtbnM6IChzdHJpbmcgJiB7Z2hvc3Q/OiBib29sZWFufSlbXTtcbiAgZml4ZWRXaWR0aD86IG51bWJlcjtcbiAgdGhlbWU/OiBhbnk7XG4gIGRhdGFDb250YWluZXI6IERhdGFDb250YWluZXJJbnRlcmZhY2U7XG4gIGZpeGVkSGVpZ2h0PzogbnVtYmVyO1xuICBjb2xNZXRhOiBDb2xNZXRhO1xuICBzb3J0Q29sdW1uOiBTb3J0Q29sdW1uO1xuICBzb3J0VGFibGVDb2x1bW46IChjb2x1bW46IHN0cmluZywgbW9kZT86IHN0cmluZykgPT4gdm9pZDtcbiAgcGluVGFibGVDb2x1bW46IChjb2x1bW46IHN0cmluZykgPT4gdm9pZDtcbiAgc2V0Q29sdW1uRGlzcGxheUZvcm1hdDogKGZvcm1hdHM6IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9KSA9PiB2b2lkO1xuICBjb3B5VGFibGVDb2x1bW46IChjb2x1bW46IHN0cmluZykgPT4gdm9pZDtcbiAgc29ydE9yZGVyPzogbnVtYmVyW10gfCBudWxsO1xuICBzaG93U3RhdHM/OiBib29sZWFuO1xuICBoYXNDdXN0b21TY3JvbGxCYXJTdHlsZT86IGJvb2xlYW47XG4gIGdldFJvd0NlbGw/OiAocmVuZGVyRGF0YUNlbGxQcm9wczogR2V0Um93Q2VsbFByb3BzLCBmb3JtYXR0ZXI6IGFueSkgPT4gc3RyaW5nIHwgbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgRGF0YVRhYmxlU3RhdGUge1xuICBjZWxsU2l6ZUNhY2hlPzogQ2VsbFNpemVDYWNoZTtcbiAgbW9yZU9wdGlvbnNDb2x1bW4/O1xuICBnaG9zdD87XG4gIHNob3dTdGF0cz86IGJvb2xlYW47XG59XG5cbkRhdGFUYWJsZUZhY3RvcnkuZGVwcyA9IFtIZWFkZXJDZWxsRmFjdG9yeV07XG5mdW5jdGlvbiBEYXRhVGFibGVGYWN0b3J5KEhlYWRlckNlbGw6IFJldHVyblR5cGU8dHlwZW9mIEhlYWRlckNlbGxGYWN0b3J5Pikge1xuICBjbGFzcyBEYXRhVGFibGUgZXh0ZW5kcyBDb21wb25lbnQ8RGF0YVRhYmxlUHJvcHMsIERhdGFUYWJsZVN0YXRlPiB7XG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgIGRhdGFDb250YWluZXI6IG51bGwsXG4gICAgICBwaW5uZWRDb2x1bW5zOiBbXSxcbiAgICAgIGNvbE1ldGE6IHt9LFxuICAgICAgY2VsbFNpemVDYWNoZToge30sXG4gICAgICBzb3J0Q29sdW1uOiB7fSxcbiAgICAgIGZpeGVkV2lkdGg6IG51bGwsXG4gICAgICBmaXhlZEhlaWdodDogbnVsbCxcbiAgICAgIHRoZW1lOiB7fSxcbiAgICAgIGhhc1N0YXRzOiBmYWxzZSxcbiAgICAgIGhhc0N1c3RvbVNjcm9sbEJhclN0eWxlOiB0cnVlXG4gICAgfTtcblxuICAgIHBpbm5lZEdyaWQgPSBmYWxzZTtcbiAgICB1bnBpbm5lZEdyaWQgPSBmYWxzZTtcblxuICAgIHN0YXRlOiBEYXRhVGFibGVTdGF0ZSA9IHtcbiAgICAgIGNlbGxTaXplQ2FjaGU6IHt9LFxuICAgICAgbW9yZU9wdGlvbnNDb2x1bW46IG51bGwsXG4gICAgICBzaG93U3RhdHM6IHRydWVcbiAgICB9O1xuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY2FsZUNlbGxzVG9XaWR0aCk7XG4gICAgICB0aGlzLnNjYWxlQ2VsbHNUb1dpZHRoKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnByb3BzLmNlbGxTaXplQ2FjaGUgIT09IHByZXZQcm9wcy5jZWxsU2l6ZUNhY2hlIHx8XG4gICAgICAgIHRoaXMucHJvcHMucGlubmVkQ29sdW1ucyAhPT0gcHJldlByb3BzLnBpbm5lZENvbHVtbnNcbiAgICAgICkge1xuICAgICAgICB0aGlzLnNjYWxlQ2VsbHNUb1dpZHRoKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zY2FsZUNlbGxzVG9XaWR0aCk7XG4gICAgICAvLyBmaXggV2FybmluZzogQ2FuJ3QgcGVyZm9ybSBhIFJlYWN0IHN0YXRlIHVwZGF0ZSBvbiBhbiB1bm1vdW50ZWQgY29tcG9uZW50XG4gICAgICB0aGlzLnNldFN0YXRlID0gKCkgPT4ge1xuICAgICAgICByZXR1cm47XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJvb3QgPSBjcmVhdGVSZWY8SFRNTERpdkVsZW1lbnQ+KCk7XG4gICAgY29sdW1ucyA9IChwcm9wczogRGF0YVRhYmxlUHJvcHMpID0+IHByb3BzLmNvbHVtbnM7XG4gICAgcGlubmVkQ29sdW1ucyA9IChwcm9wczogRGF0YVRhYmxlUHJvcHMpID0+IHByb3BzLnBpbm5lZENvbHVtbnM7XG4gICAgdW5waW5uZWRDb2x1bW5zID0gY3JlYXRlU2VsZWN0b3IodGhpcy5jb2x1bW5zLCB0aGlzLnBpbm5lZENvbHVtbnMsIChjb2x1bW5zLCBwaW5uZWRDb2x1bW5zKSA9PlxuICAgICAgIUFycmF5LmlzQXJyYXkocGlubmVkQ29sdW1ucykgPyBjb2x1bW5zIDogY29sdW1ucy5maWx0ZXIoYyA9PiAhcGlubmVkQ29sdW1ucy5pbmNsdWRlcyhjKSlcbiAgICApO1xuXG4gICAgdG9nZ2xlTW9yZU9wdGlvbnMgPSBtb3JlT3B0aW9uc0NvbHVtbiA9PlxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG1vcmVPcHRpb25zQ29sdW1uOlxuICAgICAgICAgIHRoaXMuc3RhdGUubW9yZU9wdGlvbnNDb2x1bW4gPT09IG1vcmVPcHRpb25zQ29sdW1uID8gbnVsbCA6IG1vcmVPcHRpb25zQ29sdW1uXG4gICAgICB9KTtcbiAgICB0b2dnbGVTaG93U3RhdHMgPSAoKSA9PiB0aGlzLnNldFN0YXRlKHtzaG93U3RhdHM6ICF0aGlzLnN0YXRlLnNob3dTdGF0c30pO1xuICAgIGdldENlbGxTaXplQ2FjaGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbFNpemVDYWNoZTogcHJvcHNDYWNoZSA9IHt9LCBmaXhlZFdpZHRoLCBwaW5uZWRDb2x1bW5zID0gW119ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHVucGlubmVkQ29sdW1ucyA9IHRoaXMudW5waW5uZWRDb2x1bW5zKHRoaXMucHJvcHMpO1xuXG4gICAgICBjb25zdCB3aWR0aCA9IGZpeGVkV2lkdGggPyBmaXhlZFdpZHRoIDogdGhpcy5yb290LmN1cnJlbnQgPyB0aGlzLnJvb3QuY3VycmVudC5jbGllbnRXaWR0aCA6IDA7XG5cbiAgICAgIC8vIHBpbiBjb2x1bW4gYm9yZGVyIGlzIDIgcGl4ZWwgdnMgMSBwaXhlbFxuICAgICAgY29uc3QgYWRqdXN0V2lkdGggPSBwaW5uZWRDb2x1bW5zLmxlbmd0aCA/IHdpZHRoIC0gMSA6IHdpZHRoO1xuICAgICAgY29uc3Qge2NlbGxTaXplQ2FjaGUsIGdob3N0fSA9IGFkanVzdENlbGxzVG9Db250YWluZXIoXG4gICAgICAgIGFkanVzdFdpZHRoLFxuICAgICAgICBwcm9wc0NhY2hlLFxuICAgICAgICBwaW5uZWRDb2x1bW5zLFxuICAgICAgICB1bnBpbm5lZENvbHVtbnNcbiAgICAgICkgYXMge2NlbGxTaXplQ2FjaGU6IHt9OyBnaG9zdDogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNlbGxTaXplQ2FjaGUsXG4gICAgICAgIGdob3N0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBkb1NjYWxlQ2VsbHNUb1dpZHRoID0gKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldENlbGxTaXplQ2FjaGUoKSk7XG4gICAgfTtcblxuICAgIHNjYWxlQ2VsbHNUb1dpZHRoID0gZGVib3VuY2UodGhpcy5kb1NjYWxlQ2VsbHNUb1dpZHRoLCAzMDApO1xuXG4gICAgcmVuZGVyRGF0YUNlbGwgPSAoY29sdW1ucywgaXNQaW5uZWQsIHByb3BzOiBEYXRhVGFibGVQcm9wcykgPT4ge1xuICAgICAgY29uc3QgZ2V0Um93Q2VsbCA9IHRoaXMucHJvcHMuZ2V0Um93Q2VsbCA/PyBkZWZhdWx0R2V0Um93Q2VsbDtcbiAgICAgIHJldHVybiBjZWxsSW5mbyA9PiB7XG4gICAgICAgIGNvbnN0IHtjb2x1bW5JbmRleCwga2V5LCBzdHlsZSwgcm93SW5kZXh9ID0gY2VsbEluZm87XG4gICAgICAgIGNvbnN0IHtkYXRhQ29udGFpbmVyLCBjb2xNZXRhfSA9IHByb3BzO1xuICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2NvbHVtbkluZGV4XTtcbiAgICAgICAgY29uc3QgaXNHaG9zdCA9IGNvbHVtbi5naG9zdDtcblxuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBpc0dob3N0ID8gbnVsbCA6IGdldENvbHVtbkZvcm1hdHRlcihjb2xNZXRhW2NvbHVtbl0pO1xuICAgICAgICBjb25zdCByb3dDZWxsID0gaXNHaG9zdCA/ICcnIDogZ2V0Um93Q2VsbCh7Li4ucHJvcHMsIGNvbHVtbiwgcm93SW5kZXh9LCBmb3JtYXR0ZXIpO1xuICAgICAgICBjb25zdCB0eXBlID0gaXNHaG9zdCA/IG51bGwgOiBjb2xNZXRhW2NvbHVtbl0udHlwZTtcblxuICAgICAgICBjb25zdCBsYXN0Um93SW5kZXggPSBkYXRhQ29udGFpbmVyID8gZGF0YUNvbnRhaW5lci5udW1Sb3dzKCkgLSAxIDogMDtcblxuICAgICAgICBjb25zdCBlbmRDZWxsID0gY29sdW1uSW5kZXggPT09IGNvbHVtbnMubGVuZ3RoIC0gMTtcbiAgICAgICAgY29uc3QgZmlyc3RDZWxsID0gY29sdW1uSW5kZXggPT09IDA7XG4gICAgICAgIGNvbnN0IGJvdHRvbUNlbGwgPSByb3dJbmRleCA9PT0gbGFzdFJvd0luZGV4O1xuICAgICAgICBjb25zdCBhbGlnblJpZ2h0ID0gZmllbGRUb0FsaWduUmlnaHRbTnVtYmVyKHR5cGUpXTtcblxuICAgICAgICBjb25zdCBjZWxsID0gKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygnY2VsbCcsIHtcbiAgICAgICAgICAgICAgW3Jvd0luZGV4ICUgMiA9PT0gMCA/ICdldmVuLXJvdycgOiAnb2RkLXJvdyddOiB0cnVlLFxuICAgICAgICAgICAgICBbYHJvdy0ke3Jvd0luZGV4fWBdOiB0cnVlLFxuICAgICAgICAgICAgICAncGlubmVkLWNlbGwnOiBpc1Bpbm5lZCxcbiAgICAgICAgICAgICAgJ2ZpcnN0LWNlbGwnOiBmaXJzdENlbGwsXG4gICAgICAgICAgICAgICdlbmQtY2VsbCc6IGVuZENlbGwsXG4gICAgICAgICAgICAgICdib3R0b20tY2VsbCc6IGJvdHRvbUNlbGwsXG4gICAgICAgICAgICAgICdhbGlnbi1yaWdodCc6IGFsaWduUmlnaHRcbiAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAga2V5PXtrZXl9XG4gICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICB0aXRsZT17aXNHaG9zdCA/IHVuZGVmaW5lZCA6IHJvd0NlbGx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2Ake3Jvd0NlbGx9JHtlbmRDZWxsID8gJ1xcbicgOiAnXFx0J31gfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBjZWxsO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcmVuZGVySGVhZGVyQ2VsbChjb2x1bW5zLCBpc1Bpbm5lZCwgcHJvcHMsIHRvZ2dsZU1vcmVPcHRpb25zLCBtb3JlT3B0aW9uc0NvbHVtbikge1xuICAgICAgcmV0dXJuIGNlbGxJbmZvID0+IChcbiAgICAgICAgPEhlYWRlckNlbGxcbiAgICAgICAgICBjZWxsSW5mbz17Y2VsbEluZm99XG4gICAgICAgICAga2V5PXtjZWxsSW5mby5jb2x1bW5JbmRleH1cbiAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICAgIGlzUGlubmVkPXtpc1Bpbm5lZH1cbiAgICAgICAgICBzaG93U3RhdHM9e3RoaXMuc3RhdGUuc2hvd1N0YXRzfVxuICAgICAgICAgIHByb3BzPXtwcm9wc31cbiAgICAgICAgICB0b2dnbGVNb3JlT3B0aW9ucz17dG9nZ2xlTW9yZU9wdGlvbnN9XG4gICAgICAgICAgbW9yZU9wdGlvbnNDb2x1bW49e21vcmVPcHRpb25zQ29sdW1ufVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBkYXRhQ29udGFpbmVyLFxuICAgICAgICBwaW5uZWRDb2x1bW5zID0gW10sXG4gICAgICAgIHRoZW1lID0ge30sXG4gICAgICAgIGZpeGVkV2lkdGgsXG4gICAgICAgIGZpeGVkSGVpZ2h0ID0gMCxcbiAgICAgICAgaGFzU3RhdHMsXG4gICAgICAgIGhhc0N1c3RvbVNjcm9sbEJhclN0eWxlXG4gICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IHVucGlubmVkQ29sdW1ucyA9IHRoaXMudW5waW5uZWRDb2x1bW5zKHRoaXMucHJvcHMpO1xuXG4gICAgICBjb25zdCB7Y2VsbFNpemVDYWNoZSA9IHt9LCBtb3JlT3B0aW9uc0NvbHVtbiwgZ2hvc3QsIHNob3dTdGF0c30gPSB0aGlzLnN0YXRlO1xuICAgICAgY29uc3QgdW5waW5uZWRDb2x1bW5zR2hvc3QgPSBnaG9zdFxuICAgICAgICA/IFsuLi51bnBpbm5lZENvbHVtbnMsIHtnaG9zdDogdHJ1ZX0gYXMgc3RyaW5nICYge2dob3N0OiBib29sZWFufV1cbiAgICAgICAgOiB1bnBpbm5lZENvbHVtbnM7XG4gICAgICBjb25zdCBwaW5uZWRDb2x1bW5zV2lkdGggPSBwaW5uZWRDb2x1bW5zLnJlZHVjZShcbiAgICAgICAgKGFjYywgdmFsKSA9PiBhY2MgKyAoZ2V0KGNlbGxTaXplQ2FjaGUsIHZhbCwgMCkgYXMgbnVtYmVyKSxcbiAgICAgICAgMFxuICAgICAgKTtcblxuICAgICAgY29uc3QgaGFzUGlubmVkQ29sdW1ucyA9IEJvb2xlYW4ocGlubmVkQ29sdW1ucy5sZW5ndGgpO1xuICAgICAgY29uc3Qge1xuICAgICAgICBoZWFkZXJSb3dIZWlnaHQgPSBkZWZhdWx0SGVhZGVyUm93SGVpZ2h0LFxuICAgICAgICBoZWFkZXJTdGF0c0NvbnRyb2xIZWlnaHQgPSBkZWZhdWx0SGVhZGVyU3RhdHNDb250cm9sSGVpZ2h0LFxuICAgICAgICBoZWFkZXJSb3dXU3RhdHNIZWlnaHQgPSBkZWZhdWx0SGVhZGVyUm93SGVpZ2h0LFxuICAgICAgICByb3dIZWlnaHQgPSBkZWZhdWx0Um93SGVpZ2h0XG4gICAgICB9ID0gdGhlbWU7XG5cbiAgICAgIGNvbnN0IGhlYWRlckdyaWRQcm9wcyA9IHtcbiAgICAgICAgY2VsbFNpemVDYWNoZSxcbiAgICAgICAgY2xhc3NOYW1lOiAnaGVhZGVyLWdyaWQnLFxuICAgICAgICBoZWlnaHQ6ICFoYXNTdGF0c1xuICAgICAgICAgID8gaGVhZGVyUm93SGVpZ2h0XG4gICAgICAgICAgOiBzaG93U3RhdHNcbiAgICAgICAgICA/IGhlYWRlclJvd1dTdGF0c0hlaWdodFxuICAgICAgICAgIDogaGVhZGVyUm93SGVpZ2h0ICsgaGVhZGVyU3RhdHNDb250cm9sSGVpZ2h0LFxuICAgICAgICByb3dDb3VudDogMSxcbiAgICAgICAgcm93SGVpZ2h0OiAhaGFzU3RhdHNcbiAgICAgICAgICA/IGhlYWRlclJvd0hlaWdodFxuICAgICAgICAgIDogc2hvd1N0YXRzXG4gICAgICAgICAgPyBoZWFkZXJSb3dXU3RhdHNIZWlnaHRcbiAgICAgICAgICA6IGhlYWRlclJvd0hlaWdodCArIGhlYWRlclN0YXRzQ29udHJvbEhlaWdodFxuICAgICAgfTtcblxuICAgICAgY29uc3QgZGF0YUdyaWRQcm9wcyA9IHtcbiAgICAgICAgY2VsbFNpemVDYWNoZSxcbiAgICAgICAgb3ZlcnNjYW5Db2x1bW5Db3VudCxcbiAgICAgICAgb3ZlcnNjYW5Sb3dDb3VudCxcbiAgICAgICAgcm93Q291bnQ6IGRhdGFDb250YWluZXIgPyBkYXRhQ29udGFpbmVyLm51bVJvd3MoKSA6IDAsXG4gICAgICAgIHJvd0hlaWdodFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPENvbnRhaW5lclxuICAgICAgICAgIGNsYXNzTmFtZT1cImRhdGEtdGFibGUtY29udGFpbmVyXCJcbiAgICAgICAgICByZWY9e3RoaXMucm9vdH1cbiAgICAgICAgICBoYXNDdXN0b21TY3JvbGxCYXJTdHlsZT17aGFzQ3VzdG9tU2Nyb2xsQmFyU3R5bGV9XG4gICAgICAgID5cbiAgICAgICAgICB7T2JqZWN0LmtleXMoY2VsbFNpemVDYWNoZSkubGVuZ3RoID8gKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPFNjcm9sbFN5bmM+XG4gICAgICAgICAgICAgICAgeyh7b25TY3JvbGwsIHNjcm9sbExlZnQsIHNjcm9sbFRvcH0pID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVzdWx0cy10YWJsZS13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAge2hhc1Bpbm5lZENvbHVtbnMgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9XCJwaW5uZWQtY29sdW1uc1wiIGNsYXNzTmFtZT1cInBpbm5lZC1jb2x1bW5zIGdyaWQtcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0xpc3Q9e3Bpbm5lZENsYXNzTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Bpbm5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnM9e3Bpbm5lZENvbHVtbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyR3JpZFByb3BzPXtoZWFkZXJHcmlkUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZml4ZWRXaWR0aD17cGlubmVkQ29sdW1uc1dpZHRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2Nyb2xsPXthcmdzID0+IG9uU2Nyb2xsKHsuLi5hcmdzLCBzY3JvbGxMZWZ0fSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wPXtzY3JvbGxUb3B9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTGVmdD17c2Nyb2xsTGVmdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhR3JpZFByb3BzPXtkYXRhR3JpZFByb3BzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEdyaWRSZWY9e3Bpbm5lZEdyaWQgPT4gKHRoaXMucGlubmVkR3JpZCA9IHBpbm5lZEdyaWQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoPXtjb2x1bW5XaWR0aEZ1bmN0aW9uKHBpbm5lZENvbHVtbnMsIGNlbGxTaXplQ2FjaGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckNlbGxSZW5kZXI9e3RoaXMucmVuZGVySGVhZGVyQ2VsbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbm5lZENvbHVtbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTW9yZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlT3B0aW9uc0NvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNlbGxSZW5kZXI9e3RoaXMucmVuZGVyRGF0YUNlbGwocGlubmVkQ29sdW1ucywgdHJ1ZSwgdGhpcy5wcm9wcyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cInVucGlubmVkLWNvbHVtbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7aGFzUGlubmVkQ29sdW1ucyA/IGAke3Bpbm5lZENvbHVtbnNXaWR0aH1weGAgOiAnMCd9YFxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInVucGlubmVkLWNvbHVtbnMgZ3JpZC1jb2x1bW5cIlxuICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVNlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NMaXN0PXt1bnBpbm5lZENsYXNzTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNQaW5uZWQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zPXt1bnBpbm5lZENvbHVtbnNHaG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyR3JpZFByb3BzPXtoZWFkZXJHcmlkUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkV2lkdGg9e2ZpeGVkV2lkdGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpeGVkSGVpZ2h0PXtmaXhlZEhlaWdodH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25TY3JvbGw9e29uU2Nyb2xsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A9e3Njcm9sbFRvcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsTGVmdD17c2Nyb2xsTGVmdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUdyaWRQcm9wcz17ZGF0YUdyaWRQcm9wc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0R3JpZFJlZj17dW5waW5uZWRHcmlkID0+ICh0aGlzLnVucGlubmVkR3JpZCA9IHVucGlubmVkR3JpZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbldpZHRoPXtjb2x1bW5XaWR0aEZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucGlubmVkQ29sdW1uc0dob3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxTaXplQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2hvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQ2VsbFJlbmRlcj17dGhpcy5yZW5kZXJIZWFkZXJDZWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVucGlubmVkQ29sdW1uc0dob3N0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVNb3JlT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlT3B0aW9uc0NvbHVtblxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2VsbFJlbmRlcj17dGhpcy5yZW5kZXJEYXRhQ2VsbChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnBpbm5lZENvbHVtbnNHaG9zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPC9TY3JvbGxTeW5jPlxuICAgICAgICAgICAgICB7aGFzU3RhdHMgPyAoXG4gICAgICAgICAgICAgICAgPFN0YXRzQ29udHJvbFxuICAgICAgICAgICAgICAgICAgdG9wPXtoZWFkZXJSb3dIZWlnaHR9XG4gICAgICAgICAgICAgICAgICBzaG93U3RhdHM9e3Nob3dTdGF0c31cbiAgICAgICAgICAgICAgICAgIHRvZ2dsZVNob3dTdGF0cz17dGhpcy50b2dnbGVTaG93U3RhdHN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9Db250YWluZXI+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3aXRoVGhlbWUoRGF0YVRhYmxlKSBhcyBSZWFjdC5Db21wb25lbnRUeXBlPERhdGFUYWJsZVByb3BzPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGF0YVRhYmxlRmFjdG9yeTtcbiJdfQ==
{"version":3,"file":"tar-builder.js","names":["Tar","TAR_BUILDER_OPTIONS","recordsPerBlock","TARBuilder","properties","id","name","extensions","mimeType","builder","options","constructor","tape","count","addFile","buffer","filename","append","Uint8Array","build","Response","save","arrayBuffer"],"sources":["../../../../src/encoders/tar/tar-builder.js"],"sourcesContent":["import Tar from './tar';\n\nconst TAR_BUILDER_OPTIONS = {\n  recordsPerBlock: 20\n};\n\nexport default class TARBuilder {\n  /** @type {Tar} */\n  tape;\n  /** @type {number} */\n  count;\n\n  static get properties() {\n    return {\n      id: 'tar',\n      name: 'TAR',\n      extensions: ['tar'],\n      mimeType: 'application/x-tar',\n      builder: TARBuilder,\n      options: TAR_BUILDER_OPTIONS\n    };\n  }\n\n  /**\n   * @param {Partial<typeof TAR_BUILDER_OPTIONS>} options\n   */\n  constructor(options) {\n    this.options = {...TAR_BUILDER_OPTIONS, ...options};\n    this.tape = new Tar(this.options.recordsPerBlock);\n    this.count = 0;\n  }\n\n  /**\n   * @param {ArrayBuffer} buffer\n   * @param {string} filename\n   */\n  addFile(buffer, filename) {\n    this.tape.append(filename, new Uint8Array(buffer));\n    this.count++;\n  }\n\n  /**\n   * @returns {Promise<ArrayBuffer>}\n   */\n  async build() {\n    return new Response(this.tape.save()).arrayBuffer();\n  }\n}\n"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,OAAhB;AAEA,MAAMC,mBAAmB,GAAG;EAC1BC,eAAe,EAAE;AADS,CAA5B;AAIA,eAAe,MAAMC,UAAN,CAAiB;EAMT,WAAVC,UAAU,GAAG;IACtB,OAAO;MACLC,EAAE,EAAE,KADC;MAELC,IAAI,EAAE,KAFD;MAGLC,UAAU,EAAE,CAAC,KAAD,CAHP;MAILC,QAAQ,EAAE,mBAJL;MAKLC,OAAO,EAAEN,UALJ;MAMLO,OAAO,EAAET;IANJ,CAAP;EAQD;;EAKDU,WAAW,CAACD,OAAD,EAAU;IAAA;;IAAA;;IACnB,KAAKA,OAAL,GAAe,EAAC,GAAGT,mBAAJ;MAAyB,GAAGS;IAA5B,CAAf;IACA,KAAKE,IAAL,GAAY,IAAIZ,GAAJ,CAAQ,KAAKU,OAAL,CAAaR,eAArB,CAAZ;IACA,KAAKW,KAAL,GAAa,CAAb;EACD;;EAMDC,OAAO,CAACC,MAAD,EAASC,QAAT,EAAmB;IACxB,KAAKJ,IAAL,CAAUK,MAAV,CAAiBD,QAAjB,EAA2B,IAAIE,UAAJ,CAAeH,MAAf,CAA3B;IACA,KAAKF,KAAL;EACD;;EAKU,MAALM,KAAK,GAAG;IACZ,OAAO,IAAIC,QAAJ,CAAa,KAAKR,IAAL,CAAUS,IAAV,EAAb,EAA+BC,WAA/B,EAAP;EACD;;AAxC6B"}
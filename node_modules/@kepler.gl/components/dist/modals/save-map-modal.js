"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.MapInfoPanel = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _imageModalContainer = _interopRequireDefault(require("./image-modal-container"));

var _flexContainer = require("../common/flex-container");

var _statusPanel = _interopRequireWildcard(require("./status-panel"));

var _providerSelect = require("./cloud-components/provider-select");

var _constants = require("@kepler.gl/constants");

var _styledComponents2 = require("../common/styled-components");

var _imagePreview = _interopRequireDefault(require("../common/image-preview"));

var _localization = require("@kepler.gl/localization");

var _modal = require("../common/modal");

var _useCloudListProvider2 = require("../hooks/use-cloud-list-provider");

var _templateObject;

var StyledSaveMapModal = _styledComponents["default"].div.attrs({
  className: 'save-map-modal'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  .save-map-modal-content {\n    min-height: 400px;\n    flex-direction: column;\n  }\n\n  .description {\n    width: 300px;\n  }\n\n  .image-preview-panel {\n    width: 300px;\n\n    .image-preview {\n      padding: 0;\n    }\n  }\n\n  .map-info-panel {\n    flex-direction: column;\n  }\n\n  .save-map-modal-description {\n    .modal-section-subtitle {\n      margin-left: 6px;\n    }\n  }\n"])));

var nop = function nop(_) {};

var TEXT_AREA_LIGHT_STYLE = {
  resize: 'none'
};

var MapInfoPanel = function MapInfoPanel(_ref) {
  var mapInfo = _ref.mapInfo,
      characterLimits = _ref.characterLimits,
      onChangeInput = _ref.onChangeInput;
  var _mapInfo$description = mapInfo.description,
      description = _mapInfo$description === void 0 ? '' : _mapInfo$description,
      _mapInfo$title = mapInfo.title,
      title = _mapInfo$title === void 0 ? '' : _mapInfo$title;
  return /*#__PURE__*/_react["default"].createElement("div", {
    className: "selection map-info-panel",
    "data-testid": _constants.dataTestIds.providerMapInfoPanel
  }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalSection, {
    className: "save-map-modal-name"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "modal-section-title"
  }, "Name*"), /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.InputLight, {
    id: "map-title",
    type: "text",
    value: title,
    onChange: function onChange(e) {
      return onChangeInput('title', e);
    },
    placeholder: "Type map title"
  }))), /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react["default"].createElement(_flexContainer.FlexContainer, {
    className: "save-map-modal-description"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "modal-section-title"
  }, "Description"), /*#__PURE__*/_react["default"].createElement("div", {
    className: "modal-section-subtitle"
  }, "(optional)")), /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.TextAreaLight, {
    rows: 3,
    id: "map-description",
    style: TEXT_AREA_LIGHT_STYLE,
    value: description,
    onChange: function onChange(e) {
      return onChangeInput('description', e);
    },
    placeholder: "Type map description"
  })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalInputFootnote, {
    error: Boolean(characterLimits === null || characterLimits === void 0 ? void 0 : characterLimits.description) && description.length > Number(characterLimits === null || characterLimits === void 0 ? void 0 : characterLimits.description)
  }, description.length, "/", (characterLimits === null || characterLimits === void 0 ? void 0 : characterLimits.description) || _constants.MAP_INFO_CHARACTER.description, ' ', "characters")));
};

exports.MapInfoPanel = MapInfoPanel;

var SaveMapHeader = function SaveMapHeader(_ref2) {
  var cloudProviders = _ref2.cloudProviders;
  return /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledExportSection, null, /*#__PURE__*/_react["default"].createElement("div", {
    className: "description"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "title"
  }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
    id: 'modal.saveMap.title'
  })), /*#__PURE__*/_react["default"].createElement("div", {
    className: "subtitle"
  }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
    id: 'modal.saveMap.subtitle'
  }))), /*#__PURE__*/_react["default"].createElement(_providerSelect.ProviderSelect, {
    cloudProviders: cloudProviders
  }));
};

var STYLED_EXPORT_SECTION_STYLE = {
  margin: '2px 0'
};
var PROVIDER_MANAGER_URL_STYLE = {
  textDecoration: 'underline'
};

function SaveMapModalFactory() {
  var SaveMapModal = function SaveMapModal(_ref3) {
    var mapInfo = _ref3.mapInfo,
        exportImage = _ref3.exportImage,
        _ref3$characterLimits = _ref3.characterLimits,
        characterLimits = _ref3$characterLimits === void 0 ? _constants.MAP_INFO_CHARACTER : _ref3$characterLimits,
        isProviderLoading = _ref3.isProviderLoading,
        providerError = _ref3.providerError,
        _ref3$onUpdateImageSe = _ref3.onUpdateImageSetting,
        onUpdateImageSetting = _ref3$onUpdateImageSe === void 0 ? nop : _ref3$onUpdateImageSe,
        cleanupExportImage = _ref3.cleanupExportImage,
        onSetMapInfo = _ref3.onSetMapInfo,
        onCancel = _ref3.onCancel,
        onConfirm = _ref3.onConfirm;

    var _useCloudListProvider = (0, _useCloudListProvider2.useCloudListProvider)(),
        provider = _useCloudListProvider.provider,
        cloudProviders = _useCloudListProvider.cloudProviders;

    var onChangeInput = function onChangeInput(key, _ref4) {
      var value = _ref4.target.value;
      onSetMapInfo((0, _defineProperty2["default"])({}, key, value));
    };

    var confirmButton = (0, _react.useMemo)(function () {
      return {
        large: true,
        disabled: Boolean(!(provider && mapInfo.title)),
        children: 'modal.button.save'
      };
    }, [provider, mapInfo]);
    var confirm = (0, _react.useCallback)(function () {
      if (provider) {
        onConfirm(provider);
      }
    }, [provider]);
    return /*#__PURE__*/_react["default"].createElement(_imageModalContainer["default"], {
      provider: provider,
      onUpdateImageSetting: onUpdateImageSetting,
      cleanupExportImage: cleanupExportImage
    }, /*#__PURE__*/_react["default"].createElement(StyledSaveMapModal, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalContent, {
      className: "save-map-modal-content"
    }, /*#__PURE__*/_react["default"].createElement(SaveMapHeader, {
      cloudProviders: cloudProviders
    }), provider && /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, provider.getManagementUrl ? /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledExportSection, {
      style: STYLED_EXPORT_SECTION_STYLE
    }, /*#__PURE__*/_react["default"].createElement("div", {
      className: "selection"
    }, /*#__PURE__*/_react["default"].createElement("a", {
      key: 1,
      href: provider.getManagementUrl(),
      target: "_blank",
      rel: "noopener noreferrer",
      style: PROVIDER_MANAGER_URL_STYLE
    }, "Go to your Kepler.gl ", provider.displayName, " page"))) : null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledExportSection, null, /*#__PURE__*/_react["default"].createElement("div", {
      className: "description image-preview-panel"
    }, /*#__PURE__*/_react["default"].createElement(_imagePreview["default"], {
      exportImage: exportImage,
      width: _constants.MAP_THUMBNAIL_DIMENSION.width,
      showDimension: false
    })), isProviderLoading ? /*#__PURE__*/_react["default"].createElement("div", {
      "data-testid": _constants.dataTestIds.providerLoading,
      className: "selection map-saving-animation"
    }, /*#__PURE__*/_react["default"].createElement(_statusPanel.UploadAnimation, {
      icon: provider && provider.icon
    })) : /*#__PURE__*/_react["default"].createElement(MapInfoPanel, {
      mapInfo: mapInfo,
      characterLimits: characterLimits,
      onChangeInput: onChangeInput
    }))), providerError ? /*#__PURE__*/_react["default"].createElement(_statusPanel["default"], {
      isLoading: false,
      error: providerError.message,
      providerIcon: provider && provider.icon
    }) : null)), /*#__PURE__*/_react["default"].createElement(_modal.ModalFooter, {
      cancel: onCancel,
      confirm: confirm,
      confirmButton: confirmButton
    }));
  };

  return SaveMapModal;
}

var _default = SaveMapModalFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RhbHMvc2F2ZS1tYXAtbW9kYWwudHN4Il0sIm5hbWVzIjpbIlN0eWxlZFNhdmVNYXBNb2RhbCIsInN0eWxlZCIsImRpdiIsImF0dHJzIiwiY2xhc3NOYW1lIiwibm9wIiwiXyIsIlRFWFRfQVJFQV9MSUdIVF9TVFlMRSIsInJlc2l6ZSIsIk1hcEluZm9QYW5lbCIsIm1hcEluZm8iLCJjaGFyYWN0ZXJMaW1pdHMiLCJvbkNoYW5nZUlucHV0IiwiZGVzY3JpcHRpb24iLCJ0aXRsZSIsImRhdGFUZXN0SWRzIiwicHJvdmlkZXJNYXBJbmZvUGFuZWwiLCJlIiwiQm9vbGVhbiIsImxlbmd0aCIsIk51bWJlciIsIk1BUF9JTkZPX0NIQVJBQ1RFUiIsIlNhdmVNYXBIZWFkZXIiLCJjbG91ZFByb3ZpZGVycyIsIlNUWUxFRF9FWFBPUlRfU0VDVElPTl9TVFlMRSIsIm1hcmdpbiIsIlBST1ZJREVSX01BTkFHRVJfVVJMX1NUWUxFIiwidGV4dERlY29yYXRpb24iLCJTYXZlTWFwTW9kYWxGYWN0b3J5IiwiU2F2ZU1hcE1vZGFsIiwiZXhwb3J0SW1hZ2UiLCJpc1Byb3ZpZGVyTG9hZGluZyIsInByb3ZpZGVyRXJyb3IiLCJvblVwZGF0ZUltYWdlU2V0dGluZyIsImNsZWFudXBFeHBvcnRJbWFnZSIsIm9uU2V0TWFwSW5mbyIsIm9uQ2FuY2VsIiwib25Db25maXJtIiwicHJvdmlkZXIiLCJrZXkiLCJ2YWx1ZSIsInRhcmdldCIsImNvbmZpcm1CdXR0b24iLCJsYXJnZSIsImRpc2FibGVkIiwiY2hpbGRyZW4iLCJjb25maXJtIiwiZ2V0TWFuYWdlbWVudFVybCIsImRpc3BsYXlOYW1lIiwiTUFQX1RIVU1CTkFJTF9ESU1FTlNJT04iLCJ3aWR0aCIsInByb3ZpZGVyTG9hZGluZyIsImljb24iLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFPQTs7QUFR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QVMsRUFBQztBQUFmLG9CQUNFLGdDQUFDLHdCQUFEO0FBQ0UsTUFBQSxXQUFXLEVBQUVsQixXQURmO0FBRUUsTUFBQSxLQUFLLEVBQUVtQixtQ0FBd0JDLEtBRmpDO0FBR0UsTUFBQSxhQUFhLEVBQUU7QUFIakIsTUFERixDQURGLEVBUUduQixpQkFBaUIsZ0JBQ2hCO0FBQ0UscUJBQWFoQix1QkFBWW9DLGVBRDNCO0FBRUUsTUFBQSxTQUFTLEVBQUM7QUFGWixvQkFJRSxnQ0FBQyw0QkFBRDtBQUFpQixNQUFBLElBQUksRUFBRWIsUUFBUSxJQUFJQSxRQUFRLENBQUNjO0FBQTVDLE1BSkYsQ0FEZ0IsZ0JBUWhCLGdDQUFDLFlBQUQ7QUFDRSxNQUFBLE9BQU8sRUFBRTFDLE9BRFg7QUFFRSxNQUFBLGVBQWUsRUFBRUMsZUFGbkI7QUFHRSxNQUFBLGFBQWEsRUFBRUM7QUFIakIsTUFoQkosQ0FoQkYsQ0FISixFQTRDR29CLGFBQWEsZ0JBQ1osZ0NBQUMsdUJBQUQ7QUFDRSxNQUFBLFNBQVMsRUFBRSxLQURiO0FBRUUsTUFBQSxLQUFLLEVBQUVBLGFBQWEsQ0FBQ3FCLE9BRnZCO0FBR0UsTUFBQSxZQUFZLEVBQUVmLFFBQVEsSUFBSUEsUUFBUSxDQUFDYztBQUhyQyxNQURZLEdBTVYsSUFsRE4sQ0FERixDQUxGLGVBMkRFLGdDQUFDLGtCQUFEO0FBQWEsTUFBQSxNQUFNLEVBQUVoQixRQUFyQjtBQUErQixNQUFBLE9BQU8sRUFBRVUsT0FBeEM7QUFBaUQsTUFBQSxhQUFhLEVBQUVKO0FBQWhFLE1BM0RGLENBREY7QUErREQsR0FuR0Q7O0FBcUdBLFNBQU9iLFlBQVA7QUFDRDs7ZUFFY0QsbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlTWVtb30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgSW1hZ2VNb2RhbENvbnRhaW5lciwge0ltYWdlTW9kYWxDb250YWluZXJQcm9wc30gZnJvbSAnLi9pbWFnZS1tb2RhbC1jb250YWluZXInO1xuaW1wb3J0IHtGbGV4Q29udGFpbmVyfSBmcm9tICcuLi9jb21tb24vZmxleC1jb250YWluZXInO1xuaW1wb3J0IFN0YXR1c1BhbmVsLCB7VXBsb2FkQW5pbWF0aW9ufSBmcm9tICcuL3N0YXR1cy1wYW5lbCc7XG5pbXBvcnQge1Byb3ZpZGVyU2VsZWN0fSBmcm9tICcuL2Nsb3VkLWNvbXBvbmVudHMvcHJvdmlkZXItc2VsZWN0JztcbmltcG9ydCB7XG4gIE1BUF9USFVNQk5BSUxfRElNRU5TSU9OLFxuICBNQVBfSU5GT19DSEFSQUNURVIsXG4gIEV4cG9ydEltYWdlLFxuICBkYXRhVGVzdElkc1xufSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5cbmltcG9ydCB7XG4gIFN0eWxlZE1vZGFsQ29udGVudCxcbiAgSW5wdXRMaWdodCxcbiAgVGV4dEFyZWFMaWdodCxcbiAgU3R5bGVkRXhwb3J0U2VjdGlvbixcbiAgU3R5bGVkTW9kYWxTZWN0aW9uLFxuICBTdHlsZWRNb2RhbElucHV0Rm9vdG5vdGVcbn0gZnJvbSAnLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBJbWFnZVByZXZpZXcgZnJvbSAnLi4vY29tbW9uL2ltYWdlLXByZXZpZXcnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdAa2VwbGVyLmdsL2xvY2FsaXphdGlvbic7XG5pbXBvcnQge01hcEluZm99IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtQcm92aWRlcn0gZnJvbSAnQGtlcGxlci5nbC9jbG91ZC1wcm92aWRlcnMnO1xuaW1wb3J0IHtzZXRNYXBJbmZvLCBjbGVhbnVwRXhwb3J0SW1hZ2UgYXMgY2xlYW51cEV4cG9ydEltYWdlQWN0aW9ufSBmcm9tICdAa2VwbGVyLmdsL2FjdGlvbnMnO1xuaW1wb3J0IHtNb2RhbEZvb3Rlcn0gZnJvbSAnLi4vY29tbW9uL21vZGFsJztcbmltcG9ydCB7dXNlQ2xvdWRMaXN0UHJvdmlkZXJ9IGZyb20gJy4uL2hvb2tzL3VzZS1jbG91ZC1saXN0LXByb3ZpZGVyJztcblxuY29uc3QgU3R5bGVkU2F2ZU1hcE1vZGFsID0gc3R5bGVkLmRpdi5hdHRycyh7XG4gIGNsYXNzTmFtZTogJ3NhdmUtbWFwLW1vZGFsJ1xufSlgXG4gIC5zYXZlLW1hcC1tb2RhbC1jb250ZW50IHtcbiAgICBtaW4taGVpZ2h0OiA0MDBweDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICB9XG5cbiAgLmRlc2NyaXB0aW9uIHtcbiAgICB3aWR0aDogMzAwcHg7XG4gIH1cblxuICAuaW1hZ2UtcHJldmlldy1wYW5lbCB7XG4gICAgd2lkdGg6IDMwMHB4O1xuXG4gICAgLmltYWdlLXByZXZpZXcge1xuICAgICAgcGFkZGluZzogMDtcbiAgICB9XG4gIH1cblxuICAubWFwLWluZm8tcGFuZWwge1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIH1cblxuICAuc2F2ZS1tYXAtbW9kYWwtZGVzY3JpcHRpb24ge1xuICAgIC5tb2RhbC1zZWN0aW9uLXN1YnRpdGxlIHtcbiAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7XG4gICAgfVxuICB9XG5gO1xuXG5jb25zdCBub3AgPSBfID0+IHt9O1xuY29uc3QgVEVYVF9BUkVBX0xJR0hUX1NUWUxFID0ge3Jlc2l6ZTogJ25vbmUnfTtcblxudHlwZSBDaGFyYWN0ZXJMaW1pdHMgPSB7XG4gIHRpdGxlPzogbnVtYmVyO1xuICBkZXNjcmlwdGlvbj86IG51bWJlcjtcbn07XG5cbnR5cGUgU2F2ZU1hcE1vZGFsUHJvcHMgPSB7XG4gIG1hcEluZm86IE1hcEluZm87XG4gIGV4cG9ydEltYWdlOiBFeHBvcnRJbWFnZTtcbiAgaXNQcm92aWRlckxvYWRpbmc6IGJvb2xlYW47XG4gIHByb3ZpZGVyRXJyb3I/OiBFcnJvcjtcbiAgY2hhcmFjdGVyTGltaXRzPzogQ2hhcmFjdGVyTGltaXRzO1xuXG4gIC8vIGNhbGxiYWNrc1xuICBvblVwZGF0ZUltYWdlU2V0dGluZzogSW1hZ2VNb2RhbENvbnRhaW5lclByb3BzWydvblVwZGF0ZUltYWdlU2V0dGluZyddO1xuICBjbGVhbnVwRXhwb3J0SW1hZ2U6IHR5cGVvZiBjbGVhbnVwRXhwb3J0SW1hZ2VBY3Rpb247XG4gIG9uU2V0TWFwSW5mbzogdHlwZW9mIHNldE1hcEluZm87XG4gIG9uQ29uZmlybTogKHByb3ZpZGVyOiBQcm92aWRlcikgPT4gdm9pZDtcbiAgb25DYW5jZWw6ICgpID0+IHZvaWQ7XG59O1xuXG50eXBlIE1hcEluZm9QYW5lbFByb3BzID0gUGljazxTYXZlTWFwTW9kYWxQcm9wcywgJ21hcEluZm8nIHwgJ2NoYXJhY3RlckxpbWl0cyc+ICYge1xuICBvbkNoYW5nZUlucHV0OiAoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50IHwgSFRNTElucHV0RWxlbWVudD5cbiAgKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGNvbnN0IE1hcEluZm9QYW5lbDogUmVhY3QuRkM8TWFwSW5mb1BhbmVsUHJvcHM+ID0gKHtcbiAgbWFwSW5mbyxcbiAgY2hhcmFjdGVyTGltaXRzLFxuICBvbkNoYW5nZUlucHV0XG59KSA9PiB7XG4gIGNvbnN0IHtkZXNjcmlwdGlvbiA9ICcnLCB0aXRsZSA9ICcnfSA9IG1hcEluZm87XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzZWxlY3Rpb24gbWFwLWluZm8tcGFuZWxcIiBkYXRhLXRlc3RpZD17ZGF0YVRlc3RJZHMucHJvdmlkZXJNYXBJbmZvUGFuZWx9PlxuICAgICAgPFN0eWxlZE1vZGFsU2VjdGlvbiBjbGFzc05hbWU9XCJzYXZlLW1hcC1tb2RhbC1uYW1lXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtc2VjdGlvbi10aXRsZVwiPk5hbWUqPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPElucHV0TGlnaHRcbiAgICAgICAgICAgIGlkPVwibWFwLXRpdGxlXCJcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXt0aXRsZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IG9uQ2hhbmdlSW5wdXQoJ3RpdGxlJywgZSl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgbWFwIHRpdGxlXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvU3R5bGVkTW9kYWxTZWN0aW9uPlxuICAgICAgPFN0eWxlZE1vZGFsU2VjdGlvbj5cbiAgICAgICAgPEZsZXhDb250YWluZXIgY2xhc3NOYW1lPVwic2F2ZS1tYXAtbW9kYWwtZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXNlY3Rpb24tdGl0bGVcIj5EZXNjcmlwdGlvbjwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtc2VjdGlvbi1zdWJ0aXRsZVwiPihvcHRpb25hbCk8L2Rpdj5cbiAgICAgICAgPC9GbGV4Q29udGFpbmVyPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxUZXh0QXJlYUxpZ2h0XG4gICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgaWQ9XCJtYXAtZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgc3R5bGU9e1RFWFRfQVJFQV9MSUdIVF9TVFlMRSBhcyBSZWFjdC5DU1NQcm9wZXJ0aWVzfVxuICAgICAgICAgICAgdmFsdWU9e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gb25DaGFuZ2VJbnB1dCgnZGVzY3JpcHRpb24nLCBlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVHlwZSBtYXAgZGVzY3JpcHRpb25cIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8U3R5bGVkTW9kYWxJbnB1dEZvb3Rub3RlXG4gICAgICAgICAgZXJyb3I9e1xuICAgICAgICAgICAgQm9vbGVhbihjaGFyYWN0ZXJMaW1pdHM/LmRlc2NyaXB0aW9uKSAmJlxuICAgICAgICAgICAgZGVzY3JpcHRpb24ubGVuZ3RoID4gTnVtYmVyKGNoYXJhY3RlckxpbWl0cz8uZGVzY3JpcHRpb24pXG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAge2Rlc2NyaXB0aW9uLmxlbmd0aH0ve2NoYXJhY3RlckxpbWl0cz8uZGVzY3JpcHRpb24gfHwgTUFQX0lORk9fQ0hBUkFDVEVSLmRlc2NyaXB0aW9ufXsnICd9XG4gICAgICAgICAgY2hhcmFjdGVyc1xuICAgICAgICA8L1N0eWxlZE1vZGFsSW5wdXRGb290bm90ZT5cbiAgICAgIDwvU3R5bGVkTW9kYWxTZWN0aW9uPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuY29uc3QgU2F2ZU1hcEhlYWRlciA9ICh7Y2xvdWRQcm92aWRlcnN9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPFN0eWxlZEV4cG9ydFNlY3Rpb24+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImRlc2NyaXB0aW9uXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGVcIj5cbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD17J21vZGFsLnNhdmVNYXAudGl0bGUnfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdWJ0aXRsZVwiPlxuICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPXsnbW9kYWwuc2F2ZU1hcC5zdWJ0aXRsZSd9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8UHJvdmlkZXJTZWxlY3QgY2xvdWRQcm92aWRlcnM9e2Nsb3VkUHJvdmlkZXJzfSAvPlxuICAgIDwvU3R5bGVkRXhwb3J0U2VjdGlvbj5cbiAgKTtcbn07XG5cbmNvbnN0IFNUWUxFRF9FWFBPUlRfU0VDVElPTl9TVFlMRSA9IHttYXJnaW46ICcycHggMCd9O1xuY29uc3QgUFJPVklERVJfTUFOQUdFUl9VUkxfU1RZTEUgPSB7dGV4dERlY29yYXRpb246ICd1bmRlcmxpbmUnfTtcblxuZnVuY3Rpb24gU2F2ZU1hcE1vZGFsRmFjdG9yeSgpIHtcbiAgY29uc3QgU2F2ZU1hcE1vZGFsOiBSZWFjdC5GQzxTYXZlTWFwTW9kYWxQcm9wcz4gPSAoe1xuICAgIG1hcEluZm8sXG4gICAgZXhwb3J0SW1hZ2UsXG4gICAgY2hhcmFjdGVyTGltaXRzID0gTUFQX0lORk9fQ0hBUkFDVEVSLFxuICAgIGlzUHJvdmlkZXJMb2FkaW5nLFxuICAgIHByb3ZpZGVyRXJyb3IsXG4gICAgb25VcGRhdGVJbWFnZVNldHRpbmcgPSBub3AsXG4gICAgY2xlYW51cEV4cG9ydEltYWdlLFxuICAgIG9uU2V0TWFwSW5mbyxcbiAgICBvbkNhbmNlbCxcbiAgICBvbkNvbmZpcm1cbiAgfSkgPT4ge1xuICAgIGNvbnN0IHtwcm92aWRlciwgY2xvdWRQcm92aWRlcnN9ID0gdXNlQ2xvdWRMaXN0UHJvdmlkZXIoKTtcblxuICAgIGNvbnN0IG9uQ2hhbmdlSW5wdXQgPSAoXG4gICAgICBrZXk6IHN0cmluZyxcbiAgICAgIHt0YXJnZXQ6IHt2YWx1ZX19OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MVGV4dEFyZWFFbGVtZW50IHwgSFRNTElucHV0RWxlbWVudD5cbiAgICApID0+IHtcbiAgICAgIG9uU2V0TWFwSW5mbyh7W2tleV06IHZhbHVlfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSB1c2VNZW1vKFxuICAgICAgKCkgPT4gKHtcbiAgICAgICAgbGFyZ2U6IHRydWUsXG4gICAgICAgIGRpc2FibGVkOiBCb29sZWFuKCEocHJvdmlkZXIgJiYgbWFwSW5mby50aXRsZSkpLFxuICAgICAgICBjaGlsZHJlbjogJ21vZGFsLmJ1dHRvbi5zYXZlJ1xuICAgICAgfSksXG4gICAgICBbcHJvdmlkZXIsIG1hcEluZm9dXG4gICAgKTtcblxuICAgIGNvbnN0IGNvbmZpcm0gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBpZiAocHJvdmlkZXIpIHtcbiAgICAgICAgb25Db25maXJtKHByb3ZpZGVyKTtcbiAgICAgIH1cbiAgICB9LCBbcHJvdmlkZXJdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8SW1hZ2VNb2RhbENvbnRhaW5lclxuICAgICAgICBwcm92aWRlcj17cHJvdmlkZXJ9XG4gICAgICAgIG9uVXBkYXRlSW1hZ2VTZXR0aW5nPXtvblVwZGF0ZUltYWdlU2V0dGluZ31cbiAgICAgICAgY2xlYW51cEV4cG9ydEltYWdlPXtjbGVhbnVwRXhwb3J0SW1hZ2V9XG4gICAgICA+XG4gICAgICAgIDxTdHlsZWRTYXZlTWFwTW9kYWw+XG4gICAgICAgICAgPFN0eWxlZE1vZGFsQ29udGVudCBjbGFzc05hbWU9XCJzYXZlLW1hcC1tb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICA8U2F2ZU1hcEhlYWRlciBjbG91ZFByb3ZpZGVycz17Y2xvdWRQcm92aWRlcnN9IC8+XG4gICAgICAgICAgICB7cHJvdmlkZXIgJiYgKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIHtwcm92aWRlci5nZXRNYW5hZ2VtZW50VXJsID8gKFxuICAgICAgICAgICAgICAgICAgPFN0eWxlZEV4cG9ydFNlY3Rpb24gc3R5bGU9e1NUWUxFRF9FWFBPUlRfU0VDVElPTl9TVFlMRX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17MX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3Byb3ZpZGVyLmdldE1hbmFnZW1lbnRVcmwoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXtQUk9WSURFUl9NQU5BR0VSX1VSTF9TVFlMRX1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBHbyB0byB5b3VyIEtlcGxlci5nbCB7cHJvdmlkZXIuZGlzcGxheU5hbWV9IHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9TdHlsZWRFeHBvcnRTZWN0aW9uPlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDxTdHlsZWRFeHBvcnRTZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZXNjcmlwdGlvbiBpbWFnZS1wcmV2aWV3LXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxJbWFnZVByZXZpZXdcbiAgICAgICAgICAgICAgICAgICAgICBleHBvcnRJbWFnZT17ZXhwb3J0SW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg9e01BUF9USFVNQk5BSUxfRElNRU5TSU9OLndpZHRofVxuICAgICAgICAgICAgICAgICAgICAgIHNob3dEaW1lbnNpb249e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICB7aXNQcm92aWRlckxvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17ZGF0YVRlc3RJZHMucHJvdmlkZXJMb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNlbGVjdGlvbiBtYXAtc2F2aW5nLWFuaW1hdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8VXBsb2FkQW5pbWF0aW9uIGljb249e3Byb3ZpZGVyICYmIHByb3ZpZGVyLmljb259IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPE1hcEluZm9QYW5lbFxuICAgICAgICAgICAgICAgICAgICAgIG1hcEluZm89e21hcEluZm99XG4gICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyTGltaXRzPXtjaGFyYWN0ZXJMaW1pdHN9XG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VJbnB1dD17b25DaGFuZ2VJbnB1dH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRFeHBvcnRTZWN0aW9uPlxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7cHJvdmlkZXJFcnJvciA/IChcbiAgICAgICAgICAgICAgPFN0YXR1c1BhbmVsXG4gICAgICAgICAgICAgICAgaXNMb2FkaW5nPXtmYWxzZX1cbiAgICAgICAgICAgICAgICBlcnJvcj17cHJvdmlkZXJFcnJvci5tZXNzYWdlfVxuICAgICAgICAgICAgICAgIHByb3ZpZGVySWNvbj17cHJvdmlkZXIgJiYgcHJvdmlkZXIuaWNvbn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgIDwvU3R5bGVkTW9kYWxDb250ZW50PlxuICAgICAgICA8L1N0eWxlZFNhdmVNYXBNb2RhbD5cbiAgICAgICAgPE1vZGFsRm9vdGVyIGNhbmNlbD17b25DYW5jZWx9IGNvbmZpcm09e2NvbmZpcm19IGNvbmZpcm1CdXR0b249e2NvbmZpcm1CdXR0b259IC8+XG4gICAgICA8L0ltYWdlTW9kYWxDb250YWluZXI+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gU2F2ZU1hcE1vZGFsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTYXZlTWFwTW9kYWxGYWN0b3J5O1xuIl19
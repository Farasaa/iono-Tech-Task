"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EffectPanelHeaderActionSectionFactory = EffectPanelHeaderActionSectionFactory;
exports["default"] = exports.defaultProps = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _constants = require("@kepler.gl/constants");

var _panelHeaderAction = _interopRequireDefault(require("../side-panel/panel-header-action"));

var _icons = require("../common/icons");

var _styledComponents2 = require("../common/styled-components");

var _defaultEffectIcons, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;

var defaultProps = {
  isDragNDropEnabled: true
};
exports.defaultProps = defaultProps;
var defaultActionIcons = {
  remove: _icons.Trash,
  visible: _icons.EyeSeen,
  hidden: _icons.EyeUnseen,
  enableConfig: _icons.ArrowDown,
  disableConfig: _icons.ArrowUp
};
var defaultEffectIcons = (_defaultEffectIcons = {}, (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.LIGHT_AND_SHADOW_EFFECT.type, _icons.LightAndShadowEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.ink.type, _icons.InkEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.brightnessContrast.type, _icons.BrightnessContrastEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.hueSaturation.type, _icons.HueSaturationEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.vibrance.type, _icons.VibranceEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.sepia.type, _icons.SepiaEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.dotScreen.type, _icons.DotScreenEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.colorHalftone.type, _icons.ColorHalftoneEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.noise.type, _icons.NoiseEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.triangleBlur.type, _icons.TriangleBlurEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.zoomBlur.type, _icons.ZoomBlurEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.tiltShift.type, _icons.TiltShiftEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.edgeWork.type, _icons.EdgeWorkEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.vignette.type, _icons.VignetteEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.magnify.type, _icons.MagnifyEffectIcon), (0, _defineProperty2["default"])(_defaultEffectIcons, _constants.POSTPROCESSING_EFFECTS.hexagonalPixelate.type, _icons.HexagonalPixelateEffectIcon), _defaultEffectIcons);
var StyledEffectPanelHeader = (0, _styledComponents["default"])(_styledComponents2.StyledPanelHeader)(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  height: ", "px;\n  position: relative;\n  align-items: stretch;\n\n  .effect__drag-handle {\n    margin-left: -5px;\n    color: ", ";\n  }\n\n  .effect__drag-handle__placeholder {\n    height: 20px;\n    padding: 0px;\n    margin: 10px 10px 10px 5px;\n  }\n\n  :hover {\n    cursor: pointer;\n    background-color: ", ";\n    .effect__drag-handle {\n      opacity: 1;\n    }\n  }\n\n  border-left: 3px solid ", ";\n"])), function (props) {
  return props.theme.effectPanelHeaderHeight;
}, function (props) {
  return props.theme.textColor;
}, function (props) {
  return props.theme.panelBackgroundHover;
}, function (props) {
  return props.theme.panelBackgroundHover;
});

var HeaderActionSection = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  position: absolute;\n  height: 100%;\n  align-items: stretch;\n  right: 10px;\n  :hover {\n    .effect-panel__header__actions__hidden {\n      opacity: 1;\n      background-color: ", ";\n    }\n  }\n"])), function (props) {
  return props.theme.panelBackgroundHover;
}); // Hiden actions only show up on hover


var StyledPanelHeaderHiddenActions = _styledComponents["default"].div.attrs({
  className: 'effect-panel__header__actions__hidden'
})(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  opacity: 0;\n  display: flex;\n  align-items: center;\n  transition: opacity 0.4s ease, background-color 0.4s ease;\n  background-color: ", ";\n\n  :hover {\n    opacity: 1;\n  }\n"])), function (props) {
  return props.isConfigActive ? props.theme.panelBackgroundHover : props.theme.panelBackground;
});

var StyledDragHandle = _styledComponents["default"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n  opacity: 0;\n  z-index: 1000;\n  :hover {\n    cursor: move;\n    opacity: 1;\n    color: ", ";\n  }\n"])), function (props) {
  return props.theme.textColorHl;
});

var DragHandle = function DragHandle(_ref) {
  var className = _ref.className,
      listeners = _ref.listeners,
      children = _ref.children;
  return /*#__PURE__*/_react["default"].createElement(StyledDragHandle, (0, _extends2["default"])({
    className: className
  }, listeners), children);
};

EffectPanelHeaderActionSectionFactory.deps = [_panelHeaderAction["default"]];

function EffectPanelHeaderActionSectionFactory(PanelHeaderAction) {
  var EffectPanelHeaderActionSection = function EffectPanelHeaderActionSection(props) {
    var effectId = props.effectId,
        isEnabled = props.isEnabled,
        isConfigActive = props.isConfigActive,
        onToggleEnabled = props.onToggleEnabled,
        onRemoveEffect = props.onRemoveEffect,
        onToggleEnableConfig = props.onToggleEnableConfig,
        actionItems = props.actionItems,
        _props$actionIcons = props.actionIcons,
        actionIcons = _props$actionIcons === void 0 ? defaultActionIcons : _props$actionIcons;
    var effectActionItems = (0, _react.useMemo)(function () {
      return actionItems !== null && actionItems !== void 0 ? actionItems : [{
        key: 'remove-effect',
        isHidden: true,
        tooltip: 'tooltip.removeEffect',
        tooltipType: 'error',
        onClick: onRemoveEffect,
        icon: actionIcons.remove
      }, {
        key: 'visibility-toggle',
        tooltip: isEnabled ? 'tooltip.disableEffect' : 'tooltip.enabledEffect',
        onClick: onToggleEnabled,
        icon: isEnabled ? actionIcons.visible : actionIcons.hidden
      }, {
        key: 'enable-config',
        classNames: {
          'is-open': isConfigActive
        },
        tooltip: 'tooltip.effectSettings',
        onClick: onToggleEnableConfig,
        icon: actionIcons.enableConfig
      }];
    }, [actionItems, isEnabled, onRemoveEffect, onToggleEnabled, actionIcons]);
    return /*#__PURE__*/_react["default"].createElement(HeaderActionSection, {
      className: "effect-panel__header__actions"
    }, /*#__PURE__*/_react["default"].createElement(StyledPanelHeaderHiddenActions, {
      isConfigActive: isConfigActive
    }, effectActionItems.filter(function (item) {
      return Boolean(item.isHidden);
    }).map(function (item, i) {
      return /*#__PURE__*/_react["default"].createElement(PanelHeaderAction, {
        key: item.key,
        className: "effect__".concat(item.key),
        testId: "".concat(item.key, "-action"),
        id: effectId,
        tooltip: item.tooltip,
        onClick: item.onClick,
        tooltipType: item.tooltipType,
        IconComponent: item.icon
      });
    })), effectActionItems.filter(function (item) {
      return !item.isHidden;
    }).map(function (item, i) {
      return /*#__PURE__*/_react["default"].createElement(PanelHeaderAction, {
        key: item.key,
        className: (0, _classnames["default"])("effect__".concat(item.key), item.classNames),
        testId: "".concat(item.key, "-action"),
        id: effectId,
        tooltip: item.tooltip,
        onClick: item.onClick,
        tooltipType: item.tooltipType,
        IconComponent: item.icon
      });
    }));
  };

  return EffectPanelHeaderActionSection;
}

var StyledEffectTitleSection = _styledComponents["default"].div(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-left: 8px;\n  flex-grow: 1;\n  align-items: center;\n  display: flex;\n  color: ", ";\n"])), function (props) {
  return props.theme.textColor;
});

var IconPlaceholder = _styledComponents["default"].div(_templateObject6 || (_templateObject6 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 20px;\n  height: 20px;\n"])));

var EffectIconWrapper = _styledComponents["default"].div(_templateObject7 || (_templateObject7 = (0, _taggedTemplateLiteral2["default"])(["\n  height: 18px;\n  margin: auto;\n  color: ", ";\n"])), function (props) {
  return props.theme.textColor;
});

EffectPanelHeaderFactory.deps = [EffectPanelHeaderActionSectionFactory];

function EffectPanelHeaderFactory(EffectPanelHeaderActionSection) {
  var EffectPanelHeader = function EffectPanelHeader(props) {
    var isConfigActive = props.isConfigActive,
        isDragNDropEnabled = props.isDragNDropEnabled,
        type = props.type,
        onToggleEnableConfig = props.onToggleEnableConfig,
        listeners = props.listeners,
        _props$showSortHandle = props.showSortHandle,
        showSortHandle = _props$showSortHandle === void 0 ? true : _props$showSortHandle;
    var label = (0, _react.useMemo)(function () {
      var description = _constants.EFFECT_DESCRIPTIONS.find(function (_description) {
        return _description.type === type;
      });

      return (description === null || description === void 0 ? void 0 : description.name) || 'Effect';
    }, [type]);
    var EffectIcon = defaultEffectIcons[type];
    return /*#__PURE__*/_react["default"].createElement(StyledEffectPanelHeader, {
      className: (0, _classnames["default"])('effect-panel__header', {
        'sort--handle': !isConfigActive
      }),
      active: isConfigActive,
      onClick: onToggleEnableConfig
    }, isDragNDropEnabled ? /*#__PURE__*/_react["default"].createElement(DragHandle, {
      className: "effect__drag-handle",
      listeners: listeners
    }, showSortHandle ? /*#__PURE__*/_react["default"].createElement(_icons.VertDots, {
      height: "20px"
    }) : /*#__PURE__*/_react["default"].createElement(IconPlaceholder, null)) : /*#__PURE__*/_react["default"].createElement("div", {
      className: "effect__drag-handle__placeholder"
    }), /*#__PURE__*/_react["default"].createElement(EffectIconWrapper, null, EffectIcon ? /*#__PURE__*/_react["default"].createElement(EffectIcon, {
      height: "18px"
    }) : null), /*#__PURE__*/_react["default"].createElement(StyledEffectTitleSection, null, label), /*#__PURE__*/_react["default"].createElement(EffectPanelHeaderActionSection, props));
  };

  EffectPanelHeader.defaultProps = defaultProps;
  return EffectPanelHeader;
}

var _default = EffectPanelHeaderFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lZmZlY3RzL2VmZmVjdC1wYW5lbC1oZWFkZXIudHN4Il0sIm5hbWVzIjpbImRlZmF1bHRQcm9wcyIsImlzRHJhZ05Ecm9wRW5hYmxlZCIsImRlZmF1bHRBY3Rpb25JY29ucyIsInJlbW92ZSIsIlRyYXNoIiwidmlzaWJsZSIsIkV5ZVNlZW4iLCJoaWRkZW4iLCJFeWVVbnNlZW4iLCJlbmFibGVDb25maWciLCJBcnJvd0Rvd24iLCJkaXNhYmxlQ29uZmlnIiwiQXJyb3dVcCIsImRlZmF1bHRFZmZlY3RJY29ucyIsIkxJR0hUX0FORF9TSEFET1dfRUZGRUNUIiwidHlwZSIsIkxpZ2h0QW5kU2hhZG93RWZmZWN0SWNvbiIsIlBPU1RQUk9DRVNTSU5HX0VGRkVDVFMiLCJpbmsiLCJJbmtFZmZlY3RJY29uIiwiYnJpZ2h0bmVzc0NvbnRyYXN0IiwiQnJpZ2h0bmVzc0NvbnRyYXN0RWZmZWN0SWNvbiIsImh1ZVNhdHVyYXRpb24iLCJIdWVTYXR1cmF0aW9uRWZmZWN0SWNvbiIsInZpYnJhbmNlIiwiVmlicmFuY2VFZmZlY3RJY29uIiwic2VwaWEiLCJTZXBpYUVmZmVjdEljb24iLCJkb3RTY3JlZW4iLCJEb3RTY3JlZW5FZmZlY3RJY29uIiwiY29sb3JIYWxmdG9uZSIsIkNvbG9ySGFsZnRvbmVFZmZlY3RJY29uIiwibm9pc2UiLCJOb2lzZUVmZmVjdEljb24iLCJ0cmlhbmdsZUJsdXIiLCJUcmlhbmdsZUJsdXJFZmZlY3RJY29uIiwiem9vbUJsdXIiLCJab29tQmx1ckVmZmVjdEljb24iLCJ0aWx0U2hpZnQiLCJUaWx0U2hpZnRFZmZlY3RJY29uIiwiZWRnZVdvcmsiLCJFZGdlV29ya0VmZmVjdEljb24iLCJ2aWduZXR0ZSIsIlZpZ25ldHRlRWZmZWN0SWNvbiIsIm1hZ25pZnkiLCJNYWduaWZ5RWZmZWN0SWNvbiIsImhleGFnb25hbFBpeGVsYXRlIiwiSGV4YWdvbmFsUGl4ZWxhdGVFZmZlY3RJY29uIiwiU3R5bGVkRWZmZWN0UGFuZWxIZWFkZXIiLCJTdHlsZWRQYW5lbEhlYWRlciIsInByb3BzIiwidGhlbWUiLCJlZmZlY3RQYW5lbEhlYWRlckhlaWdodCIsInRleHRDb2xvciIsInBhbmVsQmFja2dyb3VuZEhvdmVyIiwiSGVhZGVyQWN0aW9uU2VjdGlvbiIsInN0eWxlZCIsImRpdiIsIlN0eWxlZFBhbmVsSGVhZGVySGlkZGVuQWN0aW9ucyIsImF0dHJzIiwiY2xhc3NOYW1lIiwiaXNDb25maWdBY3RpdmUiLCJwYW5lbEJhY2tncm91bmQiLCJTdHlsZWREcmFnSGFuZGxlIiwidGV4dENvbG9ySGwiLCJEcmFnSGFuZGxlIiwibGlzdGVuZXJzIiwiY2hpbGRyZW4iLCJFZmZlY3RQYW5lbEhlYWRlckFjdGlvblNlY3Rpb25GYWN0b3J5IiwiZGVwcyIsIlBhbmVsSGVhZGVyQWN0aW9uRmFjdG9yeSIsIlBhbmVsSGVhZGVyQWN0aW9uIiwiRWZmZWN0UGFuZWxIZWFkZXJBY3Rpb25TZWN0aW9uIiwiZWZmZWN0SWQiLCJpc0VuYWJsZWQiLCJvblRvZ2dsZUVuYWJsZWQiLCJvblJlbW92ZUVmZmVjdCIsIm9uVG9nZ2xlRW5hYmxlQ29uZmlnIiwiYWN0aW9uSXRlbXMiLCJhY3Rpb25JY29ucyIsImVmZmVjdEFjdGlvbkl0ZW1zIiwia2V5IiwiaXNIaWRkZW4iLCJ0b29sdGlwIiwidG9vbHRpcFR5cGUiLCJvbkNsaWNrIiwiaWNvbiIsImNsYXNzTmFtZXMiLCJmaWx0ZXIiLCJpdGVtIiwiQm9vbGVhbiIsIm1hcCIsImkiLCJTdHlsZWRFZmZlY3RUaXRsZVNlY3Rpb24iLCJJY29uUGxhY2Vob2xkZXIiLCJFZmZlY3RJY29uV3JhcHBlciIsIkVmZmVjdFBhbmVsSGVhZGVyRmFjdG9yeSIsIkVmZmVjdFBhbmVsSGVhZGVyIiwic2hvd1NvcnRIYW5kbGUiLCJsYWJlbCIsImRlc2NyaXB0aW9uIiwiRUZGRUNUX0RFU0NSSVBUSU9OUyIsImZpbmQiLCJfZGVzY3JpcHRpb24iLCJuYW1lIiwiRWZmZWN0SWNvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7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SSxJQUFiLEtBQXFCLFFBQTVCO0FBQ0QsS0FIYSxFQUdYLENBQUN6RixJQUFELENBSFcsQ0FBZDtBQUtBLFFBQU0wRixVQUFVLEdBQUc1RixrQkFBa0IsQ0FBQ0UsSUFBRCxDQUFyQztBQUVBLHdCQUNFLGdDQUFDLHVCQUFEO0FBQ0UsTUFBQSxTQUFTLEVBQUUsNEJBQVcsc0JBQVgsRUFBbUM7QUFDNUMsd0JBQWdCLENBQUM4QztBQUQyQixPQUFuQyxDQURiO0FBSUUsTUFBQSxNQUFNLEVBQUVBLGNBSlY7QUFLRSxNQUFBLE9BQU8sRUFBRWdCO0FBTFgsT0FPRzVFLGtCQUFrQixnQkFDakIsZ0NBQUMsVUFBRDtBQUFZLE1BQUEsU0FBUyxFQUFDLHFCQUF0QjtBQUE0QyxNQUFBLFNBQVMsRUFBRWlFO0FBQXZELE9BQ0dnQyxjQUFjLGdCQUFHLGdDQUFDLGVBQUQ7QUFBVSxNQUFBLE1BQU0sRUFBQztBQUFqQixNQUFILGdCQUFnQyxnQ0FBQyxlQUFELE9BRGpELENBRGlCLGdCQUtqQjtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsTUFaSixlQWVFLGdDQUFDLGlCQUFELFFBQW9CTyxVQUFVLGdCQUFHLGdDQUFDLFVBQUQ7QUFBWSxNQUFBLE1BQU0sRUFBQztBQUFuQixNQUFILEdBQWtDLElBQWhFLENBZkYsZUFpQkUsZ0NBQUMsd0JBQUQsUUFBMkJOLEtBQTNCLENBakJGLGVBbUJFLGdDQUFDLDhCQUFELEVBQW9DakQsS0FBcEMsQ0FuQkYsQ0FERjtBQXVCRCxHQXhDRDs7QUEwQ0ErQyxFQUFBQSxpQkFBaUIsQ0FBQ2pHLFlBQWxCLEdBQWlDQSxZQUFqQztBQUVBLFNBQU9pRyxpQkFBUDtBQUNEOztlQUVjRCx3QiIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCB7XG4gIEVGRkVDVF9ERVNDUklQVElPTlMsXG4gIExJR0hUX0FORF9TSEFET1dfRUZGRUNULFxuICBQT1NUUFJPQ0VTU0lOR19FRkZFQ1RTXG59IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcblxuaW1wb3J0IFBhbmVsSGVhZGVyQWN0aW9uRmFjdG9yeSwge1BhbmVsSGVhZGVyQWN0aW9uSWNvbn0gZnJvbSAnLi4vc2lkZS1wYW5lbC9wYW5lbC1oZWFkZXItYWN0aW9uJztcbmltcG9ydCB7XG4gIEFycm93RG93bixcbiAgQXJyb3dVcCxcbiAgRXllU2VlbixcbiAgRXllVW5zZWVuLFxuICBUcmFzaCxcbiAgVmVydERvdHMsXG4gIExpZ2h0QW5kU2hhZG93RWZmZWN0SWNvbixcbiAgSW5rRWZmZWN0SWNvbixcbiAgQnJpZ2h0bmVzc0NvbnRyYXN0RWZmZWN0SWNvbixcbiAgSHVlU2F0dXJhdGlvbkVmZmVjdEljb24sXG4gIFZpYnJhbmNlRWZmZWN0SWNvbixcbiAgU2VwaWFFZmZlY3RJY29uLFxuICBEb3RTY3JlZW5FZmZlY3RJY29uLFxuICBDb2xvckhhbGZ0b25lRWZmZWN0SWNvbixcbiAgTm9pc2VFZmZlY3RJY29uLFxuICBUcmlhbmdsZUJsdXJFZmZlY3RJY29uLFxuICBab29tQmx1ckVmZmVjdEljb24sXG4gIFRpbHRTaGlmdEVmZmVjdEljb24sXG4gIEVkZ2VXb3JrRWZmZWN0SWNvbixcbiAgVmlnbmV0dGVFZmZlY3RJY29uLFxuICBNYWduaWZ5RWZmZWN0SWNvbixcbiAgSGV4YWdvbmFsUGl4ZWxhdGVFZmZlY3RJY29uLFxuICBCYXNlUHJvcHNcbn0gZnJvbSAnLi4vY29tbW9uL2ljb25zJztcbmltcG9ydCB7U3R5bGVkUGFuZWxIZWFkZXJ9IGZyb20gJy4uL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5cbmV4cG9ydCB0eXBlIEFjdGlvbkl0ZW0gPSB7XG4gIGtleTogc3RyaW5nO1xuICBpc0hpZGRlbj86IGJvb2xlYW47XG4gIHRvb2x0aXA6IHN0cmluZztcbiAgY2xhc3NOYW1lcz86IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+O1xuICBpY29uOiBQYW5lbEhlYWRlckFjdGlvbkljb247XG4gIHRvb2x0aXBUeXBlPzogJ2Vycm9yJztcbiAgb25DbGljazogKCkgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCB0eXBlIEVmZmVjdFBhbmVsSGVhZGVyUHJvcHMgPSB7XG4gIHR5cGU6IHN0cmluZztcbiAgbGlzdGVuZXJzOiBhbnk7XG4gIGVmZmVjdElkOiBzdHJpbmc7XG4gIGlzRW5hYmxlZDogYm9vbGVhbjtcbiAgaXNDb25maWdBY3RpdmU6IGJvb2xlYW47XG4gIGlzSnNvbkVkaXRvckFjdGl2ZTogYm9vbGVhbjtcbiAgc2hvd1NvcnRIYW5kbGU/OiBib29sZWFuO1xuICBpc0RyYWdORHJvcEVuYWJsZWQ6IGJvb2xlYW47XG4gIG9uVG9nZ2xlRW5hYmxlZDogKCkgPT4gdm9pZDtcbiAgb25SZW1vdmVFZmZlY3Q6ICgpID0+IHZvaWQ7XG4gIG9uVG9nZ2xlRW5hYmxlQ29uZmlnOiAoKSA9PiB2b2lkO1xuICBhY3Rpb25JY29ucz86IHtcbiAgICByZW1vdmU6IFJlYWN0LkNvbXBvbmVudFR5cGU8UGFydGlhbDxCYXNlUHJvcHM+PjtcbiAgICB2aXNpYmxlOiBSZWFjdC5Db21wb25lbnRUeXBlPFBhcnRpYWw8QmFzZVByb3BzPj47XG4gICAgaGlkZGVuOiBSZWFjdC5Db21wb25lbnRUeXBlPFBhcnRpYWw8QmFzZVByb3BzPj47XG4gICAgZW5hYmxlQ29uZmlnOiBSZWFjdC5Db21wb25lbnRUeXBlPFBhcnRpYWw8QmFzZVByb3BzPj47XG4gICAgZGlzYWJsZUNvbmZpZzogUmVhY3QuQ29tcG9uZW50VHlwZTxQYXJ0aWFsPEJhc2VQcm9wcz4+O1xuICB9O1xuICBhY3Rpb25JdGVtcz86IEFjdGlvbkl0ZW1bXTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIGlzRHJhZ05Ecm9wRW5hYmxlZDogdHJ1ZVxufTtcblxuY29uc3QgZGVmYXVsdEFjdGlvbkljb25zID0ge1xuICByZW1vdmU6IFRyYXNoLFxuICB2aXNpYmxlOiBFeWVTZWVuLFxuICBoaWRkZW46IEV5ZVVuc2VlbixcbiAgZW5hYmxlQ29uZmlnOiBBcnJvd0Rvd24sXG4gIGRpc2FibGVDb25maWc6IEFycm93VXBcbn07XG5cbmNvbnN0IGRlZmF1bHRFZmZlY3RJY29ucyA9IHtcbiAgW0xJR0hUX0FORF9TSEFET1dfRUZGRUNULnR5cGVdOiBMaWdodEFuZFNoYWRvd0VmZmVjdEljb24sXG4gIFtQT1NUUFJPQ0VTU0lOR19FRkZFQ1RTLmluay50eXBlXTogSW5rRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMuYnJpZ2h0bmVzc0NvbnRyYXN0LnR5cGVdOiBCcmlnaHRuZXNzQ29udHJhc3RFZmZlY3RJY29uLFxuICBbUE9TVFBST0NFU1NJTkdfRUZGRUNUUy5odWVTYXR1cmF0aW9uLnR5cGVdOiBIdWVTYXR1cmF0aW9uRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMudmlicmFuY2UudHlwZV06IFZpYnJhbmNlRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMuc2VwaWEudHlwZV06IFNlcGlhRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMuZG90U2NyZWVuLnR5cGVdOiBEb3RTY3JlZW5FZmZlY3RJY29uLFxuICBbUE9TVFBST0NFU1NJTkdfRUZGRUNUUy5jb2xvckhhbGZ0b25lLnR5cGVdOiBDb2xvckhhbGZ0b25lRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMubm9pc2UudHlwZV06IE5vaXNlRWZmZWN0SWNvbixcbiAgW1BPU1RQUk9DRVNTSU5HX0VGRkVDVFMudHJpYW5nbGVCbHVyLnR5cGVdOiBUcmlhbmdsZUJsdXJFZmZlY3RJY29uLFxuICBbUE9TVFBST0NFU1NJTkdfRUZGRUNUUy56b29tQmx1ci50eXBlXTogWm9vbUJsdXJFZmZlY3RJY29uLFxuICBbUE9TVFBST0NFU1NJTkdfRUZGRUNUUy50aWx0U2hpZnQudHlwZV06IFRpbHRTaGlmdEVmZmVjdEljb24sXG4gIFtQT1NUUFJPQ0VTU0lOR19FRkZFQ1RTLmVkZ2VXb3JrLnR5cGVdOiBFZGdlV29ya0VmZmVjdEljb24sXG4gIFtQT1NUUFJPQ0VTU0lOR19FRkZFQ1RTLnZpZ25ldHRlLnR5cGVdOiBWaWduZXR0ZUVmZmVjdEljb24sXG4gIFtQT1NUUFJPQ0VTU0lOR19FRkZFQ1RTLm1hZ25pZnkudHlwZV06IE1hZ25pZnlFZmZlY3RJY29uLFxuICBbUE9TVFBST0NFU1NJTkdfRUZGRUNUUy5oZXhhZ29uYWxQaXhlbGF0ZS50eXBlXTogSGV4YWdvbmFsUGl4ZWxhdGVFZmZlY3RJY29uXG59O1xuXG5jb25zdCBTdHlsZWRFZmZlY3RQYW5lbEhlYWRlciA9IHN0eWxlZChTdHlsZWRQYW5lbEhlYWRlcilgXG4gIGhlaWdodDogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5lZmZlY3RQYW5lbEhlYWRlckhlaWdodH1weDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcblxuICAuZWZmZWN0X19kcmFnLWhhbmRsZSB7XG4gICAgbWFyZ2luLWxlZnQ6IC01cHg7XG4gICAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUudGV4dENvbG9yfTtcbiAgfVxuXG4gIC5lZmZlY3RfX2RyYWctaGFuZGxlX19wbGFjZWhvbGRlciB7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIHBhZGRpbmc6IDBweDtcbiAgICBtYXJnaW46IDEwcHggMTBweCAxMHB4IDVweDtcbiAgfVxuXG4gIDpob3ZlciB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUucGFuZWxCYWNrZ3JvdW5kSG92ZXJ9O1xuICAgIC5lZmZlY3RfX2RyYWctaGFuZGxlIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuICB9XG5cbiAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAke3Byb3BzID0+IHByb3BzLnRoZW1lLnBhbmVsQmFja2dyb3VuZEhvdmVyfTtcbmA7XG5cbmNvbnN0IEhlYWRlckFjdGlvblNlY3Rpb24gPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGhlaWdodDogMTAwJTtcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XG4gIHJpZ2h0OiAxMHB4O1xuICA6aG92ZXIge1xuICAgIC5lZmZlY3QtcGFuZWxfX2hlYWRlcl9fYWN0aW9uc19faGlkZGVuIHtcbiAgICAgIG9wYWNpdHk6IDE7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnBhbmVsQmFja2dyb3VuZEhvdmVyfTtcbiAgICB9XG4gIH1cbmA7XG5cbi8vIEhpZGVuIGFjdGlvbnMgb25seSBzaG93IHVwIG9uIGhvdmVyXG50eXBlIFN0eWxlZFBhbmVsSGVhZGVySGlkZGVuQWN0aW9uc1Byb3BzID0ge2lzQ29uZmlnQWN0aXZlOiBib29sZWFufTtcbmNvbnN0IFN0eWxlZFBhbmVsSGVhZGVySGlkZGVuQWN0aW9ucyA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdlZmZlY3QtcGFuZWxfX2hlYWRlcl9fYWN0aW9uc19faGlkZGVuJ1xufSk8U3R5bGVkUGFuZWxIZWFkZXJIaWRkZW5BY3Rpb25zUHJvcHM+YFxuICBvcGFjaXR5OiAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuNHMgZWFzZSwgYmFja2dyb3VuZC1jb2xvciAwLjRzIGVhc2U7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT5cbiAgICBwcm9wcy5pc0NvbmZpZ0FjdGl2ZSA/IHByb3BzLnRoZW1lLnBhbmVsQmFja2dyb3VuZEhvdmVyIDogcHJvcHMudGhlbWUucGFuZWxCYWNrZ3JvdW5kfTtcblxuICA6aG92ZXIge1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbmA7XG5cbmNvbnN0IFN0eWxlZERyYWdIYW5kbGUgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBvcGFjaXR5OiAwO1xuICB6LWluZGV4OiAxMDAwO1xuICA6aG92ZXIge1xuICAgIGN1cnNvcjogbW92ZTtcbiAgICBvcGFjaXR5OiAxO1xuICAgIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRleHRDb2xvckhsfTtcbiAgfVxuYDtcblxuY29uc3QgRHJhZ0hhbmRsZSA9ICh7Y2xhc3NOYW1lLCBsaXN0ZW5lcnMsIGNoaWxkcmVufSkgPT4gKFxuICA8U3R5bGVkRHJhZ0hhbmRsZSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gey4uLmxpc3RlbmVyc30+XG4gICAge2NoaWxkcmVufVxuICA8L1N0eWxlZERyYWdIYW5kbGU+XG4pO1xuXG5FZmZlY3RQYW5lbEhlYWRlckFjdGlvblNlY3Rpb25GYWN0b3J5LmRlcHMgPSBbUGFuZWxIZWFkZXJBY3Rpb25GYWN0b3J5XTtcblxuZXhwb3J0IGZ1bmN0aW9uIEVmZmVjdFBhbmVsSGVhZGVyQWN0aW9uU2VjdGlvbkZhY3RvcnkoXG4gIFBhbmVsSGVhZGVyQWN0aW9uOiBSZXR1cm5UeXBlPHR5cGVvZiBQYW5lbEhlYWRlckFjdGlvbkZhY3Rvcnk+XG4pOiBSZWFjdC5GQzxFZmZlY3RQYW5lbEhlYWRlclByb3BzPiB7XG4gIGNvbnN0IEVmZmVjdFBhbmVsSGVhZGVyQWN0aW9uU2VjdGlvbiA9IChwcm9wczogRWZmZWN0UGFuZWxIZWFkZXJQcm9wcykgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGVmZmVjdElkLFxuICAgICAgaXNFbmFibGVkLFxuICAgICAgaXNDb25maWdBY3RpdmUsXG4gICAgICBvblRvZ2dsZUVuYWJsZWQsXG4gICAgICBvblJlbW92ZUVmZmVjdCxcbiAgICAgIG9uVG9nZ2xlRW5hYmxlQ29uZmlnLFxuICAgICAgYWN0aW9uSXRlbXMsXG4gICAgICBhY3Rpb25JY29ucyA9IGRlZmF1bHRBY3Rpb25JY29uc1xuICAgIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IGVmZmVjdEFjdGlvbkl0ZW1zOiBBY3Rpb25JdGVtW10gPSB1c2VNZW1vKFxuICAgICAgKCkgPT5cbiAgICAgICAgYWN0aW9uSXRlbXMgPz8gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ3JlbW92ZS1lZmZlY3QnLFxuICAgICAgICAgICAgaXNIaWRkZW46IHRydWUsXG4gICAgICAgICAgICB0b29sdGlwOiAndG9vbHRpcC5yZW1vdmVFZmZlY3QnLFxuICAgICAgICAgICAgdG9vbHRpcFR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBvbkNsaWNrOiBvblJlbW92ZUVmZmVjdCxcbiAgICAgICAgICAgIGljb246IGFjdGlvbkljb25zLnJlbW92ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAga2V5OiAndmlzaWJpbGl0eS10b2dnbGUnLFxuICAgICAgICAgICAgdG9vbHRpcDogaXNFbmFibGVkID8gJ3Rvb2x0aXAuZGlzYWJsZUVmZmVjdCcgOiAndG9vbHRpcC5lbmFibGVkRWZmZWN0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IG9uVG9nZ2xlRW5hYmxlZCxcbiAgICAgICAgICAgIGljb246IGlzRW5hYmxlZCA/IGFjdGlvbkljb25zLnZpc2libGUgOiBhY3Rpb25JY29ucy5oaWRkZW5cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGtleTogJ2VuYWJsZS1jb25maWcnLFxuICAgICAgICAgICAgY2xhc3NOYW1lczogeydpcy1vcGVuJzogaXNDb25maWdBY3RpdmV9LFxuICAgICAgICAgICAgdG9vbHRpcDogJ3Rvb2x0aXAuZWZmZWN0U2V0dGluZ3MnLFxuICAgICAgICAgICAgb25DbGljazogb25Ub2dnbGVFbmFibGVDb25maWcsXG4gICAgICAgICAgICBpY29uOiBhY3Rpb25JY29ucy5lbmFibGVDb25maWdcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICBbYWN0aW9uSXRlbXMsIGlzRW5hYmxlZCwgb25SZW1vdmVFZmZlY3QsIG9uVG9nZ2xlRW5hYmxlZCwgYWN0aW9uSWNvbnNdXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8SGVhZGVyQWN0aW9uU2VjdGlvbiBjbGFzc05hbWU9XCJlZmZlY3QtcGFuZWxfX2hlYWRlcl9fYWN0aW9uc1wiPlxuICAgICAgICA8U3R5bGVkUGFuZWxIZWFkZXJIaWRkZW5BY3Rpb25zIGlzQ29uZmlnQWN0aXZlPXtpc0NvbmZpZ0FjdGl2ZX0+XG4gICAgICAgICAge2VmZmVjdEFjdGlvbkl0ZW1zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtOiBBY3Rpb25JdGVtKSA9PiBCb29sZWFuKGl0ZW0uaXNIaWRkZW4pKVxuICAgICAgICAgICAgLm1hcCgoaXRlbTogQWN0aW9uSXRlbSwgaSkgPT4gKFxuICAgICAgICAgICAgICA8UGFuZWxIZWFkZXJBY3Rpb25cbiAgICAgICAgICAgICAgICBrZXk9e2l0ZW0ua2V5fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGVmZmVjdF9fJHtpdGVtLmtleX1gfVxuICAgICAgICAgICAgICAgIHRlc3RJZD17YCR7aXRlbS5rZXl9LWFjdGlvbmB9XG4gICAgICAgICAgICAgICAgaWQ9e2VmZmVjdElkfVxuICAgICAgICAgICAgICAgIHRvb2x0aXA9e2l0ZW0udG9vbHRpcH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtpdGVtLm9uQ2xpY2t9XG4gICAgICAgICAgICAgICAgdG9vbHRpcFR5cGU9e2l0ZW0udG9vbHRpcFR5cGV9XG4gICAgICAgICAgICAgICAgSWNvbkNvbXBvbmVudD17aXRlbS5pY29ufVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvU3R5bGVkUGFuZWxIZWFkZXJIaWRkZW5BY3Rpb25zPlxuICAgICAgICB7ZWZmZWN0QWN0aW9uSXRlbXNcbiAgICAgICAgICAuZmlsdGVyKChpdGVtOiBBY3Rpb25JdGVtKSA9PiAhaXRlbS5pc0hpZGRlbilcbiAgICAgICAgICAubWFwKChpdGVtOiBBY3Rpb25JdGVtLCBpKSA9PiAoXG4gICAgICAgICAgICA8UGFuZWxIZWFkZXJBY3Rpb25cbiAgICAgICAgICAgICAga2V5PXtpdGVtLmtleX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKGBlZmZlY3RfXyR7aXRlbS5rZXl9YCwgaXRlbS5jbGFzc05hbWVzKX1cbiAgICAgICAgICAgICAgdGVzdElkPXtgJHtpdGVtLmtleX0tYWN0aW9uYH1cbiAgICAgICAgICAgICAgaWQ9e2VmZmVjdElkfVxuICAgICAgICAgICAgICB0b29sdGlwPXtpdGVtLnRvb2x0aXB9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2l0ZW0ub25DbGlja31cbiAgICAgICAgICAgICAgdG9vbHRpcFR5cGU9e2l0ZW0udG9vbHRpcFR5cGV9XG4gICAgICAgICAgICAgIEljb25Db21wb25lbnQ9e2l0ZW0uaWNvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSl9XG4gICAgICA8L0hlYWRlckFjdGlvblNlY3Rpb24+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gRWZmZWN0UGFuZWxIZWFkZXJBY3Rpb25TZWN0aW9uO1xufVxuXG5jb25zdCBTdHlsZWRFZmZlY3RUaXRsZVNlY3Rpb24gPSBzdHlsZWQuZGl2YFxuICBtYXJnaW4tbGVmdDogOHB4O1xuICBmbGV4LWdyb3c6IDE7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRleHRDb2xvcn07XG5gO1xuXG5jb25zdCBJY29uUGxhY2Vob2xkZXIgPSBzdHlsZWQuZGl2YFxuICB3aWR0aDogMjBweDtcbiAgaGVpZ2h0OiAyMHB4O1xuYDtcblxuY29uc3QgRWZmZWN0SWNvbldyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBoZWlnaHQ6IDE4cHg7XG4gIG1hcmdpbjogYXV0bztcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUudGV4dENvbG9yfTtcbmA7XG5cbkVmZmVjdFBhbmVsSGVhZGVyRmFjdG9yeS5kZXBzID0gW0VmZmVjdFBhbmVsSGVhZGVyQWN0aW9uU2VjdGlvbkZhY3RvcnldO1xuXG5mdW5jdGlvbiBFZmZlY3RQYW5lbEhlYWRlckZhY3RvcnkoXG4gIEVmZmVjdFBhbmVsSGVhZGVyQWN0aW9uU2VjdGlvbjogUmV0dXJuVHlwZTx0eXBlb2YgRWZmZWN0UGFuZWxIZWFkZXJBY3Rpb25TZWN0aW9uRmFjdG9yeT5cbik6IFJlYWN0LkZDPEVmZmVjdFBhbmVsSGVhZGVyUHJvcHM+IHtcbiAgY29uc3QgRWZmZWN0UGFuZWxIZWFkZXIgPSAocHJvcHM6IEVmZmVjdFBhbmVsSGVhZGVyUHJvcHMpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBpc0NvbmZpZ0FjdGl2ZSxcbiAgICAgIGlzRHJhZ05Ecm9wRW5hYmxlZCxcbiAgICAgIHR5cGUsXG4gICAgICBvblRvZ2dsZUVuYWJsZUNvbmZpZyxcbiAgICAgIGxpc3RlbmVycyxcbiAgICAgIHNob3dTb3J0SGFuZGxlID0gdHJ1ZVxuICAgIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IGxhYmVsID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IEVGRkVDVF9ERVNDUklQVElPTlMuZmluZChfZGVzY3JpcHRpb24gPT4gX2Rlc2NyaXB0aW9uLnR5cGUgPT09IHR5cGUpO1xuICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uPy5uYW1lIHx8ICdFZmZlY3QnO1xuICAgIH0sIFt0eXBlXSk7XG5cbiAgICBjb25zdCBFZmZlY3RJY29uID0gZGVmYXVsdEVmZmVjdEljb25zW3R5cGVdO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTdHlsZWRFZmZlY3RQYW5lbEhlYWRlclxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMoJ2VmZmVjdC1wYW5lbF9faGVhZGVyJywge1xuICAgICAgICAgICdzb3J0LS1oYW5kbGUnOiAhaXNDb25maWdBY3RpdmVcbiAgICAgICAgfSl9XG4gICAgICAgIGFjdGl2ZT17aXNDb25maWdBY3RpdmV9XG4gICAgICAgIG9uQ2xpY2s9e29uVG9nZ2xlRW5hYmxlQ29uZmlnfVxuICAgICAgPlxuICAgICAgICB7aXNEcmFnTkRyb3BFbmFibGVkID8gKFxuICAgICAgICAgIDxEcmFnSGFuZGxlIGNsYXNzTmFtZT1cImVmZmVjdF9fZHJhZy1oYW5kbGVcIiBsaXN0ZW5lcnM9e2xpc3RlbmVyc30+XG4gICAgICAgICAgICB7c2hvd1NvcnRIYW5kbGUgPyA8VmVydERvdHMgaGVpZ2h0PVwiMjBweFwiIC8+IDogPEljb25QbGFjZWhvbGRlciAvPn1cbiAgICAgICAgICA8L0RyYWdIYW5kbGU+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZmZlY3RfX2RyYWctaGFuZGxlX19wbGFjZWhvbGRlclwiIC8+XG4gICAgICAgICl9XG5cbiAgICAgICAgPEVmZmVjdEljb25XcmFwcGVyPntFZmZlY3RJY29uID8gPEVmZmVjdEljb24gaGVpZ2h0PVwiMThweFwiIC8+IDogbnVsbH08L0VmZmVjdEljb25XcmFwcGVyPlxuXG4gICAgICAgIDxTdHlsZWRFZmZlY3RUaXRsZVNlY3Rpb24+e2xhYmVsfTwvU3R5bGVkRWZmZWN0VGl0bGVTZWN0aW9uPlxuXG4gICAgICAgIDxFZmZlY3RQYW5lbEhlYWRlckFjdGlvblNlY3Rpb24gey4uLnByb3BzfSAvPlxuICAgICAgPC9TdHlsZWRFZmZlY3RQYW5lbEhlYWRlcj5cbiAgICApO1xuICB9O1xuXG4gIEVmZmVjdFBhbmVsSGVhZGVyLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuICByZXR1cm4gRWZmZWN0UGFuZWxIZWFkZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVmZmVjdFBhbmVsSGVhZGVyRmFjdG9yeTtcbiJdfQ==
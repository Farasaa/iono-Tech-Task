"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _reactIntl = require("react-intl");

var _styledComponents = require("../../common/styled-components");

var _infoHelper = _interopRequireDefault(require("../../common/info-helper"));

var _dimensionScaleSelector = _interopRequireDefault(require("./dimension-scale-selector"));

var _utils = require("@kepler.gl/utils");

var _fieldSelector = _interopRequireDefault(require("../../common/field-selector"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

VisConfigByFieldSelectorFactory.deps = [_infoHelper["default"], _fieldSelector["default"]];

function VisConfigByFieldSelectorFactory(InfoHelper, FieldSelector) {
  var VisConfigByFieldSelector = /*#__PURE__*/function (_Component) {
    (0, _inherits2["default"])(VisConfigByFieldSelector, _Component);

    var _super = _createSuper(VisConfigByFieldSelector);

    function VisConfigByFieldSelector() {
      var _this;

      (0, _classCallCheck2["default"])(this, VisConfigByFieldSelector);

      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      _this = _super.call.apply(_super, [this].concat(args));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_updateVisByField", function (val) {
        _this.props.updateField(val);
      });
      return _this;
    }

    (0, _createClass2["default"])(VisConfigByFieldSelector, [{
      key: "render",
      value: function render() {
        var _this$props = this.props,
            property = _this$props.property,
            showScale = _this$props.showScale,
            selectedField = _this$props.selectedField,
            description = _this$props.description,
            label = _this$props.label,
            intl = _this$props.intl,
            _this$props$scaleOpti = _this$props.scaleOptions,
            scaleOptions = _this$props$scaleOpti === void 0 ? [] : _this$props$scaleOpti;
        return /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(_styledComponents.PanelLabelWrapper, null, /*#__PURE__*/_react["default"].createElement(_styledComponents.PanelLabel, null, label && /*#__PURE__*/_react["default"].createElement(_reactIntl.FormattedMessage, {
          id: label
        }) || /*#__PURE__*/_react["default"].createElement(_reactIntl.FormattedMessage, {
          id: "layer.propertyBasedOn",
          values: {
            property: intl.formatMessage({
              id: "property.".concat((0, _utils.camelize)(property)),
              defaultMessage: property
            })
          }
        })), description && /*#__PURE__*/_react["default"].createElement(InfoHelper, {
          description: description,
          property: property,
          id: "".concat(this.props.id, "-").concat(property)
        })), /*#__PURE__*/_react["default"].createElement(FieldSelector, {
          fields: this.props.fields,
          value: selectedField && selectedField.name,
          placeholder: this.props.placeholder,
          onSelect: this._updateVisByField,
          erasable: true
        })), /*#__PURE__*/_react["default"].createElement("div", null, showScale ? /*#__PURE__*/_react["default"].createElement(_dimensionScaleSelector["default"], {
          scaleType: this.props.scaleType,
          options: scaleOptions,
          label: "".concat(property, " scale"),
          onSelect: this.props.updateScale,
          disabled: scaleOptions.length < 2
        }) : null));
      }
    }]);
    return VisConfigByFieldSelector;
  }(_react.Component);

  return (0, _reactIntl.injectIntl)(VisConfigByFieldSelector);
}

var _default = VisConfigByFieldSelectorFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2xheWVyLXBhbmVsL3Zpcy1jb25maWctYnktZmllbGQtc2VsZWN0b3IudHN4Il0sIm5hbWVzIjpbIlZpc0NvbmZpZ0J5RmllbGRTZWxlY3RvckZhY3RvcnkiLCJkZXBzIiwiSW5mb0hlbHBlckZhY3RvcnkiLCJGaWVsZFNlbGVjdG9yRmFjdG9yeSIsIkluZm9IZWxwZXIiLCJGaWVsZFNlbGVjdG9yIiwiVmlzQ29uZmlnQnlGaWVsZFNlbGVjdG9yIiwidmFsIiwicHJvcHMiLCJ1cGRhdGVGaWVsZCIsInByb3BlcnR5Iiwic2hvd1NjYWxlIiwic2VsZWN0ZWRGaWVsZCIsImRlc2NyaXB0aW9uIiwibGFiZWwiLCJpbnRsIiwic2NhbGVPcHRpb25zIiwiZm9ybWF0TWVzc2FnZSIsImlkIiwiZGVmYXVsdE1lc3NhZ2UiLCJmaWVsZHMiLCJuYW1lIiwicGxhY2Vob2xkZXIiLCJfdXBkYXRlVmlzQnlGaWVsZCIsInNjYWxlVHlwZSIsInVwZGF0ZVNjYWxlIiwibGVuZ3RoIiwiQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBSUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQXNCQUEsK0JBQStCLENBQUNDLElBQWhDLEdBQXVDLENBQUNDLHNCQUFELEVBQW9CQyx5QkFBcEIsQ0FBdkM7O0FBRUEsU0FBU0gsK0JBQVQsQ0FDRUksVUFERixFQUVFQyxhQUZGLEVBR0U7QUFBQSxNQUNNQyx3QkFETjtBQUFBOztBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEsNEdBRXNCLFVBQ2xCQyxHQURrQixFQVFmO0FBQ0gsY0FBS0MsS0FBTCxDQUFXQyxXQUFYLENBQXVCRixHQUF2QjtBQUNELE9BWkg7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxhQWNFLGtCQUFTO0FBQUEsMEJBU0gsS0FBS0MsS0FURjtBQUFBLFlBRUxFLFFBRkssZUFFTEEsUUFGSztBQUFBLFlBR0xDLFNBSEssZUFHTEEsU0FISztBQUFBLFlBSUxDLGFBSkssZUFJTEEsYUFKSztBQUFBLFlBS0xDLFdBTEssZUFLTEEsV0FMSztBQUFBLFlBTUxDLEtBTkssZUFNTEEsS0FOSztBQUFBLFlBT0xDLElBUEssZUFPTEEsSUFQSztBQUFBLGdEQVFMQyxZQVJLO0FBQUEsWUFRTEEsWUFSSyxzQ0FRVSxFQVJWO0FBV1AsNEJBQ0UsZ0NBQUMsa0NBQUQscUJBQ0UsZ0NBQUMsa0NBQUQscUJBQ0UsZ0NBQUMsbUNBQUQscUJBQ0UsZ0NBQUMsNEJBQUQsUUFDSUYsS0FBSyxpQkFBSSxnQ0FBQywyQkFBRDtBQUFrQixVQUFBLEVBQUUsRUFBRUE7QUFBdEIsVUFBVixpQkFDQyxnQ0FBQywyQkFBRDtBQUNFLFVBQUEsRUFBRSxFQUFDLHVCQURMO0FBRUUsVUFBQSxNQUFNLEVBQUU7QUFDTkosWUFBQUEsUUFBUSxFQUFFSyxJQUFJLENBQUNFLGFBQUwsQ0FBbUI7QUFDM0JDLGNBQUFBLEVBQUUscUJBQWMscUJBQVNSLFFBQVQsQ0FBZCxDQUR5QjtBQUUzQlMsY0FBQUEsY0FBYyxFQUFFVDtBQUZXLGFBQW5CO0FBREo7QUFGVixVQUZKLENBREYsRUFjR0csV0FBVyxpQkFDVixnQ0FBQyxVQUFEO0FBQ0UsVUFBQSxXQUFXLEVBQUVBLFdBRGY7QUFFRSxVQUFBLFFBQVEsRUFBRUgsUUFGWjtBQUdFLFVBQUEsRUFBRSxZQUFLLEtBQUtGLEtBQUwsQ0FBV1UsRUFBaEIsY0FBc0JSLFFBQXRCO0FBSEosVUFmSixDQURGLGVBdUJFLGdDQUFDLGFBQUQ7QUFDRSxVQUFBLE1BQU0sRUFBRSxLQUFLRixLQUFMLENBQVdZLE1BRHJCO0FBRUUsVUFBQSxLQUFLLEVBQUVSLGFBQWEsSUFBSUEsYUFBYSxDQUFDUyxJQUZ4QztBQUdFLFVBQUEsV0FBVyxFQUFFLEtBQUtiLEtBQUwsQ0FBV2MsV0FIMUI7QUFJRSxVQUFBLFFBQVEsRUFBRSxLQUFLQyxpQkFKakI7QUFLRSxVQUFBLFFBQVE7QUFMVixVQXZCRixDQURGLGVBZ0NFLDZDQUNHWixTQUFTLGdCQUNSLGdDQUFDLGtDQUFEO0FBQ0UsVUFBQSxTQUFTLEVBQUUsS0FBS0gsS0FBTCxDQUFXZ0IsU0FEeEI7QUFFRSxVQUFBLE9BQU8sRUFBRVIsWUFGWDtBQUdFLFVBQUEsS0FBSyxZQUFLTixRQUFMLFdBSFA7QUFJRSxVQUFBLFFBQVEsRUFBRSxLQUFLRixLQUFMLENBQVdpQixXQUp2QjtBQUtFLFVBQUEsUUFBUSxFQUFFVCxZQUFZLENBQUNVLE1BQWIsR0FBc0I7QUFMbEMsVUFEUSxHQVFOLElBVE4sQ0FoQ0YsQ0FERjtBQThDRDtBQXZFSDtBQUFBO0FBQUEsSUFDdUNDLGdCQUR2Qzs7QUF5RUEsU0FBTywyQkFBV3JCLHdCQUFYLENBQVA7QUFDRDs7ZUFFY04sK0IiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZSwgaW5qZWN0SW50bCwgV3JhcHBlZENvbXBvbmVudFByb3BzfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0IHtGaWVsZH0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5cbmltcG9ydCB7UGFuZWxMYWJlbCwgUGFuZWxMYWJlbFdyYXBwZXIsIFNpZGVQYW5lbFNlY3Rpb259IGZyb20gJy4uLy4uL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgSW5mb0hlbHBlckZhY3RvcnkgZnJvbSAnLi4vLi4vY29tbW9uL2luZm8taGVscGVyJztcbmltcG9ydCBEaW1lbnNpb25TY2FsZVNlbGVjdG9yIGZyb20gJy4vZGltZW5zaW9uLXNjYWxlLXNlbGVjdG9yJztcbmltcG9ydCB7Y2FtZWxpemV9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IEZpZWxkU2VsZWN0b3JGYWN0b3J5IGZyb20gJy4uLy4uL2NvbW1vbi9maWVsZC1zZWxlY3Rvcic7XG5cbnR5cGUgVmlzQ29uZmlnQnlGaWVsZFNlbGVjdG9yUHJvcHMgPSB7XG4gIGNoYW5uZWw6IHN0cmluZztcbiAgZmllbGRzOiBGaWVsZFtdO1xuICBpZDogc3RyaW5nO1xuICBwcm9wZXJ0eTogc3RyaW5nO1xuICBzaG93U2NhbGU6IGJvb2xlYW47XG4gIHVwZGF0ZUZpZWxkOiAoXG4gICAgdmFsOiByZWFkb25seSAoc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG9iamVjdClbXSB8IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBvYmplY3QgfCBudWxsXG4gICkgPT4gdm9pZDtcbiAgdXBkYXRlU2NhbGU6IChcbiAgICB2YWw6IHJlYWRvbmx5IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgb2JqZWN0KVtdIHwgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG9iamVjdCB8IG51bGxcbiAgKSA9PiB2b2lkO1xuICBzY2FsZVR5cGU/OiBzdHJpbmc7XG4gIHNlbGVjdGVkRmllbGQ/OiBGaWVsZDtcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGxhYmVsPzogc3RyaW5nO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgc2NhbGVPcHRpb25zOiBzdHJpbmdbXTtcbn0gJiBXcmFwcGVkQ29tcG9uZW50UHJvcHM7XG5cblZpc0NvbmZpZ0J5RmllbGRTZWxlY3RvckZhY3RvcnkuZGVwcyA9IFtJbmZvSGVscGVyRmFjdG9yeSwgRmllbGRTZWxlY3RvckZhY3RvcnldO1xuXG5mdW5jdGlvbiBWaXNDb25maWdCeUZpZWxkU2VsZWN0b3JGYWN0b3J5KFxuICBJbmZvSGVscGVyOiBSZXR1cm5UeXBlPHR5cGVvZiBJbmZvSGVscGVyRmFjdG9yeT4sXG4gIEZpZWxkU2VsZWN0b3I6IFJldHVyblR5cGU8dHlwZW9mIEZpZWxkU2VsZWN0b3JGYWN0b3J5PlxuKSB7XG4gIGNsYXNzIFZpc0NvbmZpZ0J5RmllbGRTZWxlY3RvciBleHRlbmRzIENvbXBvbmVudDxWaXNDb25maWdCeUZpZWxkU2VsZWN0b3JQcm9wcz4ge1xuICAgIF91cGRhdGVWaXNCeUZpZWxkID0gKFxuICAgICAgdmFsOlxuICAgICAgICB8IHJlYWRvbmx5IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgb2JqZWN0KVtdXG4gICAgICAgIHwgc3RyaW5nXG4gICAgICAgIHwgbnVtYmVyXG4gICAgICAgIHwgYm9vbGVhblxuICAgICAgICB8IG9iamVjdFxuICAgICAgICB8IG51bGxcbiAgICApID0+IHtcbiAgICAgIHRoaXMucHJvcHMudXBkYXRlRmllbGQodmFsKTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgc2hvd1NjYWxlLFxuICAgICAgICBzZWxlY3RlZEZpZWxkLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIGludGwsXG4gICAgICAgIHNjYWxlT3B0aW9ucyA9IFtdXG4gICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFNpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgICAgPFNpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgICAgICA8UGFuZWxMYWJlbFdyYXBwZXI+XG4gICAgICAgICAgICAgIDxQYW5lbExhYmVsPlxuICAgICAgICAgICAgICAgIHsobGFiZWwgJiYgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9e2xhYmVsfSAvPikgfHwgKFxuICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJsYXllci5wcm9wZXJ0eUJhc2VkT25cIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogaW50bC5mb3JtYXRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgcHJvcGVydHkuJHtjYW1lbGl6ZShwcm9wZXJ0eSl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvUGFuZWxMYWJlbD5cbiAgICAgICAgICAgICAge2Rlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgICA8SW5mb0hlbHBlclxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgcHJvcGVydHk9e3Byb3BlcnR5fVxuICAgICAgICAgICAgICAgICAgaWQ9e2Ake3RoaXMucHJvcHMuaWR9LSR7cHJvcGVydHl9YH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9QYW5lbExhYmVsV3JhcHBlcj5cbiAgICAgICAgICAgIDxGaWVsZFNlbGVjdG9yXG4gICAgICAgICAgICAgIGZpZWxkcz17dGhpcy5wcm9wcy5maWVsZHN9XG4gICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZEZpZWxkICYmIHNlbGVjdGVkRmllbGQubmFtZX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgIG9uU2VsZWN0PXt0aGlzLl91cGRhdGVWaXNCeUZpZWxkfVxuICAgICAgICAgICAgICBlcmFzYWJsZVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1NpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHtzaG93U2NhbGUgPyAoXG4gICAgICAgICAgICAgIDxEaW1lbnNpb25TY2FsZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgc2NhbGVUeXBlPXt0aGlzLnByb3BzLnNjYWxlVHlwZX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtzY2FsZU9wdGlvbnN9XG4gICAgICAgICAgICAgICAgbGFiZWw9e2Ake3Byb3BlcnR5fSBzY2FsZWB9XG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMucHJvcHMudXBkYXRlU2NhbGV9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NjYWxlT3B0aW9ucy5sZW5ndGggPCAyfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvU2lkZVBhbmVsU2VjdGlvbj5cbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBpbmplY3RJbnRsKFZpc0NvbmZpZ0J5RmllbGRTZWxlY3Rvcik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpc0NvbmZpZ0J5RmllbGRTZWxlY3RvckZhY3Rvcnk7XG4iXX0=